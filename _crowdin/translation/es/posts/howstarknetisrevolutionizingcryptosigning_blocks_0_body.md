# Cómo StarkNet está revolucionando la firma de criptomonedas
## *Fuera con las llaves complejas, en la cara ID. Un caso de estudio en la abstracción de la cuenta*
En el momento en que la gente puede usar métodos familiares como el identificador facial para firmar transacciones criptográficas, veremos un boom en autocustodia. Todo el mundo sabe que ejecutar tu propia billetera es el original ideal para criptografía, pero es intimidante, y en su lugar tiene gente enganchando los intercambios. Este es un estudio de caso de cómo una funcionalidad de StarkNet llamada Abstraction cuenta está siendo utilizada por Braavos para obtener una forma mucho más intuitiva de usar su cartera.
## Introducción a la abstracción de la cuenta
Después del Escandal FTX, la pregunta es más relevante que nunca. ¿Por qué la gente sigue optando por dar su criptografía a las instituciones centralizadas, en lugar de detenerla ellos mismos? La respuesta: para la mayoría de la gente, la autocustodia es complicada. Las frases de semillas son el mecanismo de recuperación "peor" que disuade a muchos (incluso a algunos de los más endurecidos). La respuesta a este desafío: Abstracción de la cuenta. La abstracción de la cuenta permite que las billeteras cumplan (y superen) las expectativas UX de los usuarios de Web2 como firmar una transacción usando Face ID o usar autenticación de dos factores. Facilita la segmentación de la cuenta y los límites de gasto; y eventualmente permite la recuperación simple de la cuenta y la eliminación de la frase semilla juntos. Es una revolución para UI y UX.
## StarkNet
StarkNet, líder en Validity Rollup, tiene varias características clave que lo convierten en la solución más prometedora para escalar Ethereum. Basado en pruebas STARK, proporciona tarifas de gas bajas sin comprometer la seguridad de Ethereum. El historial de pruebas de STARK StarkEx incluye $800B en volumen acumulativo, transacciones de 300M y 90M NFT. Las capacidades de las pruebas de STARK para proporcionar tarifas bajas, combinadas con el poder de Abstracción de la Cuenta, permitió a Braavos desarrollar las capacidades innovadoras de cartera a las que aspira.
## Contexto
La mayoría de las cadenas de bloques principales, incluyendo Bitcoin y Ethereum, utilizan los esquemas de firma criptográfica de la curva elíptica secp256k1 (ver[aquí](http://ethanfast.com/top-crypto.html)para una lista exhaustiva). Esta implementación de curva elíptica se considera robusta — muchos blockchains la usan y se resistió a la prueba del tiempo. Pero no es compatible con el esquema de firma criptográfica disponible en los módulos de seguridad de hardware de los dispositivos móviles (HSM), tales como el iPhones y los teléfonos Android (Pixel y otros). Estos dispositivos usan otra curva — secp256r1 (también llamada NIST-P256). Esto significa que los usuarios de estos blockchains no pueden aprovechar los chips de seguridad de sus dispositivos y tener que usar las carteras de hardware si quieren obtener un alto nivel de seguridad. Esto restringe severamente cualquier innovación UX sobre cómo los usuarios pueden iniciar sesión en una cartera y aprobar transacciones (por lo tanto, la ubicuidad de las frases de semilla). StarkNet no soporta secp256r1, y tiene su propia curva autónoma que es una curva amigable con STARK. Pero a diferencia de otros blockchains, StarkNet tiene una abstracción de cuenta disponible nativamente en su plataforma, que abre un nuevo mundo de oportunidades de UX para aplicaciones de cartera. Braavos aprovechó esta capacidad para introducir el Signer de Hardware.
## El Signer de Hardware
El Signer de Hardware consta de dos partes principales:
* El subsistema seguro en el dispositivo móvil de los usuarios * El contrato inteligente de la cuenta que puede ejecutar lógica arbitraria (también llamada Abstracción de la cuenta)
## Subsistema seguro
El Signer de Hardware utiliza el subsistema seguro integrado en el dispositivo de los usuarios: el**Enclave seguro**del iPhone o el**Titán**HSM del teléfono Android para proteger la cuenta. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) El chip Secure Enclave / Titan es un subsistema dedicado y aislado, totalmente separado del procesador de aplicaciones que puede generar claves privadas y mensajes de firma. Genera las claves usando un Generador de Números Aleatorios (TRNG) interno y señaliza los mensajes sobre la curva elíptica NIST-P256 (secp256r1) a través de su acelerador interno de Clave Pública (PKA). Las claves privadas nunca dejan el sistema seguro y son desconocidas/inaccesibles para nadie, ni siquiera para el usuario, ni para la propia aplicación. Esto significa que incluso si el núcleo del procesador de aplicaciones de dispositivo se pone en peligro, ¡las claves de usuario permanecen seguras! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Inmerso en el Enclave Seguro
Durante el proceso de fabricación del chip un UID (Identificador Único) es generado por el TRNG y almacenado en el PKA. No se puede leer y nunca sale del PKA, por lo tanto es desconocido incluso para el procesador Secure Enclave y para el sistema de operación del procesador Secure Enclave (SepOS). Este UID es un número aleatorio único por dispositivo y se utiliza para cifrar todas las demás claves que se generarán en el futuro en este dispositivo. La forma en que funciona es la siguiente: la aplicación solicitará al SepOS que genere un nuevo par de claves, el SepOS instruirá al Secure Enclave TRNG para que genere una clave y la encripte (usando el UID). La aplicación puede entonces solicitar a SepOS descifrar la clave y firmar un mensaje usando la clave generada. Durante todo este proceso la clave generada no deja el enclave y es desconocida para nadie. (Para obtener más información sobre el Secure Enclave, consulte[aquí](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)). La forma en que se construye y funciona el Enclave Seguro, junto con el hecho de que es un blanco de ataques de poderosas corporaciones y gobiernos de todo el mundo, es la razón por la que su seguridad sobrepasa las carteras de hardware estándar.
## Resumen de la cuenta
El poder de Braavos como una cartera basada en contrato inteligente sobre StarkNet, es que está compuesta por dos pilares:
* El lado del cliente (por ejemplo, la aplicación) que permite al usuario revisar/firmar transacciones y enviarlas a la cadena. * El lado de la cadena — tiene un contrato inteligente de cuenta que puede ejecutar lógica arbitraria; y, en particular, en nuestro caso, ejecute la lógica de**verificación**de firma arbitraria. La aplicación firma la transacción usando el módulo de seguridad del dispositivo móvil y luego la envía al contrato de cuenta en cadena que puede verificarlo. Como se mencionó anteriormente, el módulo de seguridad en teléfonos iPhones y Android utiliza una criptografía que se llama NIST-P256 (secp256r1), que no es compatible con ningún esquema criptográfico importante del blockchain, incluyendo StarkNet. Esta es la razón por la que tener una cuenta de contrato inteligente en cadena por la que todas las transacciones pasan y pueden ejecutar lógica arbitraria, es crucial en la utilización de estos HSMs en teléfonos iPhones y Android. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## Biometría
¿Cómo aprueba el usuario una transacción a través del monedero Braavos? ¿Puede una aplicación maliciosa firmar una transacción sin el consentimiento del usuario? No!! Lo bueno del módulo de seguridad integrado en dispositivos móviles, como el Secure Enclave, es que soporta la autenticación intrínsecamente biométrica de la identidad del usuario. Esto significa que incluso la aprobación real para firmar una transacción se hace directamente frente al Enclave Seguro. La aprobación no pasa por la aplicación, y el usuario tendrá que aprobar la transacción con su huella dactilar o identificación facial.
## Recuperación
Si nadie conoce la clave privada, ¿qué pasa si el dispositivo se pierde o se bloquea? ¿Cómo puede el usuario recuperar el control de la cuenta? En Braavos, una cuenta tendrá 2 claves públicas: la clave Firma de Hardware, que se utilizará para firmar todas las transacciones, y la clave derivada de la frase semilla que sólo puede firmar una transacción — una “Solicitud para eliminar el Signer de Hardware”. Esta solicitud no se ejecutará inmediatamente, sino que tendrá un retraso de tiempo de 4 días (configurable) para permitir al usuario utilizar el Signer de hardware para cancelar dicha solicitud. Esto significa que si el dispositivo es robado/perdido/ladrillo, los usuarios podrán recuperar su cuenta en un plazo de 4 días. Sin embargo, si su frase de semillas es robada y un atacante envía una solicitud para eliminar el signo de hardware, el usuario recibirá automáticamente (y repetidamente) una notificación a su dispositivo móvil y podrá cancelar la solicitud y mantener todos los activos a salvo.
## Summary
La característica Signer de hardware ofrece tanto el nivel de seguridad más avanzado para los usuarios de criptografía, como la experiencia de los usuarios de web2. En este sentido, firmar una transacción es tan fácil y libre de preocuparse como pagar con pago de Apple/Google. Este es sólo uno, pero alto, ejemplo del poder de StarkNet, inteligente cartera basada en contrato (a. .a Abstracción de cuenta) y el nuevo espacio de diseño que habilita. Presentamos el desarrollo de cada vez más capacidades de adelgazamiento que conducirán a la industria de criptomonedas a un futuro mejor y más inclusivo proporcionar a usuarios nuevos y existentes por igual con seguridad incomprometida junto con UX sin compromisos.