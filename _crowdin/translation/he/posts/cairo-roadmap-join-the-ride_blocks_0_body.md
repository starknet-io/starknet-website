## TL;DR

* קהיר ממשיכה להתפתח. לנוחיות הקהילה, יצרנו לוח ציבורי המתאר את התכונות המגניבות שלפנינו.
* תחביר חוזה חדש יושק בקרוב יחד עם Starknet alpha v0.12.0, הדורש שינויי קוד מינימליים ומעשיר משמעותית את שפת החוזים החכמים.
* עם Cairo 1.1.0 ב-Starknet Mainnet, ו-v2 שיגיע בקרוב ל-Starknet, הגענו לאבן דרך חשובה בבגרות השפה. בין ה [docs](https://cairo-lang.org/docs/v1.0/), [book](https://cairo-book.github.io/title-page.html)וה-Starknet [discord](https://discord.gg/qypnmzkhbc), אמורים להיות לך מספיק משאבים כדי לצאת לדרך ולהגר מקהיר 0.



## מבוא

Cairo v1 התפתח באופן משמעותי מאז ימי האלפא המוקדמים שלה, הגיע לשוויון תכונות עם Cairo 0, וצבר תכונות חדשות למעלה (לולאות בסיסיות זמינות כעת, ויכולות רבות נוספות נמצאות בתהליך). המטרה שלנו בפוסט זה היא לשפוך אור נוסף על מפת הדרכים קצרת הטווח של קהיר: על מה עובדים כרגע ולמה המפתחים יכולים לצפות בשבועות ובחודשים הקרובים. בעתיד, תוכל להישאר מעודכן בהתפתחויות או בתוכניות האחרונות עבור השפה על ידי מעקב אחר לוח מפת הדרכים [של קהיר](https://github.com/orgs/starkware-libs/projects/1/views/1) ב-Github.



## למה קהיר?

לצד ההתקדמות הגדולה בשפה ברמה הגבוהה, אנו חושבים שחשוב להדגיש את התועלת הבסיסית של קהיר, ומדוע אנו חושבים שזה הבסיס לעתיד של קנה המידה של בלוקצ'יין. 

מאז הקמתה, קהיר תוכננה במטרה היחידה להיות השפה היעילה ביותר לכתיבת תוכניות שניתן להוכיח. הארכיטקטורה של ה-VM של קהיר, כפי שתוארה [במאמר המקורי](https://eprint.iacr.org/2021/1063.pdf), תוכננה להפקה יעילה של הוכחות STARK לביצוע תוכניות קהיר, מה שהופך אותו לבסיס האידיאלי עבור אוסף תוקף. Cairo v2, השפה החדשה דמוית חלודה שיש לנו היום, בנויה על היסודות הללו, אך נועדה לשרת קהילה רחבה של מפתחים, מבחינת ארגונומיה, בטיחות וקלות למידה וכתיבה. האבולוציה שעברה קהיר בשנתיים האחרונות, הפכה אותה משפה נישה ברמה נמוכה לשפה ידידותית למפתחים ברמה גבוהה, המספקת יתרון בכל הנוגע להוכחות ויעילות קנה מידה.

## רק תגיד קהיר

תגיד "Cairo 1 - גרסת מהדר vX.YZ" לא יותר. מעכשיו, רק תגיד קהיר. יאי! 

עם המהדר החדש של קהיר, אנו עוקבים אחר תקן [גרסאות סמנטיות](https://semver.org/) ; כלומר, גרסאות מהדר מורכבות משלוש ספרות, ושינוי בספרה המשמעותית ביותר מציין שינויים שבירים. עם הגרסה הבאה של קהיר, יש לנו שינויים מפליגים בתחביר החוזה החכם (מתואר בהמשך הפוסט), כך שהדבר הנכון לעשות הוא להקפיץ את הגרסה לקהיר v2. כדי למנוע סימון מסורבל, נפסיק לומר Cairo 1, ומעתה ואילך נזהה את גרסת השפה עם גרסת המהדר (היחידה). שפת המקור, שעדיין תוכל לשמש בעתיד בהקשרים שונים מחוץ לסטארקנט, תיקרא "קהיר 0".

![](/assets/screenshot-2023-06-29-at-17.04.49.png)

## מה הלאה עבור קהיר?

בסעיפים הבאים, אנו עוברים על ההתפתחויות הגדולות הקרובות בשפה, ומסבירים כיצד הם משפיעים על חווית המפתחים בקהיר.

### תכונות קרובות

למרות ששוויון תכונה עם קהיר 0 היה אבן דרך חשובה, זה בהחלט לא היעד הסופי. תמיד ניתן לשפר את השפה ברמה הגבוהה, ותכונות רבות נוספות בדרך. אתה יכול לבדוק את מפת הדרכים [](https://github.com/orgs/starkware-libs/projects/1/views/1) כדי לראות תכונות שעובדים עליהן ולעקוב אחר הצטברות. כמה אזכורים בולטים הם:

* **רכיבים**: השלב הבא בתחביר החוזה החדש, המאפשר לחוזים לייבא רכיבים המוגדרים בספריות חיצוניות
* **Keccak ו- Secp-k1**: כבר נכלל בקהיר v2, אלה יאפשרו אימות חתימות Ethereum בגרסה הקרובה של Starknet.
* **תמיכה במספרים שלמים חתומים**
* **Secp-r1 curve operations**: זה יאפשר שימוש בחומרה מקורית כדי לחתום על עסקאות, מה שיביא ל-UX הרבה יותר פשוט לאינטראקציה עם Starknet
* **מחרוזות**: סוג מקורי עבור מחרוזות (ארוכות), המאפשר מניפולציה סטנדרטית של מחרוזות. זוהי תכונה בסיסית, אשר מבוקשת גם מפרויקטי NFT ומשחקים.
* **איטרטורים**: אלה יאפשרו לנו להעשיר את תחביר הלולאה, ולחזור על מערכים/טווחים בצורה הרבה יותר נוחה



### Cairo v2 - תחביר חוזה חדש

התחביר הנוכחי של החוזה החכם של Starknet יורש בעיקר מהעיצוב הקודם של Cairo 0. עיצוב זה סובל מכמה בעיות שהיינו רוצים להתייחס אליהן. המטרה שלנו במעבר לתחביר חדש היא להגביר את הבטיחות על ידי הפיכת התנהגות החוזה למפורשת יותר. על ידי החדרת מבנה נוסף לפונקציות החיצוניות, האחסון והאירועים של החוזה, נוכל להפחית משמעותית את ההסתברות לבאגים. זה יעזור להגן על פרוטוקולים מפני פריצות פוטנציאליות ואובדן כספים. בנוסף, התחביר החדש מאפשר לנו להציג *extensibility*, תכונה מבוקשת מאוד על ידי הקהילה, המאפשרת למפתחים להשתמש בקלות ברכיבים שנכתבו בספריות חיצוניות.

התחביר החדש דורש שינויי שבירת. אמנם אנו בוחרים להימנע ככל האפשר משבירת שינויים בשלב זה, אך לאחר דיונים פנימיים וקהילתיים הגענו למסקנה כי זוהי הדרך הנכונה שתיתן דיבידנדים בעתיד.

שינויים אלו נדונים בהרחבה בפוסט טכני [נוסף](https://community.starknet.io/t/cairo-1-contract-syntax-is-evolving/94794/20) שפורסם בפורום הקהילה (עיין בו לסקירה מקיפה של השינויים הקרובים). כאן רק נרצה להדגיש ש **רק את "השכבה החיצונית" של החוזה שלך (הגדרה של פונקציות ואירועים חיצוניים) יש לשנות**. קוד Cairo v1 הקיים שלך דורש התאמות קלות בלבד (עיין במסמכים למדריך העברה מהירה [](https://docs.starknet.io/documentation/architecture_and_concepts/Cairo_on_Starknet/contract-syntax/)). היתרון של התחביר החדש, לעומת זאת, הוא משמעותי ביותר: שימוש ברכיבים מספריות חיצוניות (תכונה קריטית בעבודה על פרויקטים גדולים) יהפוך להיות ארצי, ולא ידרוש עוד דרכים לעקיפת הבעיה.

### אחריות תאימות לאחור

חלק מהשינויים הקרובים המתוארים בפוסט (בפרט, תחביר החוזה החדש) פירושם שבירת שינויים בשפה. בעוד שבעקבות Cairo v2, עיקר השינויים הפורצים מאחורינו, ההתחייבות לתאימות לאחור מנקודה זו ואילך היא עדיין מוקדמת. עם זאת, פרויקטים המפתחים חוזים חכמים על גבי Starknet דורשים יציבות וביקורת קפדנית, וזה מהווה שיקול חשוב עבורנו. כדי לטפל בחששות אלה, אנו מספקים את הערבויות הבאות ליציבות:

1. כל כיתה שהוכרזה ב-Starknet תמשיך לעבוד כבעבר, ולא תושפע משינויים בשפה
2. כל חוזה שנפרס ב-Starknet ימשיך לפעול כבעבר, ולא יושפע משינויים בשפה
3. עבור כל שדרוג שפה שובר, חוזים שנכתבו בגרסה הקודמת ימשיכו להיות ניתנים להצהרה ב-Starknet לתקופה של שישה חודשים לפחות.

לדוגמה, אם אתם מפתחים את הפרויקט שלכם (או נמצאים בסמוך לפריסה/במהלך שלב הביקורת) עם גרסה X של קהיר, וקהיר Y משוחררת עם שינויים פורצים, **חוזים שנכתבו עם גרסה X עדיין יתקבלו ב-Starknet למשך לפחות שישה חודשים**. כלומר, יש לך תקופה של שישה חודשים לפחות לפרוס את החוזים שלך ב-Starknet, ואז הם מוגנים לנצח על ידי נקודות 1 & 2.

## מתי עלי להגר?

עם תחביר החוזה החדש ששוחרר (והיה זמין ב-Starknet בגרסה הקרובה של 0.12.0), ועיקר השינויים הפורצים מאחורינו, קהיר היא כעת יציבה ועשירה מספיק כדי לתמוך ביישומים מורכבים, ולהעביר את ההיגיון הקיים של קהיר 0. בנוסף, הבטחות התאימות לאחור ב-Starknet מבטיחות שגם אם יהיו שינויים פורצים בשפה, יהיה לך מספיק זמן (לפחות שישה חודשים) לסיים את הפיתוח או הביקורת והפריסה של החוזים שלך.

## סיכום

קהיר ממשיכה להתפתח והגיעה לנקודה שבה היא עוקפת מאוד את שפת המקור. אם עדיין לא עשית זאת, זה הזמן להיות מעורב. אנו מברכים על קהילת המפתחים להשתתף באופן פעיל בדיונים, בין אם ישירות ב [המהדר ריפו](https://github.com/starkware-libs/cairo) על ידי העלאת בעיות, או פרסום בערוץ [cairo discord](https://discord.gg/qypnmzkhbc) או בפורום הקהילה Starknet [](https://community.starknet.io/latest). יש לקוות שהפוסט הזה (לצד המקבילה היותר טכנית [](https://docs.google.com/document/d/1qemNmIWYuYyVg0f9J_SO6SqGQVDPOBVt10wXH0rrT_U/edit#)שלו) עזר לשפוך קצת אור על השינויים הצפויים ולהסיר הרבה מהספק לגבי עתידה של קהיר.