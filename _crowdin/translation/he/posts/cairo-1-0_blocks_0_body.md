### TL;DR

* Cairo 1.0 היא המהדורה הגדולה הראשונה לאחר הצגת[של Cairo](https://medium.com/starkware/hello-cairo-3cb43b13b209)לפני שנתיים
* Cairo 1.0 יעניק למפתחים שפת תכנות בטוחה יותר, פשוטה יותר ושמישה יותר
* בליבה של קהיר 1.0 תהיה**Sierra**, שכבת ייצוג מתווך המבטיחה יציבות רבה יותר לטווח ארוך עבור תוכניות קהיר
* סיירה מקדמת את קהיר לשרת ברשת ללא הרשאה:\
  -**הגנה על הרשת**: היא מאפשרת הגנה חזקה יותר של DoS\
  -**הגנה על המשתמש**: היא מאפשרת התנגדות לצנזורה בדרגת Ethereum. Cairo 1.0 ישפיע על StarkNet בדרכים רבות. זה גם ישפיע על[Regenesis](https://medium.com/starkware/regenesis-starknets-no-sweat-state-reset-e296b12b80ae). אנו נפרסם מידע נוסף על Regenesis בשבועות הקרובים.

### מבוא

בשנת 2020 שחררנו את קהיר, שפת תכנות מלאה בטיורינג, ועשינו צעד גדול לקראת תמיכה בחישוב שניתן לאימות באמצעות STARKs. היום, אנו מכריזים על**Cairo 1.0**, ההתקדמות הגדולה ביותר של קהיר עד כה. הוא יציג שפה משופרת, עם תכונות שישפרו את השימושיות, הבטיחות והנוחות. הוא נועד לתמוך בדרישות של StarkNet כרשת ללא הרשאות, מה שמאפשר לפרוטוקול להפוך לפשוט ובטוח יותר.\
הפיתוח כבר ממשיך, ואנו מצפים שהמהדורה הראשונה תתרחש בקרוב.

בפוסט זה נתאר את המסע של קהיר עד כה ונשתף פרטים על הפיצ'רים הקרובים.

### המסע לקהיר

עד 2020, היה צורך בידע נישה כדי לבנות תוכניות הניתנות להוכחה STARK לחישוב כללי. זה היה אפשרי רק למי שהבין את המתמטיקה המורכבת מאחורי STARKs. באופן ספציפי, עבור כל היגיון עסקי, כלומר כל חישוב, אחד צריך כדי ליצור ייצוג ביניים אלגברי (AIR) - קבוצה של אילוצים פולינומיים המייצגים את החישוב הספציפי.

קהיר נולדה מתוך ההבנה שחישוב בר אימות צריך להיות זמין למפתחים בכל מקום. קהיר מאפשרת למפתחים לרתום את הכוח של STARKs.

קהילת המפתחים תפסה מאז את קהיר כדי לבנות בהתלהבות. הכל במערכת האקולוגית המשגשגת של StarkNet כיום מבוסס על קהיר. בין[StarkNet](https://starkware.co/starknet/)ל[StarkEx](https://starkware.co/starkex/), יישומים המופעלים בקהיר עיבדו למעלה מ-220 מיליון עסקאות, טבעו יותר מ-65 מיליון NFTs, וטיפלו בעסקאות בשווי 700 מיליארד דולר, והכל נסגר ב-Ethereum.

בעוד קהיר הנגישה את STARKs, היא תוכננה במקור כשפת אסמבלינג, וככזו היא נכתבה כשפה ברמה נמוכה.

![דוגמה לתוכניות המוקדמות שנכתבו בקהיר](/assets/cairocode_01.png "דוגמה לתוכניות המוקדמות שנכתבו בקהיר")

בעקבות משוב ממפתחים ועלייתו של[StarkNet](https://starkware.co/starknet/), הפכנו בהדרגה את קהיר ליותר אקספרסיבי וידידותי יותר למפתחים.

![דוגמה מחוזה ERC-20 Cairo המדגימה תמיכה במשתנים, הצהרות if, שגיאות וספריית UINT256](/assets/cairocode_02.png "דוגמה מחוזה ERC-20 Cairo המדגימה תמיכה במשתנים, הצהרות if, שגיאות וספריית UINT256")

אבל עד מהרה הגענו למסקנה שהגיע הזמן לעשות קפיצת מדרגה גדולה, ובמקום שיפורים מצטברים לקהיר, ללכת על מהפך נועז יותר.

### קהיר 1.0

עבור Cairo 1.0 בנינו מהדר חדש לגמרי מהיסוד, שיספק למפתחים תכונות בטיחות, ויאפשר להם לכתוב חוזים בצורה פשוטה ואקספרסיבית יותר.

#### היכרות עם סיירה: להבטיח שכל ריצה בקהיר ניתנת להוכחה

התוספת העיקרית בקהיר 1.0 היא סיירה (**S**afe**I**nt**e**rmediate**R**ep**r**esent**a**tion). סיירה מהווה שכבת ייצוג ביניים חדשה בין Cairo 1.0 לקוד בתים של קהיר. המטרה של סיירה היא להבטיח שכל ריצה של קהיר - כלומר תוכנית קהיר והקלט שלה - ניתנת להוכחה (ראה עוד בהמשך).

סיירה מבטיחה למפתחי קהיר קוד טוב יותר חסין עתיד. יציבות נוספת ניתנת על ידי העובדה שחוזי StarkNet לא יצטרכו הידור מחדש במקרה של שיפורים במערכת הבסיסית (למשל, שינויים בארכיטקטורת CPU AIR, שיפורים בתרגום הסופי מסיירה לקהיר קוד בתים).

**מוכיח כל ריצה של קהיר.**בקהיר הישנה, ריצה בקהיר יכולה לגרום לשלושה מקרים - TRUE, FALSE או כישלון. לא ניתן להוכיח ריצות כושלות. סיירה, מבטיחה שריצה בקהיר לעולם לא תיכשל, ויכולה לגרום רק ל-TRUE או FALSE. זה בתורו מבטיח שניתן להוכיח כל ריצה בקהיר.

להקדמה הזו של סיירה יש השלכות חשובות על StarkNet כרשת ללא רשות. סיירה מבטיחה שאפילו עסקאות שהוחזרו יכללו בבלוקים של StarkNet. מאפיין זה יאפשר לפרוטוקול StarkNet להישאר רזה ופשוט ללא צורך בהוספת מנגנונים קריפטו-כלכליים מורכבים.\
שתי דוגמאות משמעותיות:

1. Sequencers יוכלו לגבות עמלות על עסקאות שהוחזרו, מה שיאפשר ל-StarkNet למנוע Sequencer DoS בצורה מבוססת.
2. יישום עסקאות L1 כפויות יתאפשר, מה שיאפשר ל-StarkNet לרשת את ההתנגדות המלאה לצנזורה של Ethereum.

### **תכונות שפה**

Cairo 1.0 תציע שיפורים רבים לשפת התכנות עצמה. לא כל מה שרשום למטה יהיה חלק מהמהדורה הראשונה, אבל זה חלק ממפת הדרכים.

#### **תחביר משופר**

* לא עוד*מקומי*ו*tempvar*. כעת אנו צריכים רק*תן*כדי לשלוט בכל המשתנים.
* תחביר הצהרות*אם*משופר

```python
#Old
if cond != 0 {
  tempvar x = x+1;
} else {
  tempvar x = x;
}
__________________________________
#New
if cond { x = x + 1; }
```

#### **סוג ערבויות בטיחות**

המהדר ישתמש בהקלדה חזקה כדי לשפר את אבטחת הקוד. לדוגמה:

* מצביעים תמיד יצביעו על זיכרון אתחול.
* מילונים תמיד יימחקו, בניגוד להשאיר את האחריות לקרוא squash_dict למתכנת.

#### **קל יותר להשתמש במבני שפה**

לדוגמה:

* עבור לולאות

```
let sum = 0
עבור x באיטר {
  sum = sum + x;
}
```

* ביטויים בוליאניים
* מספרים שלמים (עם חלוקה שלמים רגילה 👯)
* הגנה מפני הצפות לסוגים הרלוונטיים
* תנאים בוליאניים

```
#Old
If cond1:
  if cond2:
       # Some code
  else if cond3:
       # אותו קוד
__________________________________
#New
If cond1 && (cond2 || cond3) { … }
```

#### **מערכת מהסוג המלא**

* סוגי נתונים מופשטים (כלומר Enum דמוי חלודה)

```
enum אפשרות<T> {
 חלק: T,
 אין,
} תוצאת התאמה
{
 חלק(ר) => {..},
 אין => {..},
}
```

* תכונות

```
תכונה הוסף<Uint256> {
    fn add(…) { … }
}

let a: Uint256 = 1;
let b: Uint256 = 4;
a + b; // הוערך ל-5 מסוג Uint256.
```

#### **ספריות אינטואיטיביות יותר**

(למשל dict, מערכים)

* דיקט<Uint256, MyStruct>;
* מַעֲרָך<MyOtherStruct>;

#### **קוד מותאם יותר**

אין צורך לציין במפורש הקצאה של משתנים מקומיים - זוהה אוטומטית ונעשתה אוטומטית.

#### **שילוב מהדר טוב יותר**

מאפשר תמיכת IDE טובה יותר, ניהול חבילות והקלה טובה יותר על תרומות לקהילה.

### **סיכום**

שנתיים לאחר השימוש הראשון של קהיר בייצור, אנו מפתחים את Cairo 1.0, אשר יספק יכולת ביטוי, אבטחה ותחביר משופרים. זה ייקח צעד גדול קדימה, ויאפשר למפתחים לכתוב בקלות רבה יותר את חוזי StarkNet שלהם.

בפוסט אחר, שיגיע בקרוב, נשתף פרטים נוספים על האופן שבו Cairo 1.0 ישפיע על התחדשות של StarkNet, וכיצד מפתחים צריכים להתכונן לשחרורו.