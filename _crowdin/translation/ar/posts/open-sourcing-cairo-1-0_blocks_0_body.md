### TL;DR

* **القاهرة 1.0 مفتوحة المصدر! هذه هي الخطوة الأولى فقط نحو تكديس StarkNet للمصادر المفتوحة.**
* نحن الآن نقدم[نظرة أولى](https://github.com/starkware-libs/cairo)إلى مترجم القاهرة 1.0. يمكنك الآن البدء بالتجربة مع كود القاهرة الأساسي 1.0
* القاهرة 1.0 في جوهرها تشبه كثيرا الروت
* اعتبرها ذوقا أولا، وليس اصدار. وهناك المزيد من التحسينات في الطريق. ومن المقرر إصدار النسخة الأولى من المجمّع في أوائل العام المقبل من أجل الرد على السؤال 1.
* القاهرة 1.0 غير مدعومة على StarkNet، حتى الآن. وسيتم دعمه على StarkNet، في العام القادم، في Q1.

### مقدمة

في عام 2020، أصدرنا[القاهرة](https://eprint.iacr.org/2021/1063.pdf)لغة برمجة كاملة تدعم الحوسبة القابلة للتحقق. بدأت القاهرة كلغة تجمع وأصبحت تدريجيا أكثر تعبيرا. قبل شهرين، أعلنا[القاهرة 1.0](https://medium.com/starkware/cairo-1-0-aa96eefb19a0)، التي تعالج بعض القضايا الرئيسية في الوضع الحالي:

* في حين شهدت صياغة القاهرة تحسناً كبيراً منذ إنشائها، فإن تجربة المطور يمكن أن تتحسن دائماً. والقاهرة 1.0 هي لغة مكتوبة بالكامل مستوحاة من السخرية مما يجعل كتابة نفس المنطق أسهل بكثير وأقل عرضة للأخطاء.
* يتم تطوير المترجم الحالي في نفس المستودع مثل StarkNet نفسه، مما يزيد من صعوبة تتبع التغييرات اللغوية. ويكتب مترجم القاهرة 1.0 من القاعدة إلى أعلى، مما يسمح بتطوير معالم أسرع وبمزيد من المشاركة المجتمعية.
* كل حساب الآن قابل للإثبات. حاليا، قد يفشل برنامج القاهرة بمدخلات محددة (على سبيل المثال بالوصول إلى تعليمات \`تأكيد 1=2\` في بعض فروع الحساب)، مما يجعل الحساب غير قابل للإثبات. وفي القاهرة 1.0، تكون البرامج قابلة للتحقق في كل فرع ممكن. ويتسم هذا الأمر بأهمية خاصة لحماية إدارة خدمات الرقابة ومقاومة الرقابة في StarkNet.

إننا اليوم نحتفل بالمرحلة الأولى في بلوغ الأهداف المذكورة أعلاه ونحن ننقل التنمية إلى مستودع عام، و**القاهرة مفتوحة المصدر 1. !**يمكن للمطورين الآن، وللمرة الأولى، تجميع وتنفيذ برامج القاهرة البسيطة 1.0. وهذا يسمح للمطورين ببدء التجربة مع القاهرة 1. و تعودوا تدريجيا على الميزات الجديدة، حتى لو لم يتمكنوا في هذه المرحلة من تنفيذها على StarkNet حتى الآن.

### القدرات الحالية

حالياً، يمكنك تجميع وتنفيذ برامج القاهرة المحلية الأساسية. وفي حين أن العديد من التحسينات في الصياغة/اللغة لا تزال جارية، فإن ذلك يسمح باستخدام القاهرة 1.0 والاستمتاع بالترقية في الوقت الحاضر.

**لاحظ أن كتابة عقود StarkNet لا تزال غير مدعومة.**ستتم إضافة بناء الجملة StarkNet (متغيرات التخزين / العقود المكالمة / الأحداث وغيرها من مكالمات النظامية) في الأسابيع القادمة.

### أمثلة على الكود

لتوضيح الفروق بين الجملة القديمة والقاهرة 1. ، اخترنا أن نعرض بعض التطبيقات/النكهات المختلفة للعثور على رقم فايبوناتشي.

### المثال الأول: عبارات المطابقة

في القاهرة 1.0، يمكنك استخدام عبارات مثل[المطابقة](https://doc.rust-lang.org/rust-by-example/flow_control/match.html?highlight=match#match). لن تخشى بعد الآن إذا كان /غير ذلك من العبارات التي قد تسبب إلغاء مرجعي!

![](/assets/code01.png)

### المثال الثاني: أنواع البيانات

بينما كانت القاهرة 0 تعمل مع الشعارات والمؤشرات، في القاهرة 1.0 لدينا إمكانية الوصول إلى أنواع البيانات المعقدة باللغة الأصلية. يمكنك في الأسفل العثور على مثال يولد مجموعة من أرقام n Fibonacci الأولى.

![](/assets/code02.png)

كما ترون أعلاه، بدلا من العمل مباشرة مع مؤشرات الذاكرة، نستخدم `المصفوفة::<felt>\` نوع \`array_append\`functiontion.

### المثال الثالث: الهياكل & الملكية

الكود التالي يوضح استخدام الهياكل في القاهرة 1.0.

![](/assets/code03.png)

> أما الفقرة التالية فهي موجهة إلى الجمهور من أجل الروستيتانز. والقاهرة 1.0 تدير الذاكرة بطريقة مشابهة للسخر. ويستخدم بشكل خاص مفهومي[الملكية والاقتراض](https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html). لذلك، من خلال الوصول إلى عضو في هيكل \`FibResult\` (في هذه الحالة، \`result. قيمة\`)، لقد تحركنا \`result\`، مما يعني أنه ما لم يكن FibResult قابلاً للنسخ، لا يمكننا الوصول إليها مرة أخرى في \`result.index\`. للتغلب على هذا، نضيف خاصية \`#\[derive(Copy)]\` من نوع \`FibResult\`. في الإصدارات المستقبلية، سنضيف تفكيك تلقائي للبنايات. وسيسمح ذلك بنقل ملكية أحد الأعضاء دون المساس بالأعضاء الآخرين (لا سيما الأعضاء الآخرين). سيتم تجميع التعليمات البرمجية المذكورة أعلاه حتى لو لم يكن لديك سمة النسخة).

**ويلاحظ على وجه الخصوص أن القاهرة 1.0 تجرد تماما نموذج الذاكرة الأصلية (لا مقنعة للقراءة فقط) للقاهرة.**

## المثال الرابع: نشر خطأ

الكود التالي يحسب رقم nth Fibonacci ، ولكن خلافا للأمثلة السابقة ، جميع المدخلات هي من نوع uint128. لاحظ أن هذا يحل نقطة ألم رئيسية في التعامل مع النباتات في القاهرة 0. وهنا، فإن الـ uint128 (وفي المستقبل uint256) هي أنواع أصلية.

![](/assets/0_s8bhjf_ade3carmi.png)

إضافة رقمين صحيحين 128 بتر يمكن أن يسبب انحطاطاً مفرطاً. الكود أعلاه يستخدم[قائمة الخيارات](https://doc.rust-lang.org/rust-by-example/std/option.html)و[مشغل علامة الاستفسار](https://doc.rust-lang.org/rust-by-example/std/result/question_mark.html)للتعامل مع حالة التداخل في واحدة من الإضافات الوسيطة. قارن هذا بصيغة الإضافة[الحالية](https://github.com/starkware-libs/cairo-lang/blob/9889fbd522edc5eff603356e1912e20642ae20af/src/starkware/cairo/common/uint256.cairo#L31)uint256، حيث يجب استدعاء دالة \`unit256_check\` لضمان السلامة. وبالإضافة إلى ذلك، في المستقبل القريب، سوف نضيف مفهوم \`anic\` للغة (شبيه بـ[الذعر](https://doc.rust-lang.org/rust-by-example/std/panic.html)ماكرو في rust)، والأخطاء البسيطة مثل الإضافة الزائدة ستكون غير قابلة للنشر تلقائياً، مما يعني أنك لن تحتاج إلى استخدام \`Option\` أو \`؟ ` عند إضافة الموجات

## جرب بنفسك

يمكنك الآن تجميع وتشغيل برامج القاهرة المدعومة حاليا 1.0! اتبع هذه[التعليمات](https://github.com/starkware-libs/cairo/tree/main/crates/cairo-lang-runner)حول كيفية استخدام الأمر \'cairorun\'. لاحظ أنه تحت القاعة، يتم استخدام[Rust Cairo VM](https://github.com/lambdaclass/cairo-rs)، الذي طوره[Lambdaclass](https://lambdaclass.com/)، من أجل التنفيذ.

يمكنك العثور على المزيد من الأمثلة لمساعدتك على البدء[هنا](https://github.com/starkware-libs/cairo2/tree/main/examples). ونلاحظ أن هذه ليست سوى الخطوة الأولى في عملية تطوير المجمِّع؛ وفي الأسابيع المقبلة، سنقوم بتحسين المبادرة القطرية جنبا إلى جنب مع المجمِّع.

## الخطط المستقبلية

وينصب تركيز النسخة الأولى من المجمع، المقرر إجراؤها في وقت مبكر من السؤال 1، على دعم جميع الوظائف الحالية لـ StarkNet في القاهرة 1.0. بالإضافة إلى ذلك، نحن نعمل على توسيع قدرات مترجم القاهرة 1.0. في الأسابيع القادمة، يمكنك أن تتوقع:

* قدرات StarkNet - كتابة العقود الذكية واستخدام مكالمات النظام.
* الحلقات
* وظائف المكتبة الجديدة
* خادم لغة محسّن
* مفهوم أصلي لغاز StarkNet

تأكد من الاستمرار في ضبط وتتبع تقدم المترجم!