### TL;DR

* **الرسوم الآن إلزامية على Testnet، قريبا على Mainnet**
* نمط مصنع العقود ممكن الآن!
* StarkNet بصدد إدخال فئات تعاقدية
* استعيض عن مكالمة المندوبة بالمكتبة العامة

### مقدمة

نحن سعداء لتقديم StarkNet Alpha 0.9.0! هذه نسخة هامة تتخذ فيها StarkNet خطوات هامة نحو النضج، مع إضافات كبيرة إلى كل من الوظيفة وتصميم البروتوكول.

**الرسوم إلزامية**(حاليا على Testnet فقط، حتى الإصدار 0.9. وسيعيش في ماينيت) - ويجب أن يكون لأي رفاهية من طراز L2 نظامها المستقل الخاص من الرسوم. بعد إدخال الرسوم كميزة اختيارية في الإصدار 0.8. ونحن واثقون الآن من إدراجهم كعنصر أساسي في البروتوكول، وجعلهم إلزاميين. مزيد من التفاصيل أدناه.

وثمة تغيير هام آخر على مستوى البروتوكول يتمثل في الأخذ بفئات العقود وفصل الفئات/النموذج. وهذا يتيح استخدام وظيفة \`delegate_call\` وعمليات النشر من العقود القائمة، مما يمكن من نمط المصنع على StarkNet.

### فئات العقود

وإذ نستلهم البرمجة الموجهة، فإننا نميز بين رمز العقد وتنفيذه. ونحن نفعل ذلك بتقسيم العقود إلى فئات وحالات.

**فئة العقد**هي تعريف العقد: رمز القاهرة الخاص بها، تلميح المعلومات، وأسماء نقاط الدخول، وكل ما هو ضروري لتعريف لغتها بشكل لا لبس فيه. يتم تحديد كل صف دراسي بتجزئة الفصل (مشابهة لاسم الصف الدراسي من لغات OOP).

**نموذج العقد**، أو مجرد عقد، هو عقد منشور يقابل بعض الفئة. ويلاحظ أن العقود لا تتصرف إلا كعقود، أي أن لها تخزينها الخاص ويمكن استنساخها عن طريق المعاملات/العقود الأخرى. ولا يكون للفئة التعاقدية بالضرورة مثال منشور في StarkNet. ويأتي إدخال الصفوف مع عدة تغييرات في البروتوكول.

#### "إعلان" معاملة

نحن نقدم نوعاً جديداً من المعاملات ل StarkNet: المعاملة["الإعلان"](https://docs.starknet.io/docs/Blocks/transactions#declare-transaction)، التي تسمح بإعلان عقد**صف دراسي.**خلافا للمعاملة \'نشر\'، هذا لا يستخدم مثيل من تلك الفئة. ستتضمن حالة StarkNet قائمة بالفصول المعلنة. يمكن إضافة فئات جديدة عن طريق المعاملة الجديدة \'الإعلان\'.

#### مصانع المكالمات والعقود الخاصة بنظام "النشر".

بمجرد الإعلان عن فئة ما، أي أن المعاملة المقابلة \`الإعلان\` قد تم قبولها، يمكننا نشر أمثلة جديدة من تلك الفئة. وتحقيقا لهذه الغاية، نستخدم مكالمة النظام الجديدة \`نشر \`، التي تأخذ بالحجج التالية:

* تجزئة الصف الدراسي
* ملح
* حجج البناء

ثم سينشر شراب "النشر" مثيل جديد من تلك الفئة التعاقدية، الذي سيتم تحديد عنوان[](https://docs.starknet.io/docs/Contracts/contract-address)من خلال البارامترات الثلاثة أعلاه وعنوان المستخدم (العقد الذي استظهر بمكالمة النظام).

ويسمح لنا إدراج عمليات الانتشار داخل صفقة الاستدعاء بسعر ورسوم عمليات النشر، دون الاضطرار إلى معاملة عمليات النشر والاستدعاء بطريقة مختلفة. لمزيد من المعلومات حول رسوم النشر، انظر[المستندات](https://docs.starknet.io/docs/Fees/fee-mechanism#deployed-contracts).

وتُدخل هذه الخاصية مصانع التعاقد في StarkNet حيث يمكن لأي عقد أن يستظهر بعقود "StarkNet"، مما ينشئ عقوداً جديدة.

#### الانتقال من "مكالمة المندوبة" إلى "المكتبة العامة"

إن إدخال الصفوف الدراسية يسمح لنا بمعالجة مشكلة معروفة تماماً في آلية مكالمة المندوبين في إيثيريوم: عندما يؤدي عقد ما دعوة مندوبة إلى عقد آخر. وهي تحتاج فقط إلى صفتها (رمزها) بدلاً من نموذج فعلي (تخزينها). ولذلك فإن الاضطرار إلى تحديد حالة معينة من حالات العقد عند إجراء مكالمة مندوبة هو ممارسة سيئة (والواقع أنه وقد أدى ذلك إلى بعض الأخطاء في عقود إيثيريوم) - ولا يحتاج إلا إلى تحديد الصف.

تصبح مكالمة النظام القديمة \`delegate_call\` الآن مغفلة (العقود القديمة التي تم نشرها بالفعل ستستمر في العمل، ولكن**العقود التي تستخدم \`delegate_call\` لن تقوم بتجميع**)، ويتم استبدالها بمكالمة جديدة من نظام المكتبة_المكالمة التي تحصل على تجزئة الصف (من صف معلن عنه سابقاً) بدلاً من عنوان مثال العقد. ويلاحظ أن هناك عقداً فعلياً واحداً فقط يدخل في مكالمة مكتبية، وبالتالي فإننا نتجنب الغموض بين عقد الاتصال الهاتفي وعقد التنفيذ.

#### نقاط نهاية API جديدة

أضفنا نقطتين نهائيتين جديدتين إلى API، مما يسمح باستعادة البيانات ذات الصلة بالفصل:

* \`get_class_by_hash\`: يرجع تعريف الصف الدراسي بتجزئة الفصل
* \`get_class_hash_at\`: يرجع تجزئة فئة العقد المنشور بسبب عنوان العقد

ويلاحظ أنه للحصول على فئة العقد المنشور مباشرة، بدلا من المرور بالطريقتين المذكورتين أعلاه، يمكنك استخدام نقطة النهاية القديمة \`get_full_contract\`، التي سيتم إعادة تسميتها في الإصدارات المقبلة. جميع النقاط النهائية المذكورة أعلاه يمكن استخدامها أيضا من[StarkNet CLI](https://docs.starknet.io/docs/CLI/commands).

#### الرسوم

نشرع في دمج الرسوم في StarkNet ، وجعلها إلزامية (أولاً على Testnet، ثم أيضاً على Mainnet) ل ``[invoke](https://docs.starknet.io/docs/Blocks/transactions#invoke-function)\`. الصفقة \`الإعلان\` لن تتطلب رسوماً في هذه المرحلة. بالمثل، لن تتطلب المعاملات \`نشر`` رسوماً أيضاً، ولكن لاحظ أن هذا النوع من المعاملات سوف يتم إهماله على الأرجح في الإصدارات المقبلة.

ولا تزال هناك عدة أسئلة مفتوحة في هذا المجال، وأبرزها مسألة كيفية فرض رسوم على إعلانات العقود ونشر حسابات شركة StarkNet. وسوف نعالج هذه المسائل في صيغ مقبلة.

### ما التالي؟

اتباعا لخارطة الطريق التي أعلنناها[في فبراير](https://medium.com/starkware/starknet-on-to-the-next-challenge-96a39de7717)، نحن ملتزمون بتحسين أداء StarkNet، بشكل عام، وأداء المتسلسل على وجه الخصوص، للحصول على ردود فعل أسرع للمستخدمين حول معاملاتهم. في الإصدار القادم، نخطط لإدخال التوازي في تسلسل التسلسل، تمكين إنتاج كتلة أسرع.

النسخة الرئيسية التالية من StarkNet سوف تركز على بنية حسابات StarkNet، بطريقة مشابهة لـ[ERC-4337](https://medium.com/infinitism/erc-4337-account-abstraction-without-ethereum-protocol-changes-d75c9d94dc4a). وبهذا نكون قد انتهينا من الطريقة التي تتصرف بها حسابات StarkNet واتخذنا خطوة رئيسية أخرى نحو الاعتماد الجماعي!