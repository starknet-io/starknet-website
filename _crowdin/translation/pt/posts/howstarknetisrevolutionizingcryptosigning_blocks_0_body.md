# Como StarkNet está revolucionando a assinatura de cripto
## *Fora com as chaves complexas, com o ID do face. Estudo de caso na Abstração de Conta*
No momento em que as pessoas puderem usar métodos familiares, como o ID facial para assinar transações cripto, veremos um boom na autocustódia. Todo mundo sabe que administrar sua própria carteira é o ideal cripto original, mas é intimidatório e tem pessoas abraçando trocas em vez disso. Este é um estudo de caso de como uma funcionalidade StarkNet chamada Abstração de Conta está sendo usada por Braavos para obter uma maneira muito mais intuitiva de usar sua carteira.
## Introduzindo a Abstração de Conta
Depois do escândalo das FTX, a questão é mais relevante do que nunca. Por que as pessoas ainda optam por dar as suas cripto a instituições centralizadas, ao invés de detê-las? Resposta: para a maioria das pessoas, a autocustódia é complicada. As frases semeadas são o mecanismo de recuperação "pior", dissuadindo muitos (até mesmo alguns dos mais endurecidos). A resposta para este desafio: Abstração de Conta. Abstração de conta permite que carteiras atinjam (e excedam) as expectativas de UX dos usuários Web2, tal como assinar uma transação usando o Face ID ou usando a autenticação de dois fatores. Isso facilita a segmentação de conta e os limites de gasto; e eventualmente permite a recuperação simples da conta e a remoção da semente todas juntas. É uma revolução para a interface do usuário e UX.
## StarkNet
StarkNet, o Rollup de Validade Leve, tem várias características chave que fazem dele a solução mais promissora para a escala Ethereum. Com base em provas STARK, fornece taxas de gás baixas sem comprometer a segurança do Ethereum. O histórico de provas STARK para powering StarkEx inclui $800B no volume cumulativo de trading, 300M transações e 90M NFTs. As capacidades das provas STARK para fornecer taxas baixas, juntamente com o poder da Abstração da Conta, Permitir que Braavos desenvolvam as capacidades inovadoras de carteira que ele procura.
## Contexto
A maioria das blockchains, incluindo Bitcoin e Ethereum, usa os esquemas de assinatura elíptica da secp256k1 em linha (veja[aqui](http://ethanfast.com/top-crypto.html)para uma lista abrangente). Esta implementação de curva elíptica é considerada robusta — muitas blockchains a usam e resistiu ao teste do tempo. Mas não é compatível com o esquema de assinatura criptográfica disponível nos Módulos de Segurança de Hardware de dispositivos móveis (HSM), tais como os iPhones e o Android (Pixel e outros) telefones. Esses dispositivos usam outra curva — secp256r1 (também chamada NIST-P256). Isto significa que os usuários dessas blockchains não podem tirar proveito dos chips de segurança nos seus dispositivos e ter que usar o padrão das carteiras de hardware se quiserem ganhar um forte nível de segurança. Isso restringe severamente qualquer inovação de UX sobre como os usuários podem entrar em uma carteira e aprovar transações (portanto, a ubiquidade de frases sementes). StarkNet não suporta a secp256r1, e tem sua própria curva proprietária que é uma curva amigável ao STARK. Mas ao contrário de outras blockchains, StarkNet tem uma abstração de conta disponível nativamente em sua plataforma, que abre um novo mundo de oportunidades de UX para aplicativos de carteira. Braavos aproveitou esta capacidade para apresentar o Assinante de Hardware.
## O Signer do Hardware
O Sinalizador de Hardware consiste em duas partes principais:
* O subsistema seguro no dispositivo móvel dos usuários * O contrato inteligente da conta que pode executar lógica arbitrária (abstração de Conta a.k.a)
## Subsistema Seguro
O assinante de hardware utiliza o subsistema seguro integrado no dispositivo dos usuários - o**Secure Enclave**do iPhone ou o**Titan**HSM do Android Phone, para proteger a conta. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) O Secure Enclave / Titan chip é um subsistema dedicado e isolado, separados totalmente do processador do aplicativo que gera chaves privadas e assina mensagens. Ele gera as chaves usando uma curva elíptica interna do Gerador de Números Verdadeiros (TRNG) e assina mensagens sobre a curva NIST-P256 (secp256r1) por meio de seu Acelerador de Chave Pública Interna (PKA). As chaves privadas nunca deixam o sistema seguro e são desconhecidas/inacessíveis para ninguém, nem mesmo para o usuário ou para o próprio aplicativo. Isso significa que mesmo que o kernel do processador de aplicativos do dispositivo se torne comprometido, as chaves de usuário permanecem seguras! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Mergulhador mais profundo no seguro enclave
Durante o processo de fabricação de chips um UID (Identificador único) é gerado pela TRNG e é armazenado no PKA. Não pode ser lido e nunca sai do PKA, Portanto, é desconhecido até mesmo para o processador Secure Enclave e para o Sistema Operacional do Processador Secure Enclave (SepOS). Este UID é um número aleatório que é único por dispositivo e é usado para criptografar todas as outras chaves que serão geradas no futuro neste dispositivo. O modo como funciona é o seguinte: a aplicação irá solicitar ao SepOS que gere um novo par de chaves, o SepOS instruirá o Secure Enclave TRNG para gerar uma chave e criptografá-la (usando a UID). O aplicativo pode solicitar do SepOS para descriptografar a chave e assinar uma mensagem usando a chave gerada. Durante todo este processo, a chave gerada não deixa o enclave e é desconhecida para ninguém. (Para mais informações sobre o Secure Enclave, veja[aqui](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)). A forma como o Secure Enclave é construído e opera, juntamente com o fato de que é alvo de ataques de empresas poderosas e governos de todo o mundo, é por isso que a sua segurança supera as carteiras de hardware padrão.
## Abstração de conta
O poder de Braavos como uma carteira baseada em contrato inteligente no topo da StarkNet, é que é composta por dois pilares:
* O lado do cliente (por exemplo, o aplicativo) que permite ao usuário revisar/assinar transações e enviá-las para a cadeia. * O lado da cadeia — tem um contrato inteligente de conta que pode executar uma lógica arbitrária; e em particular em nosso caso, execute a lógica**verificação**de assinaturas arbitrária. O aplicativo assina a transação usando o módulo de segurança do dispositivo móvel e, em seguida, envia-a para o contrato da conta on-chain que pode verificá-lo. Como mencionado acima, o módulo de segurança em iPhones e telefones Android usa uma criptografia chamada NIST-P256 (secp256r1), que não é compatível com qualquer esquema criptográfico blockchain principal, incluindo StarkNet. É por isso que ter uma conta de contrato inteligente na cadeia que todas as transações passam e podem executar a lógica arbitrária, é crucial para utilizar estes HSMs em iPhones e telefones Android. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## Biometria
Como o usuário aprova uma transação através da carteira Braavos? Pode um aplicativo malicioso simplesmente assinar automaticamente uma transação sem o consentimento do usuário? Não!! O que é legal sobre o módulo de segurança embutido em dispositivos móveis, como o Secure Enclave, é que suporta a autenticação biométrica intrinsecamente da identidade do usuário. Isso significa que mesmo a aprovação real para assinar uma transação é feita diretamente contra o Secure Enclave. A aprovação não passa pelo aplicativo, e o usuário precisará aprovar a transação com sua impressão digital ou identificar facialmente.
## Recuperação
Se ninguém sabe a chave privada, o que acontece se o dispositivo se perder ou ficar brickado? Como o usuário pode recuperar o controle da conta? Em Braavos, uma conta terá na verdade 2 chaves públicas — a chave de assinatura de hardware, que será usada para assinar todas as transações, e a chave derivada da semente que só pode assinar uma transação — um “Pedido para remover o assinante de hardware”. Este pedido não será executado imediatamente, mas terá um atraso de 4 dias (configurável) para permitir que o usuário use o Assinante de Hardware para cancelar tal solicitação. Isso significa que se o dispositivo for roubado/perdido/bricked, os usuários ainda poderão recuperar sua conta dentro de 4 dias. No entanto, se sua frase de semente for roubada e um invasor emitir um pedido para remover o assinante de hardware, o usuário automaticamente (e repetidamente) receberá uma notificação em seu dispositivo móvel e poderá cancelar o pedido e manter todos os ativos seguros.
## Summary
O recurso de Sinalizador de Hardware oferece tanto o nível de segurança mais avançado para usuários de criptomoedas quanto a experiência que usuários usam a partir da Web2. Neste sentido, assinar uma transação é tão fácil e se preocupa gratuitamente quanto pagar com a Apple/Google pagar. Este é apenas uma delas, mas ainda mais importante, exemplo do poder da carteira baseada em contrato inteligente (a. Abstração de Conta .a) e o novo espaço de design que ela ativa. Nós prevemos o desenvolvimento de mais e mais capacidades nascentes, que conduzirão a indústria cripto a um futuro melhor e mais inclusivo, fornecer aos usuários novos e existentes segurança sem compromissos, juntamente com UX sem compromisso.