### TL;DR

* **Τα τέλη είναι πλέον υποχρεωτικά στο Testnet, σύντομα στο Mainnet**
* Συμβόλαιο μοτίβο εργοστάσιο είναι τώρα δυνατό!
* Το StarkNet εισάγει μαθήματα συμβάσεων
* Η κλήση αντιπροσωπείας αντικαθίσταται από κλήση βιβλιοθήκης

### Εισαγωγή

Είμαστε στην ευχάριστη θέση να εισαγάγει το StarkNet Alpha 0.9.0! Αυτή είναι μια σημαντική έκδοση στην οποία το StarkNet κάνει σημαντικά βήματα προς την κατεύθυνση της ωριμότητας, με ουσιαστικές προσθήκες τόσο στη λειτουργικότητα όσο και στο σχεδιασμό πρωτοκόλλου.

**Τα τέλη είναι υποχρεωτικά**(προς το παρόν μόνο στο Testnet, μέχρι την έκδοση 0.9. θα είναι ζωντανά στο Mainnet) — κάθε ευημερούσα L2 πρέπει να έχει δικό του ανεξάρτητο σύστημα τελών. Μετά την εισαγωγή των τελών ως προαιρετικό χαρακτηριστικό στην έκδοση 0.8. , αισθανόμαστε τώρα αυτοπεποίθηση να τα συμπεριλάβουμε ως βασικό στοιχείο του πρωτοκόλλου και να τα καταστήσουμε υποχρεωτικά. Περισσότερες λεπτομέρειες παρακάτω.

Μια άλλη σημαντική αλλαγή στο επίπεδο του πρωτοκόλλου είναι η εισαγωγή των Τάξεων Συμβολαίου και ο διαχωρισμός τάξης/περίπτωσης. Αυτό επιτρέπει μια πιο απλή χρήση της λειτουργικότητας \`delegate_call\` και των αναπτύξεων από υπάρχουσες συμβάσεις, ενεργοποιώντας το μοτίβο εργοστασίου στο StarkNet.

### Κατηγορίες Συμβολαίου

Λαμβάνοντας έμπνευση από τον αντικειμενικό προγραμματισμό, διακρίνουμε μεταξύ του συμβατικού κώδικα και της υλοποίησής του. Αυτό το κάνουμε διαχωρίζοντας τις συμβάσεις σε τάξεις και περιπτώσεις.

Μια**συμβατική κλάση**είναι ο ορισμός της σύμβασης: τον bytecode του Καΐρου, υποδείξτε πληροφορίες, ονόματα σημείων εισόδου, και όλα όσα είναι απαραίτητα για τον σαφή ορισμό της σημασιολογίας της. Κάθε τάξη προσδιορίζεται από το κατακερματισμό της τάξης (ανάλογα με ένα όνομα κλάσης από τις γλώσσες OOP).

Ένα**παράδειγμα σύμβασης**, ή απλά μια σύμβαση, είναι μια αναπτυγμένη σύμβαση που αντιστοιχεί σε κάποια κλάση. Σημειώστε ότι μόνο συμβόλαια συμπεριφέρονται ως συμβόλαια, δηλαδή έχουν δική τους αποθήκευση και μπορούν να κληθούν από συναλλαγές/άλλες συμβάσεις. Μια κατηγορία σύμβασης δεν έχει απαραίτητα ένα ανεπτυγμένο παράδειγμα στο StarkNet. Η εισαγωγή των κλάσεων έρχεται με αρκετές αλλαγές πρωτοκόλλου.

#### «Δηλωθείτε» Συναλλαγή

Εισάγουμε ένα νέο είδος συναλλαγής στην StarkNet: τη συναλλαγή[«δήλωση»](https://docs.starknet.io/docs/Blocks/transactions#declare-transaction), η οποία επιτρέπει την δήλωση μιας κλάσης σύμβασης**.**Σε αντίθεση με τη συναλλαγή \`deploy\`, αυτό δεν αναπτύσσει μια παρουσία αυτής της κλάσης. Η κατάσταση του StarkNet θα περιλαμβάνει κατάλογο δηλωμένων τάξεων. Οι νέες τάξεις μπορούν να προστεθούν μέσω της νέας συναλλαγής \`declare\`.

#### Το «Deploy» Σύστημα Τηλεφωνικών και Συμβολαίων Factories.

Μόλις δηλωθεί μια κλάση, δηλαδή έγινε δεκτή η αντίστοιχη συναλλαγή \`declare\`, μπορούμε να αναπτύξουμε νέες περιπτώσεις αυτής της κλάσης. Για το σκοπό αυτό, χρησιμοποιούμε τη νέα κλήση συστήματος \`deploy\`, η οποία λαμβάνει τα ακόλουθα επιχειρήματα:

* Το κατακερματισμό της τάξης
* Αλάτι
* Όρθια κατασκευαστή

Η κλήση syscall «αναπτύσσεται» θα αναπτύξει ένα νέο παράδειγμα της εν λόγω κλάσης σύμβασης, του οποίου η[διεύθυνση](https://docs.starknet.io/docs/Contracts/contract-address)θα καθοριστεί από τις τρεις παραπάνω παραμέτρους και τη διεύθυνση του αποστολέα (η σύμβαση που επικαλέστηκε την κλήση του συστήματος).

Συμπεριλαμβανομένων των αναπτύξεων στο εσωτερικό μιας συναλλαγής επίκλησης, μας επιτρέπει να τιμολογούμε και να χρεώνουμε τέλη για αναπτύξεις, χωρίς να χρειάζεται να μεταχειριζόμαστε τις αποστολές και τις προσκλήσεις διαφορετικά. Για περισσότερες πληροφορίες σχετικά με τα τέλη ανάπτυξης, ανατρέξτε[στα έγγραφα](https://docs.starknet.io/docs/Fees/fee-mechanism#deployed-contracts).

Αυτό το χαρακτηριστικό εισάγει εργοστάσια συμβολαίων στο StarkNet, καθώς κάθε σύμβαση μπορεί να επικαλεστεί το \`deploy\` syscall, δημιουργώντας νέες συμβάσεις.

#### Μετακίνηση από την «Αντιπροσωπεία Κλήσης» στην «Βιβλιοθήκη»

Η εισαγωγή των κλάσεων μας επιτρέπει να αντιμετωπίσουμε ένα πολύ γνωστό πρόβλημα στο μηχανισμό κλήσης του Ethereum: Όταν μια σύμβαση εκτελεί μια ανάδοχη κλήση σε άλλη σύμβαση, χρειάζεται μόνο την κλάση (τον κωδικό της) και όχι μια πραγματική παρουσία (την αποθήκευσή της). Ως εκ τούτου, είναι εσφαλμένη πρακτική να πρέπει να διευκρινίζεται μια συγκεκριμένη περίπτωση σύμβασης κατά τη διεξαγωγή μιας ανάθεσης (μάλιστα, έχει οδηγήσει σε μερικά σφάλματα στις συμβάσεις του Ethereum) - μόνο η κατηγορία πρέπει να προσδιοριστεί.

Η παλιά κλήση συστήματος \`delegate_call\` γίνεται πλέον παρωχημένη (τα παλιά συμβόλαια που έχουν ήδη αναπτυχθεί θα συνεχίσουν να λειτουργούν, αλλά**συμβάσεις που χρησιμοποιούν \`delegate_call\` δεν θα μεταγλωττίζουν πλέον**), και αντικαθίσταται από μια νέα κλήση του συστήματος βιβλιοθήκης_κλήσης, η οποία παίρνει το κατακερματισμό κλάσης (μιας προηγουμένως δηλωμένης κλάσης) αντί μιας διεύθυνσης υποδείγματος σύμβασης. Σημειώστε ότι μόνο ένα πραγματικό συμβόλαιο εμπλέκεται σε μια κλήση βιβλιοθήκης, έτσι αποφεύγουμε την ασάφεια μεταξύ της σύμβασης κλήσης και της σύμβασης εκτέλεσης.

#### Νέα endpoints API

Προσθέσαμε δύο νέα τελικά σημεία στο API, επιτρέποντας την ανάκτηση δεδομένων που σχετίζονται με την τάξη:

* \`get_class_by_hash\`: επιστρέφει τον ορισμό κλάσης λόγω του κατακερματισμού κλάσης
* \`get_class_hash_at\`: επιστρέφει το κατακερματισμό κλάσης ενός αναπτυγμένου συμβολαίου, δεδομένης της διεύθυνσης συμβολαίου

Σημειώστε ότι για να αποκτήσετε την κλάση μιας εκτελούμενης σύμβασης άμεσα, αντί να περνάτε από τις δύο παραπάνω μεθόδους, μπορείτε να χρησιμοποιήσετε το παλιό τελικό σημείο \`get_full_contract\`, το οποίο θα μετονομαστεί σε μελλοντικές εκδόσεις. Όλα τα τελικά σημεία που αναφέρθηκαν παραπάνω μπορούν επίσης να χρησιμοποιηθούν από την[StarkNet CLI](https://docs.starknet.io/docs/CLI/commands).

#### Τέλη

Προχωρούμε στην ενσωμάτωση τελών στο StarkNet, καθιστώντας τα υποχρεωτικά (πρώτα στο Testnet, και αργότερα στο Mainnet) για ``[invoke](https://docs.starknet.io/docs/Blocks/transactions#invoke-function)\` συναλλαγές. Η συναλλαγή \`declare\` δεν θα απαιτεί τέλη σε αυτό το σημείο. Ομοίως, οι συναλλαγές \`deploy`` δεν απαιτούν επίσης χρέωση, ωστόσο, σημειώστε ότι αυτός ο τύπος συναλλαγής πιθανότατα θα καταργηθεί σε μελλοντικές εκδόσεις.

Αρκετά ανοικτά ερωτήματα παραμένουν σε αυτόν τον τομέα, τα πλέον εξέχοντα ζητήματα είναι ο τρόπος χρέωσης των τελών για τις δηλώσεις συμβάσεων και την ανάπτυξη λογαριασμών StarkNet. Θα αντιμετωπίσουμε αυτά τα ζητήματα σε μελλοντικές εκδόσεις.

### Τι Επόμενη?

Ακολουθώντας τον οδικό μας χάρτη που[ανακοινώσαμε τον Φεβρουάριο](https://medium.com/starkware/starknet-on-to-the-next-challenge-96a39de7717)δεσμευόμαστε για τη βελτίωση της απόδοσης του StarkNet γενικά, και την απόδοση του sequencer, ειδικότερα, για να πάρει τους χρήστες πιο γρήγορα ανατροφοδότηση σχετικά με τις συναλλαγές τους. Στην επόμενη έκδοση, σκοπεύουμε να εισαγάγουμε την παραλληλισμό στο sequencer, επιτρέποντας την ταχύτερη παραγωγή μπλοκ.

Η επόμενη σημαντική έκδοση της StarkNet θα επικεντρωθεί στη δομή των λογαριασμών της StarkNet κατά τρόπο παρόμοιο με το[ERC-4337](https://medium.com/infinitism/erc-4337-account-abstraction-without-ethereum-protocol-changes-d75c9d94dc4a). Με αυτό, θα έχουμε οριστικοποιήσει τον τρόπο που συμπεριφέρονται οι λογαριασμοί StarkNet, κάνοντας ένα ακόμη σημαντικό βήμα προς τη μαζική υιοθεσία!