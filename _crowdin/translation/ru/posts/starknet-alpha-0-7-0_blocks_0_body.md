### TL;DR

* StarkNet Alpha 0.7.0 выпущен в Goerli; упакован с улучшениями
* Контракты теперь можно обновить, используя шаблон обновления прокси
* Контракты теперь могут исправлять события
* Поддержка системных звонков с долгожданным номером блока и отметкой времени блокировки

### Введение

Мы рады выпустить версию Alpha 0.7.0, с новыми возможностями и улучшениями. Одним из лучших стимуляторов StarkNet в последние несколько месяцев стало расширение участия сообщества в формировании будущего StarkNet. В этой версии учтены некоторые потребности сообщества в прожиге.

#### Изменения в Конвенции о наименовании

Обсерватория читателя могла бы заметить, что предыдущий релиз StarkNet Alpha был назван Alpha 4, в то время как мы теперь выпускаем Alpha 0.7.0. Мы решили пропустить выделенный Alpha номер версии и полагаться только на соответствующую версию Cairo-lang.

### Новые возможности

#### Улучшение контракта

OpenZeppelin[Proxy Upgrade Pattern](https://docs.openzeppelin.com/upgrades-plugins/1.x/proxies)теперь полностью поддерживает обновление по контракту в StarkNet. Шаблон прокси-сервера является общим методом, позволяющим обновлять контракт по Ethereum. Альфа 0.7.0 включает этот шаблон в StarkNet.

Мы сделали краткое[учебное пособие](https://starknet.io/docs/hello_starknet/default_entrypoint.html), чтобы продемонстрировать базовую реализацию шаблона, и OpenZeppelin уже упорно работает над выполнением стандартного контракта на шаблон прокси; см.[прототип](https://github.com/OpenZeppelin/cairo-contracts/pull/129).

#### Номер блока и метка времени блокировки

Alpha 0.7.0 добавляет два новых системных вызова, для которых многие разработчики попросили. Эти звонки позволяют контракту получить доступ к номеру блока и метке времени блокировки. Номер блока возвращает число текущего исполняемого блока. Блочная метка времени возвращает метку времени, указанную последовательностью при создании блока.

Вы можете увидеть пример использования этих функций в[tutorial](https://starknet.io/docs/hello_starknet/more_features.html#block-number-and-timestamp).

#### События

Сюрприз! Функция, которая была запланирована на будущую версию, перекрашена в этот более ранний вариант.

StarkNet контракты теперь поддерживают определение и эмулирование событий, позволяя им раскрывать информацию о выполнении для не отвечающих требованиям приложений. Ethereum разработчики найдут семантику и синтаксис очень похож на Solidity. Вы можете прочитать[документацию](https://starknet.io/documentation/events/), или прочитать[учебник](https://starknet.io/docs/hello_starknet/events.html), который объясняет эту возможность.

#### Директива %bудалена

Директива uiltin %bбольше не требуется в контрактах StarkNet. Это изменение последовало за обсуждением сообщества о[шаблоне расширений контракта](https://community.starknet.io/t/contract-extensibility-pattern/210)на[StarkNet Shamans](https://community.starknet.io/). Это значительно упрощает возможность использования этого шаблона расширений.

Например, следующий контракт будет изменен с:

```
%lang starknet

# Директива "%builtins".
# Это больше не требуется.
%builtins range_check

@view
func add(x : felt, y : felt) -> (res : felt):
return (res=x + y)
end
```

К этому:

```
%lang starknet
@view
func add(x : felt, y : felt) -> (res : felt):
return (res=x + y)
end
```

Вы можете проверить стандартные контракты[ERC-20](https://github.com/OpenZeppelin/cairo-contracts/tree/main/contracts/token), которые используют новый шаблон.

#### Массивы структур поддержки внешних функций

Alpha 0.7.0 поддерживает передачу и возвращение массивов структур во внешние функции. Эта дополнительная функциональность позволяет клиентским договорам лучше поддерживать[многообразных](https://github.com/OpenZeppelin/cairo-contracts/pull/73#discussion_r753535751).

Multicall - это мощная функция абстракции аккаунта, позволяющая аккаунту совершать несколько звонков в рамках одной транзакции. Очевидным примером использования является создание**одной транзакции**, которая вызовет разрешение, а затем transferFrom.

Мы с нетерпением ожидаем того, что сообщество делает с ней.

#### Улучшения в StarkNet CLI

**Поддержка ожидающих блоков**

[Блоки ожидания](https://starknet.io/documentation/block-structure-and-hash/#pending_block)были[введены](https://community.starknet.io/t/cairo-v0-6-2-api-change-pending-block/195)в последней минорной версии (v0.6.2) и предлагали более быстрые подтверждения транзакций. Эта версия включает поддержку запроса этих блоков через StarkNet CLI.

Чтобы использовать его, в команде CLI, которая принимает block_number в качестве аргумента (contract_call/get_block/get_code/get_storage_at), мы можем запросить StarkNet относительно текущего блока, указав block_number=pending.

**Поддержка контрактов по счету**

StarkNet использует абстракцию аккаунта, то есть все счета реализованы как смарт-контракты. Первые внедрения клиентских контрактов были выполнены[Argent](https://github.com/argentlabs/argent-contracts-starknet)и[OZ](https://github.com/OpenZeppelin/cairo-contracts/blob/main/contracts/Account.cairo), но мы ожидаем, что придет гораздо больше.

В StarkNet, все транзакции должны проходить через контракт на учетную запись, и CLI теперь позволяет взаимодействовать с StarkNet Alpha непосредственно через контракты на учетную запись. Смотрите[учебник](https://starknet.io/docs/hello_starknet/account_setup.html#setting-up-a-starknet-account)о том, как его установить.

Аналогичная функциональность также была добавлена в[StarkNet.py](https://github.com/software-mansion/starknet.py/)и[Nile](https://github.com/OpenZeppelin/nile)за последний месяц.

#### L1<>L2 обмен сообщениями в тестовом фрейме

Альфа 0.7.0 представляет Postman. Postman позволяет разработчикам использовать тестовый фреймворк для тестирования более сложных потоков.

На высоком уровне — он мочивает ответственность за передачу сообщений StarkNet от L1 до L2 и L2 до L1. В договоре назначения StarkNet будут появляться сообщения, отправленные по договору Solidity, и сообщения, отправленные по контракту StarkNet, появятся в договоре Solidity Messaging.

#### И другие возможности

Alpha 0.7.0 предоставляет множество возможностей и изменений, таких как добавление корневой функции квадрата в математическую общую библиотеку. Полный список отображается в[списке изменений](https://github.com/starkware-libs/cairo-lang/releases/tag/v0.7.0).

### Далее?

Первоначальная поддержка[Механизма Комиссии](https://community.starknet.io/t/fees-in-starknet-alpha/286/29)будет выпущена через несколько недель, в качестве подверсии StarkNet.

### Подробнее?

[starknet.io](https://starknet.io/): для всей информации StarkNet и обновлений.

[StarkNet Discord](https://discord.gg/uJ9HZTUk2Y): присоединяйтесь для получения ответов на ваши вопросы, получите поддержку dev и станьте частью сообщества.

[StarkNet Shamans](https://community.starknet.io/): присоединяйтесь к обсуждению (и участвуйтесь!) в исследованиях StarkNet.