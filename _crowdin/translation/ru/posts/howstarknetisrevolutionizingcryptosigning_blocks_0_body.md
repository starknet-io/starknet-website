# Как StarkNet революционизирует подпись криптовалют
## *Выход с сложными ключами, с идентификатором лица. Тематическое исследование по вопросу об абстракции счета*
Как только люди смогут использовать знакомые методы, такие как лицевой идентификатор, для подписания криптотранзакций, мы увидим бум в самохранении. Все знают, что управление вашим собственным кошельком – это оригинальный криптовалютный идеал, но он запугается и что люди внедряют обмены. Это тематическое исследование того, как функциональность StarkNet под названием Account Abstraction используется Braavos для получения гораздо более интуитивного способа использования вашего кошелька.
## Представляем абстракцию счета
После скандала на FTX вопрос релевантнее чем когда-либо. Почему люди все еще предпочитают дать свои криптовалютные централизованные учреждения, а не хранить их сами? Ответ: для большинства людей содержание под стражей осложнено. Семенные фразы являются самым худшим механизмом рекуперации, сдерживающим многие (даже некоторые из самых закаленных дегаза). Ответ на это задание: абстракция аккаунта. Абстракция аккаунта позволяет кошелькам удовлетворять ожидания UX пользователей Web2, (и превышать), например, подписание транзакции с использованием Face ID или двухфакторной аутентификации. Это упрощает сегментацию счетов и ограничения трат; и в конечном итоге позволяет просто восстановить счет и удалить начальную фразу все вместе. Это революция для UI и UX.
## StarkNet
StarkNet, ведущий Validity Rollup, имеет несколько ключевых характеристик, что делает его наиболее перспективным решением для масштабирования Ethereum. Основываясь на доказательствах STARK, он обеспечивает низкие затраты на газ без ущерба для безопасности Ethereum. Трек записи доказательств STARK powering StarkEx включает в себя $800B совокупного объема торгов, 300M транзакций и 90M NFT. Возможность СТАРК доказать, что предоставление низких комиссий в сочетании с силой абстракции Аккаунта, позволяет Braavos разрабатывать инновационные возможности кошелька, для которых он предназначен.
## Контекст
Большинство основных блокчейнов, включая биткойны и Ethereum, используют схемы эллиптической кривой secp256k1 для криптографической подписи (см.[здесь](http://ethanfast.com/top-crypto.html)для составления всеобъемлющего списка). Эта реализация эллиптических кривых считается надежной — многие блокчейны используют ее, и она выдержала испытание временем. Однако он не совместим со схемой криптографической подписи доступной в мобильных устройствах модулях безопасности оборудования (HSM), такие как iPhones и Android (Pixel и другие) телефоны. Эти устройства используют другую кривую — secp256r1 (также называемую NIST-P256). Это означает, что пользователи этих блокчейнов не могут воспользоваться микросхемами безопасности на своих устройствах и должны по умолчанию пользоваться аппаратными кошельками, если они хотят получить высокий уровень безопасности. Это серьезно ограничивает любое новшество UX на то, как пользователи могут подписывать в кошелек и утверждать транзакции (следовательно, ubiquity seed-phrases). StarkNet не поддерживает secp256r1 и имеет собственную проприетарную кривую, которая является дружественной для СТАРК кривой. Но в отличие от других блокчейнов, StarkNet имеет абстрактную учетную запись, доступную изначально на своей платформе, что открывает новый мир возможностей UX для кошельков. Braavos использовал эту возможность для ознакомления с аппаратным дизайном.
## Аппаратный сигнал
Подпись аппаратного обеспечения состоит из двух основных частей:
* Безопасная подсистема в мобильном устройстве пользователей * Учетный смарт-контракт, который может запускать произвольную логику (a.k.a Абстрактная запись)
## Безопасная подсистема
Hardware Signer использует безопасную подсистему, встроенную в пользовательское устройство —**Secure Enclave**или Android Phone,**Titan**HSM — для защиты учетной записи. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) Фишка Secure Enclave / Titan является выделенной и изолированной подсистемой, полностью отделен от процессора приложений, который может генерировать приватные ключи и подписывать сообщения. Он генерирует ключи с помощью внутреннего генератора произвольных чисел True Random Number (TRNG) и подписывает сообщения по эллиптической кривой NIST-P256 (secp256r1) с помощью внутреннего ускорителя открытого ключа (PKA). Закрытые ключи никогда не оставляют безопасной системы и недоступны никому, даже пользователю, или самому приложению. Это означает, что даже если ядро процессора устройств становится скомпрометированным, пользовательские ключи остаются в безопасности! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Глубокое погружение в безопасный анклав
В процессе производства чипов UID (уникальный идентификатор) генерируется TRNG и хранится в PKA. Он не может быть прочитан и никогда не покидает PKA, Таким образом, процессор Secure Enclave и операционная система Secure Enclave (SepOS) не известны. Этот UID является случайным числом, который является уникальным для каждого устройства и используется для шифрования всех других ключей, которые будут созданы в будущем на этом устройстве. Как это работает, является следующим: приложение будет просить SepOS создать новую ключевую пару, SepOS инструктирует безопасный Enclave TRNG создать ключ и зашифровать его (используя UID). Затем приложение может запросить от SepOS расшифровать ключ и подписать сообщение, используя сгенерированный ключ. Во время этого процесса сгенерированный ключ не покидает анклав и никому не известен. (Дополнительную информацию о безопасном анклаве, см.[здесь](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)). Путь защиты анклава построен и управляется, вместе с тем он является мишенью для нападений влиятельных корпораций и правительств во всем мире, является причиной того, что его безопасность превосходит стандартные аппаратные кошельки.
## Абстракция аккаунта
Мощь Braavos как смарт-контракт, основанный на кошельке на вершине StarkNet, заключается в том, что он состоит из двух основных элементов:
* Клиент (например, приложение), которое позволяет пользователю просматривать и подписывать транзакции и отправлять их в цепочку. * На цепи — имеет смарт-контракт с учетной записью, который может иметь произвольную логику; и, в частности, в нашем случае запустите произвольную подпись**проверки логики**. Приложение подписывает транзакцию с помощью модуля безопасности мобильного устройства и затем отправляет ее на контракт клиента, который может проверить ее. Как упоминалось выше, модуль безопасности на iPhones и Android-телефонах использует криптографию, которая называется NIST-P256 (secp256r1), которая не совместима ни с одной основной криптографической схемой блокчейна, включая StarkNet. Поэтому иметь смарт-контрактную учетную запись в цепочке, которую все транзакции проходят и могут управлять произвольной логикой, имеет решающее значение для использования этих HSMs на iPhones и Android-телефонах. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## Биометрические данные
Как пользователь утверждает транзакцию через кошелек Braavos? Могут ли злоумышленники просто подписать транзакцию без согласия пользователя? Нет!! Прохладная вещь о встроенном модуле безопасности в мобильных устройствах, таких как Secure Enclave, , что она поддерживает неточную биометрическую аутентификацию идентификатора пользователя. Это означает, что даже фактическое согласие на подписание сделки делается непосредственно по сравнению с безопасным Энклавом. Одобрение не проходит через приложение, и пользователю необходимо будет подтвердить транзакцию с отпечатком пальца или личным идентификатором.
## Восстановление
Если никто не знает закрытый ключ, что происходит, если устройство потеряется или блокируется? Как пользователь может получить контроль над учетной записью? В Braavos аккаунт будет иметь 2 публичные ключа — ключ Hardware Signer, который будет использоваться для подписания всех транзакций, и ключ, полученный из seed фразы, который может подписать только одну транзакцию — «Запрос на удаление аппаратного дизайна». Этот запрос не будет выполняться немедленно, но скорее будет иметь задержку в 4 дня (настраиваемый) для того, чтобы позволить пользователю использовать аппаратный сигнал для отмены такого запроса. Это означает, что если устройство будет украден/утеряно/кирпичен, пользователи смогут восстановить свою учетную запись в течение 4 дней. Однако, если их семенная фраза будет украдена и нападающий подает запрос на удаление аппаратного дизайна, пользователь будет автоматически (повторно) получать уведомление на свое мобильное устройство и сможет отменить запрос и сохранить все активы в безопасности.
## Summary
Функция Hardware Signer обеспечивает высокий уровень безопасности шифрования для пользователей с использованием web2. В этом смысле, подписание сделки так же гладко и беспокойства бесплатно, как и оплата с Apple/Google платы. Это всего лишь один, но очень важный, пример силы StarkNet, смарт-контракт на основе кошелька (a. a Резюме счета) и новое пространство для проектирования, которое оно создает. Мы планируем развивать все больше и больше новых возможностей, которые приведут криптовалютную промышленность к лучшему и более инклюзивному будущему, предоставление как новым пользователям, так и существующим пользователям бескомпромиссной безопасности в сочетании с бескомпромиссным UX.