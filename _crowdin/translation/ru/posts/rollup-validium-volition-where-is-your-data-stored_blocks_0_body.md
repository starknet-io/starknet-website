### TL;DR

* StarkWare предлагает клиентам ряд режимов доступности данных (DA) на выбор в соответствии с их приоритетом.
* Существует три подхода к доступности данных для доказательств STARK, все они уже доступны в производстве:\
  —**Rollup**: реестр публикуется непосредственно в блокчейне\
  —**Validium**: комитет по доступности данных защищает реестр, только хеш хранится в цепочке\
  —**Volition**: приложения могут позволить пользователям выбирать режим DA — Rollup или Validium — для каждой транзакции
* Независимо от того, какой DA используется — валидность всех транзакций гарантируется STARK.

### Введение

По состоянию на ноябрь 2022 года[StarkEx](https://starkware.co/starkex/)обработал объем торгов на сумму более 750 миллиардов долларов и провел более 270 миллионов транзакций на Ethereum. В пространстве NFT, поддерживая такие приложения, как ImmutableX и Sorare, StarkEx выпустила более 85 миллионов NFT по цене, которая в 1000 раз дешевле, чем делать это непосредственно на Ethereum. Технология на основе STARK масштабирует Ethereum. Например, за одну неделю StarkEx провел в 1,6 раза больше транзакций, чем Ethereum (12 млн на StarkEx против 7,5 млн на Ethereum), при этом занимая менее 0,1% блочного пространства Ethereum. И все это он делает, предоставляя пользователям такой же уровень безопасности, как если бы они размещались непосредственно на Ethereum.

### Как StarkWare достигает этого?

Пользователи отправляют транзакции на уровне 2 (либо StarkEx, либо StarkNet), которые группируются и отправляются на прувер STARK. Этот прувер STARK знает состояние реестра до и после обработки этих транзакций. Доказательство создает доказательство STARK, которое подтверждает действительность нового состояния реестра после выполнения этих транзакций. Новое состояние и доказательство STARK отправляются верификатору STARK в цепочке. Проверка этого доказательства происходит автономно через неизменяемый смарт-контракт на Ethereum.

Эта архитектура обеспечивает лучшее из обоих миров: у нас могут быть низкие транзакционные издержки, но при этом Ethereum посередине выступает в качестве нейтрального арбитра. Ethereum в качестве арбитра — это не просто приятно; он обеспечивает критическую безопасность для конечного пользователя. Пользователь, осуществляющий транзакцию, теперь может быть уверен, что его средства защищены Ethereum, а транзакции неизменны после проверки в Ethereum. Пользователь также имеет полное право самостоятельного хранения своих средств. Самостоятельное хранение важно, потому что оно гарантирует, что пользователь всегда имеет доступ к своим средствам, не полагаясь на какую-либо третью сторону.

### Какое место во всем этом занимает доступность данных?

Важно подчеркнуть как то, что делает это доказательство, так и то, что делает*, а не*. Доказательство свидетельствует о достоверности нового состояния, но не говорит вам, что это за новое состояние. Для этого вам нужна доступность данных. Если у нас есть только доказательство, тогда блокчейн знает, что то, что было отправлено, действительно, но не знает, каково новое состояние (например, баланс книги)! К потребителям этих данных относятся пользователи, у которых есть транзакции в рамках этих доказательств. Данные должны быть доступны для них, если они хотят вывести средства на Ethereum без необходимости доверять оператору уровня 2. Это дает пользователям полное право самостоятельного хранения своих средств.

Одной из аналогий этого является ваша школьная учительница, которая просит вас доказать, что х равно х. Это тривиально доказать. Что сложнее ответить: чему на самом деле равен x? Для этого нужна отдельная информация. Возможно, x равно 5 или другому значению. Аналогичным образом, в блокчейне доказательство STARK может быть отправлено в смарт-контракт верификатора STARK для проверки. И верификатор может засвидетельствовать, что доказательство действительно (что x=x). Но вам нужен отдельный вход, чтобы сказать вам, что такое x (новый баланс бухгалтерской книги).

Есть три подхода к тому, чтобы сделать эти данные доступными:

#### Сводный режим

Режим Rollup гарантирует, что состояние леджера хранится в Ethereum вместе с доказательствами. Режим свертки в настоящее время используется[dYdX](https://dydx.exchange/)в производстве, а также используется сетью[Public StarkNet](http://starknet.io/)L2. Преимущества здесь очевидны: можно воссоздать состояние леджера, только взаимодействуя с блокчейном Ethereum. Следствием этого является то, что вы, как конечный пользователь, можете ненадежно общаться с соответствующим смарт-контрактом на Ethereum и снимать свои средства, даже если система уровня 2 отключается.

#### Валидиум

В режиме агрегирования большая часть расходов на газ Ethereum идет на доступность данных, а не на проверку доказательств. Это связано с тем, что хранение данных в блокчейне требует больших затрат газа. В режиме Validium информация реестра не отправляется в Ethereum. Скорее, он хранится вне сети в Комитете по доступности данных. Ethereum хранит хеш этой информации реестра. Этот комитет по доступности данных состоит из кворума независимых членов, которые следят за правильным обновлением состояния, а также сохраняют копию обработанных данных. Каждый экземпляр StarkEx может создать собственный кворум. Члены кворума для существующих приложений, работающих на StarkEx, включают такие сущности, как[Consensys](https://consensys.net/),[Nethermind](https://nethermind.io/),[Iqlusion](https://iqlusion.io/)и[Cephalopod](https://cephalopod.equipment/).

Преимущества здесь очевидны. Нет необходимости платить комиссию за газ Ethereum для хранения информации о реестре в сети. Скорее, единственное, что хранится в Эфириуме, — это единый хэш информации реестра. Если вы хотите безнадежно вывести средства со 2-го уровня, поговорив с Ethereum, вам просто потребуется цифровая подпись одного из членов Комитета по доступности данных. Члены DAC будут использовать криптографию, чтобы доказать, что вы владеете этими средствами.

Еще одним скрытым преимуществом Validium Data Availability является конфиденциальность от людей, читающих блокчейн. В накопительном режиме баланс каждой учетной записи на момент отправки каждого подтверждения общеизвестен. Благодаря Validium эти данные скрыты от блокчейна — об этом знает только комитет по доступности данных, потому что они хранятся вне блокчейна. Этот уровень конфиденциальности обеспечивает широкий спектр вариантов использования, где важно запутать данные транзакций.

#### Воля

Volition — это архитектура доступности данных, которая обеспечивает выбор между Validium и Rollup Mode на уровне транзакции. Он делает это, сохраняя один реестр в цепочке, а другой — в комитете по доступности данных. Пользователи могут выбирать между режимами Validium и Rollup для каждой отдельной транзакции.

Представьте, что вы покупаете действительно дорогой NFT, такой как Bored Ape или Cryptopunk, в приложении, работающем на StarkEx. Вы можете использовать Rollup Mode для защиты данных для этого NFT, потому что вы хотите, чтобы запись этой конкретной транзакции хранилась в Ethereum. Однако затем вы можете купить действительно дешевый NFT (например, плащ для своего персонажа в игре с блокчейном), и в этом случае вы будете рады сэкономить деньги, используя Validium.

Если вас интересует масштаб, достигнутый доказательствами STARK, приходите и развивайте нас.



Вы всегда можете отправить электронное письмо по адресу[info@starkware.co](mailto:info@starkware.co), и человек свяжется с вами по электронной почте.