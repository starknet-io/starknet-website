## TL;DR

* Альфа-версия Starknet v0.11.0 вышла и работает в Testnet
* Теперь вы можете развертывать и взаимодействовать с контрактами Cairo 1.0 в Starknet Testnet!
* Вычисления на Starknet в 5 раз дешевле!
* Впервые обновление основной сети до версии Starknet alpha v0.11.0 будет поставлено на голосование.
* Это знаменует собой начало переходного периода перед[Регенезисом](https://medium.com/starkware/starknet-regenesis-the-plan-bd0219843ef4)
* Развертывание контрактов Cairo 1.0 в основной сети будет возможно только после нескольких недель работы в тестовой сети, как только мы обеспечим бесперебойную работу новой системы.

## Введение

Мы рады сообщить, что долгожданная альфа-версия Starknet v0.11.0 уже доступна в Testnet! Почему это большой шаг для Starknet? В Starknet v0.11.0 вы можете объявить, развернуть и запустить смарт-контракты[Cairo 1.0](https://medium.com/starkware/cairo-1-0-is-here-7e1ac8377038). Мы также представляем новый системный вызов, позволяющий плавно перенести существующие контракты на реализацию Cairo 1.0.

Cairo 1.0 улучшает Starknet в двух аспектах. Во-первых, он улучшает опыт разработки, предлагая более богатый язык программирования, который вводит (среди прочего) типы/универсальные шаблоны/признаки/обработку ошибок в Cairo. Во-вторых, Cairo 1.0 играет ключевую роль в пути децентрализации Starknet: контракты Cairo 1.0, отправленные в Starknet alpha v0.11.0, компилируются в Sierra. Sierra гарантирует, что выполнение каждого контракта доказуемо, что является важным свойством децентрализованного Starknet.

Еще одно важное улучшение, которое появится в этой версии, — 5-кратное снижение стоимости вычислений. Это сделает Starknet еще более удобным для ресурсоемких приложений. Подробнее ниже.

## Подготовка к регенерации

Starknet alpha v0.11.0 знаменует собой начало переходного периода, что позволит подготовиться к возрождению Starknet. План Starknet Regenesis был опубликован[несколько месяцев назад и фокусируется на переходе от системы, основанной на Cairo 0, к системе](https://medium.com/starkware/starknet-regenesis-the-plan-bd0219843ef4)основанной на Cairo 1.0.

В течение переходного периода существующие контракты Cairo 0 (если они могут быть обновлены) имеют возможность сохранить свой адрес и хранилище, а также плавно перенести свою реализацию на Cairo 1.0 (см. следующий раздел).

Как пользователю Starknet, это означает, что вам нужно будет обновить свой кошелек только после того, как будет выпущена новая реализация вашей учетной записи Cairo 1.0 (вы сможете сделать это в любое время до самого Regenesis). Никаких простоев не ожидается, все децентрализованные приложения в системе продолжат работу в обычном режиме.

После Регенезиса Starknet прекратит поддержку оставшихся контрактов Cairo 0 по всей системе. Об этом будет сообщено заранее, и разработчикам будет предоставлено достаточно времени для переноса своих контрактов. Ожидается, что переходный период продлится несколько месяцев, и разработчики децентрализованных приложений уже могут начать перенос своей реализации на Cairo 1.0. В конце Переходного периода произойдет Регенезис.

## Плавный переход на Cairo 1.0

С переходом на Cairo 1.0 существующие контракты Cairo 0 устарели и больше не будут поддерживаться после Regenesis. Чтобы позволить обновляемым контрактам Cairo 0 продолжать работать даже после Регенезиса и сохранять состояние, построенное до этого времени, мы добавили новый системный вызов — ['replace_class'](https://docs.starknet.io/documentation/starknet_versions/upcoming_versions/#replace_class_syscall). Обновляемые контракты не имеют проблем с обновлением до реализации Cairo 1.0, но базовый прокси-сервер (контракт, который содержит фактическое состояние) по-прежнему будет привязан к реализации Cairo 0. Системный вызов \`replace_class\` решает эту проблему, позволяя прокси-контракту заменить его базовый класс, т.е. сохранить тот же адрес и хранилище, но заменить реализацию.

## Вычисления теперь в 5 раз дешевле!

Сегодня комиссия за транзакции в Starknet состоит из двух основных компонентов: вычислений и данных в сети. Вычислительный элемент платы за транзакцию Starknet определяется предельной стоимостью проверки его подтверждения на уровне L1 (дополнительную информацию см. в[docs](https://docs.starknet.io/documentation/architecture_and_concepts/Fees/fee-mechanism/)).

Первоначально наши 200-метровые каирские шаги в доказательстве, требующем 5 м газа для проверки, привели к наивной оценке 0,05 газа на каирский шаг. С тех пор мы перешли на[рекурсивных доказательств](https://medium.com/starkware/recursive-starks-78f8dd401025), что позволяет значительно снизить стоимость проверки L1 (только корень дерева рекурсии достигает L1). Настало время соответствующим образом обновить наши первоначальные оценки — цена каждого шага Cairo на L2 будет снижена в 5 раз и теперь будет стоить 0,01 газа.

Это снижение затрат имеет большое значение для приложений, требующих больших вычислительных ресурсов, например, для договоров об учетных записях с чужими подписями. Простые транзакции увидят незначительное снижение стоимости (~ 5%). В будущих версиях мы будем обрабатывать второй компонент: стоимость данных в сети. Как только в Starknet (он же Volition) будут представлены альтернативы ончейн-данным, снижение затрат будет ощущаться повсеместно.

## Старкнет Управление Первое голосование

Запущена первая фаза Starknet Governance (подробнее[здесь](https://medium.com/starknet-foundation/starknets-governance-first-phase-4614c7566f40)). Члены сообщества теперь могут участвовать в формировании Starknet через дополнительный канал, а именно голосовать за изменения протокола.

Первые этапы управления Starknet будут сосредоточены на обновлении протокола Starknet. Каждое обновление версии Starknet будет сначала развернуто в Testnet; у избирателей будет 6-дневный период для изучения и тестирования обновленной версии, поскольку она работает на Goerli. В течение этого времени будет открыто предложение Snapshot, и сообщество может проголосовать за утверждение новой версии для развертывания в основной сети.

Если предложение получает большинство голосов «ДА» в течение 6-дневного периода голосования, предложение принимается, и основная сеть Starknet будет соответствующим образом обновлена.

Starknet alpha v0.11.0 — первая версия Starknet, выставленная на голосование. Голосование Starknet alpha v0.11.0 будет открыто в течение шести дней, начиная с развертывания Testnet.

Соответствующие ссылки:

* [Снимок пространства](https://snapshot.org/#/starknet.eth/proposal/0x00889bc468509610e516e8602f00b21ca8c32466dd4f0140eca38becb7f40bef)
* [Страница обнаружения делегирования](https://delegate.starknet.io/)
* Ветка обсуждения Starknet alpha v0.11.0 на форуме сообщества[](https://community.starknet.io/t/proposal-starknet-alpha-v0-11-0/50334)

## Каир 1.0 и Сьерра

Sierra (**S**afe**I**nt**e**rmediate**R**ep**r**esent**a**tion) — это промежуточное представление, которое компилируется в сборку Cairo (CASM). До версии Starknet alpha v0.11.0 разработчик компилировал Cairo 0 в CASM и отправлял результат в секвенсор Starknet. В Cairo 1.0 разработчики компилируют свой код в Sierra и отправляют это промежуточное представление в секвенсор. Затем секвенсор скомпилирует его в CASM. Sierra гарантированно компилируется в «безопасный CASM», т. е. подмножество CASM, которое не может дать сбой, что делает каждое выполнение доказуемым. Это гарантирует, что секвенсор сможет взимать комиссию даже за отмененные транзакции, защищая от DOS. Для получения дополнительной информации см.[документы](https://docs.starknet.io/documentation/architecture_and_concepts/Contracts/cairo-1-and-sierra/).

![](https://miro.medium.com/v2/resize:fit:1400/0*KsAwaJTIsOuCsJIe)

Starknet alpha 0.11.0 будет использовать[Cairo 1.0-alpha.6 версии](https://github.com/starkware-libs/cairo/releases/tag/v1.0.0-alpha.6). Эта версия близка к[с паритетом функций](https://github.com/starkware-libs/cairo/blob/main/docs/FEATURE_PARITY.md)с Cairo 0, при этом все системные вызовы Starknet уже присутствуют.

Обратите внимание, что секвенсор Starknet использует фиксированную версию компилятора, а это означает, что языковые улучшения могут быть доступны в Starknet не сразу и будут доступны только после обновления версии Starknet. В частности, хотя улучшения, влияющие на компиляцию Cairo 1.0 → Sierra, могут вступить в силу немедленно, изменения в компиляторе Sierra → CASM (дополнительные сведения см. в[docs](https://docs.starknet.io/documentation/architecture_and_concepts/Contracts/cairo-1-and-sierra/)) необходимо будет дождаться обновления Starknet.

## Что еще нового?

### Новый тип транзакции — Объявить v2

Мы добавляем[новый тип транзакции](https://docs.starknet.io/documentation/architecture_and_concepts/Blocks/transactions/#declare_v2_cairo_1_0)для объявления классов Cairo 1.0.

Эта новая версия транзакции «declare» похожа на существующую «declare» с двумя важными отличиями:

* Отправляемый объект класса теперь представляет Sierra, а не CASM, т. е. семантика класса определяется представлением Sierra.
* Пользователь также подписывает скомпилированный хэш класса. Это важный шаг до тех пор, пока компиляция Sierra→CASM не будет доказана как часть ОС Starknet.

Дополнительные сведения см. в[документации](https://docs.starknet.io/documentation/starknet_versions/upcoming_versions/#what_to_expect).

С точки зрения разработчика опыт остается прежним. После написания кода Cairo 1.0 вы можете использовать интерфейс командной строки для объявления класса.

**Обратите внимание, что первоначально транзакции «declare v2» не будут приниматься в основной сети Starknet. После периода экспериментов в Testnet новый тип транзакций будет включен в Mainnet, и станут доступны классы Cairo 1.0.**

### Посейдон здесь

[Poseidon](https://www.poseidon-hash.info/)— это семейство хеш-функций, разработанных для очень эффективных алгебраических схем. Таким образом, они могут быть очень полезны в системах проверки ZK, таких как STARK и SNARK. Начиная с версии Starknet alpha v0.11.0, разработчики смогут использовать Poseidon. Кроме того, некоторые хэш-вычисления, которые являются частью протокола Starknet, перейдут на Poseidon (в частности, хэш класса, скомпилированный хэш класса и части обязательства состояния будут использовать Poseidon, см.[документы](https://docs.starknet.io/documentation/starknet_versions/upcoming_versions/#poseidon_hash)для получения дополнительной информации). В будущем больше внутренних компонентов перейдут на использование хэш-функции Poseidon.

Точную версию и параметры, которые используются в Starknet, можно найти[здесь](https://docs.starknet.io/documentation/architecture_and_concepts/Hashing/hash-functions/#poseidon_hash).

### Разные изменения

Как и в предыдущих версиях Starknet, обновление также влияет на наши API и другие низкоуровневые компоненты. Ниже мы перечисляем их и обращаемся к конкретным изменениям, которые были сделаны:

* v0 транзакции вызова/объявления больше не поддерживаются
* Сообщения L1→L2 теперь требуют[сборов](https://docs.starknet.io/documentation/architecture_and_concepts/L1-L2_Communication/messaging-mechanism/#l1-l2_message_fees). То есть сообщения, отправленные с нулевой комиссией, не будут обрабатываться секвенсором Starknet.
* Формат данных в цепочке[изменен](https://docs.starknet.io/documentation/architecture_and_concepts/Data_Availability/on-chain-data/#on_chain_data_post_v0_11_0)
* [Изменения API](https://docs.starknet.io/documentation/starknet_versions/upcoming_versions/#api_changes)(здесь перечислены не все изменения, полный список см. в документации):
* добавлена новая конечная точка get_compiled_class_by_class_hash
* \`get_class_by_hash\` возвращает оба класса Cairo 0 / Cairo 1.0 (в зависимости от запрошенного хэша)
* В \`get_state_update\` есть новый раздел для замененных классов, а объявления разделены между классами Cairo 0 и Cairo 1.
* \`estimate_fee\` и \`simulate_tx\` теперь могут пропускать проверку
* [новая](https://github.com/starkware-libs/starknet-specs/releases/tag/v0.3.0-rc1)версия Starknet JSON-RPC

## Что будет дальше?

Теперь, когда вся инфраструктура, связанная с Cairo 1.0, создана, вы можете ожидать:

* Дальнейшие улучшения языка в Cairo 1.0
* Улучшения производительности:[, как и было обещано](https://medium.com/starkware/starknet-performance-roadmap-bb7aae14c7de), мы продолжаем двигаться вперед в направлении значительного увеличения TPS. Следующим шагом в дорожной карте является переход на секвенсор[Rust](https://github.com/starkware-libs/blockifier), который разрабатывается в открытом доступе под лицензией Apache 2.0. Новый секвенсор будет использовать[rust CairoVM](https://github.com/lambdaclass/cairo-rs)и полный узел[Papyrus](https://github.com/starkware-libs/papyrus), образуя Performance Trio.
* Офчейн[DA](https://docs.starknet.io/documentation/architecture_and_concepts/Data_Availability/on-chain-data/)! В этой версии мы обработали вычислительную составляющую стоимости транзакции. В будущих версиях мы будем обрабатывать расходы на передачу данных в сети, которые сегодня являются доминирующими затратами для средних транзакций.

![](/assets/starknet-alpha-v0.11.0-diagram.png)