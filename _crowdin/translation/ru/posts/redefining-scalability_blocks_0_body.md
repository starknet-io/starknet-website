Масштабируемость блокчейна всегда была отапливаемой темой. Почти каждая сеть блокчейна затрагивает большое количество транзакций в секунду (TPS) в качестве точки продажи. Тем не менее, TPS не является допустимой метрикой для сравнения сетей блокчейна с — что создает проблему для оценки их относительной производительности. Кроме того, большие числа ТПС обычно приходят в себе— что ставит вопрос: действительно ли эти сети масштабируются, или же они просто увеличивают свою пропускную способность?

Итак, рассмотрим вопрос о том, как определить масштабируемость, какие компромиссы были сделаны для ее достижения, и почему Validity Rollups являются наилучшим решением масштабируемости.

### Не все транзакции выполнены равномерно

Во-первых, необходимо подтвердить наше утверждение о том, что простая и удобная метрика TPS не является точным показателем масштабируемости.

компенсировать узлы за выполнение транзакций (и удерживать пользователей от спама в сети ненужными вычислениями), блокчейны взимают комиссию пропорциональную вычислительной нагрузке, возлагаемой на блокчейн. В Ethereum, в*газе измеряется сложность вычислительной нагрузки.*Поскольку газ является очень удобным показателем сложности транзакций, термин будет использоваться во всей статье для блокчейнов не-Ethereum, даже несмотря на то, что он обычно специфичен для Ethereum.

Транзакции значительно отличаются сложностью и поэтому сколько газа они потребляют. Bitcoin, пионер бесправных транзакций от peer-to-peer, поддерживает только рудиментарный Bitcoin скрипт. Эти простые переводы с адреса на адрес используют небольшой газ. В отличие от этого, умные контрактные цепочки, такие как Ethereum или Solana поддерживают виртуальную машину и языки программирования Тюринга, которые позволяют значительно более сложные транзакции. Следовательно, dApps как Uniswap требует гораздо больше газа.

Поэтому не имеет смысла сравнивать TPS различных блокчейнов. Вместо этого мы должны сравнивать возможности вычислений или пропускной способности.

Все блокчейны имеют (переменный) размер блока и время блоков, которые определяют, сколько*единиц вычислений*может быть обработано на каждый блок и как*быстро*может быть добавлен новый блок. Вместе эти две переменные определяют пропускную способность**блокчейна.

### Что ограничивает масштабирование?

Блокчейны стремятся быть максимально децентрализованными, инклюзивными сетями. Для достижения этой цели необходимо держать в поле зрения два основных свойства.

#### **1. Требования к оборудованию**

Децентрализация сети блокчейна определяется способностью самого слабого узла сети проверить и держать его состояние. Таким образом, затраты на запуск узла (аппаратное обеспечение, пропускная способность, и хранилище) должны оставаться как можно более низкими, чтобы как можно больше людей могли стать бесконтрольными участниками в сети без доверия.

#### 2**.**Рост Состояния

Государственный рост означает то, как быстро растет блокчейн. Чем больше пропускной способности блокчейна позволяет происходить за единицу времени, тем быстрее растет блокчейн. Полные узлы хранят историю сети, и они должны иметь возможность проверить состояние сети. Состояние Ethereum хранится и ссылается на него с использованием таких эффективных структур, как деревья. По мере роста государства к нему добавляются новые листья и ветви, что делает его все более сложным и трудоемким для выполнения определенных действий. По мере роста размеров цепи происходит ухудшение выполнения узлами наихудшего регистра, что приводит к постоянному росту времени проверки новых блоков. Со временем это также увеличивает общее время синхронизации полного узла.

### Отрицательные последствия увеличения на всем протяжении

#### 1. Количество узлов

Минимальные требования для запуска узла и узла подсчитываются:

* Bitcoin1: 350GB HDD дискового пространства, 5 Мбит/с, 1ГБ оперативной памяти, процессор >1 Гц. **Количество узлов: ~10,000**
* Ethereum2: 500GB+ SSD дисковое пространство, 25 Mbit/s, 4–8GB RAM, процессор 2–4. **Количество узлов: ~6,000**
* Solana3: 1.5TB+ SSD дисковое пространство, 300 Mbit/s соединение, 128GB RAM CPU 12+ ядер. **Количество узлов: ~1,200**

Обратите внимание, что чем больше требования к процессору, пропускной способности и хранению узлов, необходимых для пропускной способности блокчейна, меньшее число узлов в сети, что приводит к ослаблению децентрализации и созданию менее инклюзивной сети.

#### 2. Время синхронизации полного узла

При первом запуске узла он должен синхронизировать со всеми существующими узлами, скачать, и проверить, состояние сети на всем пути от блока генезии до кончика цепочки. Этот процесс должен быть как можно более быстрым и эффективным, чтобы любой мог действовать в качестве бесправного участника протокола.

принимая в качестве индикатора[2020 Bitcoin Node](https://blog.lopp.net/2020-bitcoin-node-performance-tests/)и[2021 Node Sync Тесты](https://blog.lopp.net/2021-altcoin-node-sync-tests/), В таблице 1 сравнивается время, необходимое для синхронизации полного узла биткойнов и файлов. Ethereum против Solana на среднем компьютере потребительского качества.

![Таблица 1. Сравнение пропускной способности блокчейна и узла](/assets/1_gmpi_1c9zipoc-znrh7b5q.png "Таблица 1. Сравнение пропускной способности блокчейна и узла")

Таблица 1 свидетельствует о том, что увеличение пропускной способности приводит к более длительной синхронизации, поскольку все больше и больше данных необходимо обрабатывать и хранить.

Хотя улучшения программного обеспечения узлов постоянно совершенствуются, чтобы смягчить проблему растущей цепочки блоков (снижение дискового пространства, ускоряющаяся скорость синхронизации, более сильная устойчивость к падениям, модулизация определенных компонентов и т.д. , узлы очевидно все еще не могут идти в ногу с увеличением пропускной способности.

### Как определить масштабируемость?

Масштабируемость является наиболее неправильно представленным термином в пространстве блокчейна. Хотя увеличение пропускной способности желательно, это всего лишь одна часть головоломки.

***Масштабируемость**означает еще**транзакций**для**того же аппаратного обеспечения**.*

По этой причине масштабируемость можно разделить на две категории.

#### Масштабируемость последовательности

Последовательность описывает процесс заказа и обработки транзакций в сети. Как было ранее установлено, любой блокчейн может в тривиально увеличить пропускную способность, увеличив размер блока и сократив его время блоков, до тех пор, пока не будет сочтено слишком значительным отрицательное воздействие на его децентрализацию. Но эти простые параметры не обеспечивают требуемых улучшений. Теоретически EVM может[обрабатывать около 2000 ТПС](https://twitter.com/dankrad/status/1459607325854121989), что недостаточно для обслуживания спроса на длительное пространство блоков. В целях расширения масштабов последовательности действий Солана внесла ряд впечатляющих новшеств: использование параллельной среды выполнения и создание механизма более четкого консенсуса, , что позволяет значительно повысить эффективность пропускной способности. Но, несмотря на ее улучшения, она не является ни достаточной, ни масштабируемой. По мере увеличения пропускной способности Solana стоимость аппаратного обеспечения для запуска узла и обработки транзакций тоже увеличивается.

#### Масштабируемость проверки

*Масштабируемость верификации описывает подходы, которые увеличивают пропускную способность без обременительных узлов с постоянно растущими затратами оборудования.*В частности, речь идет о криптографических новшествах, таких как доказательства достоверности. Это причина, по которой Ролики Валидности могут устойчиво масштабировать блокчейн.

**Что такое Validity Rollup?**

Rollups Validity (также известный как «ZK-Rollups») перемещают вычисления и состояние вне цепи, но сохраняют небольшое количество определенных данных по цепочке. Умный контракт на лежащий в его основе блокчейн поддерживает корень состояний Rollup. На Rollup, партия высокосжатых транзакций вместе с корнем текущего состояния посылается в оффлайн Prover. Prover вычисляет транзакции, генерирует доказательство правильности результатов и новый корень состояний и отправляет его в on-chain Verifier. Верификатор проверяет достоверность доказательства, и смарт-контракт, который сохраняет состояние Rollup обновляет его до нового состояния Prover.

**Как масштаб Validity Rollups с одинаковыми аппаратными требованиями?**

Даже несмотря на то, что разработчики требуют высококлассного оборудования, они не влияют на децентрализацию блокчейна; поскольку действительность транзакций гарантируется математически проверяемыми доказательствами.

Каковы важные требования для проверки доказательств. Поскольку вовлеченные данные сильно сжаты и в значительной степени абстрагированы через вычисления, их влияние на узлы лежащего в основе блокчейна минимально*.*

Верификаторы (узлы эфир) не требуют высокопроизводительного оборудования, а размер партии не увеличивает аппаратные требования. Только состояние переходов и небольшое количество данных для звонков должны быть обработаны и сохранены узлами. Это позволяет всем узлам Ethereum проверять партии Validity Rollup на их существующем оборудовании.

**Чем больше транзакций, тем дешевле она получает**

В традиционных блокчейнах больше происходит транзакций, чем дороже становится для всех по мере пополнения блочного пространства — и пользователям нужно переставить друг друга на рынке комиссионных вознаграждений, чтобы их транзакции были включены.

Для Rollup Validity эта динамика обратна. Проверка партии транзакций на Ethereum имеет определенную стоимость. По мере роста количества сделок внутри партии стоимость проверки возрастает на экспоненциально более медленной ставке. Добавление большего количества транзакций к пакету приводит к более дешевым комиссионным сборам даже при увеличении стоимости проверки партии, потому что он амортизирован среди всех транзакций внутри партии. Роллы действительности хотят как можно больше транзакций внутри партии, чтобы комиссия за верификацию могла быть предоставлена всем пользователям. По мере того, как размер пакета увеличивается до бесконечности, амортизированная комиссия за транзакцию конвертируется в нуль, т. е. ., чем больше транзакций на Rollup, тем дешевле она получает для всех.

dYdX, dApp с поддержкой Rollup Validity, часто видит партийные размеры более чем 12 000 транзакций. Сравнение расхода газа в тех же операциях на Mainnet против Validity Rollup иллюстрирует увеличение масштабируемости:

Установка транзакции dYdX на Ethereum Mainnet:**200,000 gas**

Построение транзакции dYdX на StarkEx:**<500 газа**

Еще один способ взглянуть на это: основные тарифные шкалы Vality Rollups на основе количества пользователей в той же партии.

#### Почему оптимистичные роллы не настолько масштабируемы, как можно подумать

Теоретически оптимистичные роллы обеспечивают почти ту же отдачу от масштабируемости, что и роллы валидности. Но есть одно важное отличие: Оптимистические роллы оптимизируются для среднего случая, в то время как Validity Rollups оптимизируют для худшего случая. Поскольку блокчейн системы работают в крайне состязательных условиях, оптимизация для худшего случая является единственным способом обеспечить безопасность.

В худшем случае Оптимистического Роллупа транзакции пользователя не будут проверяться чеками мошенников. Таким образом, для того, чтобы конкурировать с мошенничеством, пользователь должен синхронизировать полный узел Ethereum, полный узел L2 и вычислить собственную подозрительную транзакцию.

В худшем случае Validity Rollup, пользователю нужно будет только синхронизировать полный Ethereum для проверки достоверности, сохранить себя в вычислительной нагрузке.

В отличие от Validity Rollups, оптимистические шкалы затрат Rollups линейно с количеством транзакций вместо количества пользователей, делая их более дорогими.

### Финальная часть головоломки — бесконтрольный доступ к состоянию Роллапа

Чтобы гарантировать действительность транзакций, пользователям необходимо запустить только узел Ethereum. Тем не менее, пользователи и разработчики могут захотеть просматривать и запускать состояние и выполнение Rollup для различных целей. *Индексация L2 узла*отлично заполняет эту необходимость. Не только позволяет пользователям видеть транзакции в сети, но это также критический элемент инфраструктуры, который необходим для функционирования экосистемной инфраструктуры. Такие индексаторы, как The Graph, Alchemy, Infura; Oracle сети, как Chainlink, и блокирующие исследователей, все эти индексы полностью поддерживаются бесконтрольным, индексирующим узлом L2.

### Заключение

Многие подходы к решению проблемы масштабирования блокчейна ложно фокусируются на увеличении пропускной способности**. Но это отрицает влияние пропускной способности на узлы: постоянно растущие требования к оборудованию для обработки блоков и хранения истории сетей, и как это препятствует децентрализации сети.

С наступлением надежности криптографии, блокчейн может достичь**истинной масштабируемости**, что не влечет за собой все возрастающих затрат и позволяет проводить широкую децентрализацию. Теперь возможно больше транзакций с мощными и более сложными вычислениями для того же аппаратного обеспечения, инвертируя биржевую дилемму в процессе — чем больше активнее на «Роллупе» — тем дешевле!

[SwagtimusPrime.eth](https://twitter.com/SwagtimusP?t=pO0L1vGIhuC-ZgWOusQYtA&s=09)и[Луи Гутман](https://twitter.com/GuthL)

1 От<https://bitcoin.org/en/bitcoin-core/features/requirements>

2 От<https://ethereum.org/en/developers/docs/nodes-and-clients/>

3 От<https://docs.solana.com/running-validator/validator-reqs>

4 Сильно упрощены и скорректированы для средних динамических размеров блоков