### TL;DR

* Каир1.0 является первым крупным релизом, следующего за[введением Каир](https://medium.com/starkware/hello-cairo-3cb43b13b209)два года назад
* Cairo 1.0 даст разработчикам более безопасный и удобный язык программирования
* В сердце Каира 1,0 будет**Сьерра-Леоне**- уровень промежуточного представления, который обещает большую долгосрочную стабильность для Каирских программ
* Сьерра-Леоне поддерживает Каир для обслуживания в безразрешенной сети:\
  -**Защита сети**: это позволяет более надежно защитить DoS\
  -**Защита пользователя**: это позволяет Ethereum-класс цензуре сопротивление Cairo 1. будет влиять на StarkNet многими способами. Это также повлияет на[Регенез](https://medium.com/starkware/regenesis-starknets-no-sweat-state-reset-e296b12b80ae). Мы будем публиковать больше информации о Regenesis в ближайшие недели.

### Введение

В 2020 году мы выпустили Cairo, полностью разработанный для туринг-язык, и сделали большой шаг к поддержке проверяемых вычислений с помощью STARKs. Сегодня мы объявляем о**Каире 1.0**, самом большом прогрессе Каира на сегодняшний день. Он будет внедрять более совершенный язык, с особенностями, которые позволят повысить удобство, безопасность и удобство. Она предназначена для поддержки требований StarkNet как бесперебойной сети, позволяющей протоколу становиться проще и безопаснее.\
Разработка уже продолжается, и мы ожидаем, что первый релиз произойдет в ближайшее время.

В этом посте мы опишем путешествие Каира до сих пор и поделимся подробностями о предстоящих возможностях.

### Поездка в Каир

До 2020 года для создания доказанных СТАРК программ для общих вычислений необходимы нишевые знания. Это было возможно только для тех, кто понял сложную математику, стоящую за STARKs. В частности, для каждой бизнес-логики, т.е. все вычисления, необходимые для генерации алгебраического промежуточного представления (AIR) — набор полиномических ограничений, представляющих собой конкретные вычисления.

Каир родился из-за осознания того, что проверяемые вычисления должны быть доступны разработчикам повсеместно. Cairo позволяет разработчикам использовать власть STARKs.

С тех пор сообщество разработчиков взяло на Каир энтузиазм в строительстве. Все в процветающей экосистеме StarkNet сегодня основано на Каире. Между[StarkNet](https://starkware.co/starknet/)и[StarkEx](https://starkware.co/starkex/), приложения, работающие на Каире, обрабатывают более 220 млн транзакций, выкопали более 65 млн NFT, и торговали на Ethereum на сумму 700 млн долларов.

В то время как Каир сделал СТАРК доступными, он изначально был разработан как язык сборки, и как таковый был написан как язык низкого уровня.

![Пример ранних программ, написанных на Каире](/assets/cairocode_01.png "Пример ранних программ, написанных на Каире")

В ответ на обратную связь разработчиков и рост[StarkNet](https://starkware.co/starknet/), мы постепенно сделали Каир более выразительным и более дружелюбным для разработчиков.

![Пример из ERC-20 Каирского контракта, демонстрирующего поддержку переменных, если заявления, ошибки и библиотека UINT256](/assets/cairocode_02.png "Пример из ERC-20 Каирского контракта, демонстрирующего поддержку переменных, если заявления, ошибки и библиотека UINT256")

Но вскоре мы пришли к выводу, что настало время продвинуться вперед и вместо инкрементальных улучшений в Каире, идите для более смелых преобразований.

### Cairo 1.0

Для Каир1. мы создали совершенно новый компилятор, который предоставит разработчикам функции безопасности, и позволит им писать контракты более простым и выразительным образом.

#### Внедрение Сьерра-Леоне: обеспечение всех доказательств побега в Каире

Основное добавление в Каире 1. is Sierra (**S**afe**I**nt**e**rmediate**R**ep**r**esent**a**tion). Сьерра-Леоне представляет собой новый уровень промежуточного представительства между Каиром 1,0 и Каирским байт-кодом. Цель компании Sierra – доказать, что каждая Каирская программа и ее вклад могут быть доказаны (см. подробнее ниже).

Сьерра-Леоне обещает Каир более надежный в будущем код. Дальнейшая стабильность обеспечивается тем фактом, что контракты StarkNet не нуждаются в перекомпиляции в случае усовершенствования базовой системы (e. ., Архитектура процессора AIR, усовершенствование окончательного перевода из Сьерра-Леоне в Каирский байт-код).

**Доказательство каждого побега в Каире.**В старом Каире побег в Каире может привести к трем случаям — TRUE, FALSE, или неудаче. Ошибка запуска не может быть доказана. Sierra, гарантирует, что работа Каира никогда не будет неудачной, и может привести только к TRUE или FALSE. Это, в свою очередь, обеспечивает возможность каждого бега Каира быть доказаны.

Такое внедрение Сьерра-Леоне имеет важные последствия для StarkNet в качестве беспрепятственной сети. В Сьерра-Леоне могут быть включены реверсивные транзакции в блоки StarkNet. Это свойство позволит протоколу StarkNet остаться простым без необходимости добавлять сложные криптоэкономические механизмы.\
Два значимых примера:

1. Последовательности смогут собирать комиссии по обратным транзакциям, позволяя StarkNet предотвращать Sequencer DoS прочным способом.
2. Будет возможно осуществить принудительные транзакции L1, позволяя StarkNet наследовать полное цензурное сопротивление Ethereum.

### **Особенности языка**

Cairo 1.0 предлагает много улучшений в языке программирования. Не все, перечисленное ниже, будет частью первого выпуска, но это часть плана работы.

#### **Улучшенный синтаксис**

* Больше*местных*и*искусно*. Теперь нам нужно только*пусть*, чтобы изменить их все переменные.
* Улучшен*если*синтаксис отчета

```python
#Старые
если противник ! 0 {
  tempvar x = x+1;
} else {
  tempvar x = x;
}
__________________________________
#New
if cond { x = x + 1; }
```

#### **4.2 Гарантии безопасности типа**

Компилятор будет использовать мощное печатание для повышения безопасности кода. Например:

* Указатели всегда указывают на инициализированную память.
* Словарь всегда будет раздражен, в отличие от того, чтобы оставить ответственность за вызов squash_dict программисту.

#### **Легче использовать языковые конструкции**

Например:

* Циклы с параметром

```
let sum = 0
для x in iter {
  сумма = sum + x;
}
```

* Логические выражения
* Целые (регулярное целочисленное деление 👯)
* Защита от переполнения для соответствующих типов
* Логические условия

```
#Old
Если cond1:
  if cond2:
       # Код
  иначе, если cond3:
       # тот же код
__________________________________
#New
If cond1 && (cond2 || cond3) { … }
```

#### **Полнофункциональная система типа**

* Абстрактные типы данных (т.е. Риск подобный)

```
enum Option<T> {
 Some: T,
 None,
}
результат матча {
 Some(r) => {..},
 Нет => {..},
}
```

* Черты

```
симптом Добавить<Uint256> {
    fn add(…) { … }
}

пусть : Uint256 = 1;
пусть b: Uint256 = 4;
a + b; // Оценено до 5 типа Uint256.
```

#### **Более интуитивные библиотеки**

(например, dict, массивы)

* Кусок<Uint256, MyStruct>;
* Массив<MyOtherStruct>;

#### **Более оптимизированный код**

Нет необходимости явно определять распределение локальных переменных — автоматически обнаруживается и выполняется автоматически.

#### **Лучшая интеграция компилятора**

Улучшение поддержки IDE, управление пакетами и более эффективное облегчение участия общин.

### **Заключение**

Через два года после того, как Каир впервые использовался в производстве, мы разрабатываем Каир 1.0, что позволит повысить выразительность, безопасность и синтаксис. Это позволит разработчикам более легко писать свои контракты StarkNet.

В другом посту, скоро мы поделимся более подробной информацией о том, как Каир 1. повлияет на regenesis StarkNet, и на то, как разработчики должны подготовиться к его выпуску.