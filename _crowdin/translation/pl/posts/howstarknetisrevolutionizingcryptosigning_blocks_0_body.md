# Jak StarkNet podpisuje kryptowaluty
## *Poza kluczami złożonymi, z identyfikatorem twarzy. Studium przypadku dotyczące Abstrakcji Klienta*
W momencie, gdy ludzie mogą używać znanych metod, takich jak identyfikator twarzy do podpisywania transakcji kryptowalut, zobaczymy boom we własnym utrzymaniu. Każdy wie, że korzystanie z własnego portfela jest oryginalnym ideałem kryptowalut, ale jest zastraszające, a zamiast tego ludzie przyjmują wymiany. Jest to studium przypadku dotyczące tego, jak funkcjonalność StarkNet, zwana Abstrakcją, jest używana przez Braavos w celu uzyskania o wiele bardziej intuicyjnego sposobu korzystania z portfela.
## Wprowadzenie do Abstrakcji konta
Po skandalu FTX pytanie jest bardziej istotne niż kiedykolwiek. Dlaczego ludzie nadal decydują się dać swoje kryptowaluty scentralizowanym instytucjom, a nie zatrzymywać je samodzielnie? Odpowiedź: dla większości ludzi utrzymywanie się w domu jest skomplikowane. Nasiona to „najgorszy z najlepszych” mechanizm odzysku, który powstrzymuje wiele (nawet niektóre z najbardziej utwardzonych degensów). Odpowiedź na to wyzwanie: Abstrakcja konta. Abstrakcja konta pozwala portfelom na spełnienie (i przekroczenie) oczekiwań UX użytkowników Web2, np. podpisanie transakcji przy użyciu Face ID lub uwierzytelnianie dwuskładnikowe. Ułatwia to segmentację kont i limity wydatków; a w końcu umożliwia prosty proces odzyskiwania kont i usunięcie frazy seed razem. Jest to rewolucja dla UI i UX.
## StarkNet
StarkNet, wiodący Rollup Validity Rollup, posiada kilka kluczowych cech, które sprawiają, że jest to najbardziej obiecujące rozwiązanie skali Ethereum. W oparciu o dowody STARK zapewnia ona niskie opłaty gazowe bez naruszania bezpieczeństwa Ethereum. Historia dowodów STARK zasilających StarkEx obejmuje 800B dolarów w skumulowanym wolumenie obrotu, 300M transakcji i 90M NFT. Zdolność dowodów STARK do oferowania niskich opłat, w połączeniu z mocą Abstrakcji Klienta, umożliwił Braavos rozwijanie innowacyjnych możliwości portfela, do których jest skierowany.
## Kontekst
Większość głównych blockchainów, w tym Bitcoin i Ethereum, używa schematów kryptograficznych krzywych eliptycznych secp256k1 (patrz[tutaj](http://ethanfast.com/top-crypto.html), aby uzyskać wyczerpującą listę). Ta eliptyczna implementacja krzywej jest uważana za solidną — wiele sieci blokowych z niej korzysta i przeszedł test czasu. Nie jest on jednak zgodny ze schematem podpisów kryptograficznych dostępnym w modułach bezpieczeństwa urządzeń przenośnych, takie jak iPhone'y i telefony z systemem Android (Pixel i inne) Urządzenia te wykorzystują inną krzywą – secp256r1 (zwaną również NIST-P256). Oznacza to, że użytkownicy tych blockchain nie mogą korzystać z chipów bezpieczeństwa na swoich urządzeniach i muszą domyślnie korzystać z portfeli sprzętowych, jeśli chcą uzyskać wysoki poziom bezpieczeństwa. To surowo ogranicza wszelkie innowacje UX dotyczące sposobu, w jaki użytkownicy mogą zalogować się do portfela i zatwierdzać transakcje (to znaczy wszechobecność frazy seed). StarkNet nie obsługuje secp256r1 i posiada własną krzywą własnościową, która jest krzywą przyjazną dla STARK. Jednak w przeciwieństwie do innych sieci blockchain, StarkNet ma dostęp do konta na swojej platformie, co otwiera nowy świat możliwości korzystania z portfela. Braavos wykorzystał tę możliwość do wprowadzenia podpisu sprzętowego.
## Podpisujący sprzętowy
Podpisujący sprzęt składa się z dwóch głównych części:
* Bezpieczny podsystem na urządzeniu mobilnym użytkowników* Inteligentny kontrakt na konto, który może uruchamiać arbitralną logikę (alias: Abstrakcja konta)
## Bezpieczny podsystem
Podpisujący sprzęt wykorzystuje bezpieczny podsystem wbudowany w urządzenie użytkownika — iPhone**Secure Enclave**lub**Titan**HSM Android Phone - w celu ochrony konta. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) Secure Enclave / Tytan chip to dedykowany i odizolowany podsystem, całkowicie oddzielone od procesora aplikacji, który może generować klucze prywatne i podpisywać wiadomości. Tworzy klucze za pomocą wewnętrznego generatora prawdziwych losowych liczb (TRNG) i znaków na krzywej eliptycznej NIST-P256 (secp256r1) za pośrednictwem wewnętrznego akceleratora klucza publicznego (PKA). Klucze prywatne nigdy nie opuszczają bezpiecznego systemu i są nieznane/niedostępne dla każdego, nawet dla użytkownika, ani dla samej aplikacji. Oznacza to, że nawet jeśli kernel aplikacji urządzenia zostanie zagrożony, klucze użytkownika będą bezpieczne! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Głębokiej Złóż w bezpieczną Enklawę
Podczas procesu produkcji chipów UID (niepowtarzalny identyfikator) jest generowany przez TRNG i jest przechowywany w PKA. Nie można go odczytywać i nigdy nie opuszczać PKA, W związku z tym nie jest on znany nawet procesorowi Secure Enclave i procesorowi bezpieczeństwa (SepOS). Ten UID jest losowym numerem, który jest unikalny dla każdego urządzenia i jest używany do szyfrowania wszystkich innych kluczy, które będą generowane w przyszłości na tym urządzeniu. Funkcja jest następująca: aplikacja zażąda SepOS aby wygenerował nową parę kluczy, SepOS poleci TRNG Secure Enclave by wygenerował klucz i zaszyfrował go (używając UID). Aplikacja może poprosić SepOS o odszyfrowywanie klucza i podpisanie wiadomości przy użyciu wygenerowanego klucza. Podczas całego procesu wygenerowany klucz nie opuszcza enklawy i jest dla nikogo nieznany. (Więcej informacji na temat Secure Enclave znajduje się w[tutaj](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)). Sposób, w jaki zbudowana i działa bezpieczna Enklawa, wraz z faktem, że jest to cel ataków potężnych korporacji i rządów na całym świecie, jest powodem, dla którego bezpieczeństwo przekracza standardowe portfele sprzętowe.
## Streszczenie konta
Moc Braavos jako inteligentnego portfela opartego na kontraktach na platformie StarkNet polega na tym, że składa się on z dwóch filarów:
* Strona klienta (np. aplikacja), która umożliwia użytkownikowi przeglądanie/podpisywanie transakcji i wysyłanie ich do łańcucha. * Strona łańcucha — posiada inteligentny kontrakt na konto, który może prowadzić arbitralną logikę; a w szczególności w naszym przypadku, wykonaj dowolny podpis**weryfikacji**. Aplikacja podpisuje transakcję za pomocą modułu bezpieczeństwa urządzenia mobilnego, a następnie wysyła ją do umowy konta, która może ją zweryfikować. Jak wspomniano powyżej, moduł bezpieczeństwa na iPhone'ach i telefonach z Androidem używa kryptografii o nazwie NIST-P256 (secp256r1), który nie jest zgodny z żadnym głównym schematem kryptograficznym blockchain, w tym ze StarkNet. Dlatego też inteligentne konto kont kont kont w łańcuchu, przez które przechodzą wszystkie transakcje i może prowadzić arbitralną logikę, ma kluczowe znaczenie dla wykorzystania tych HSMów na iPhone'ach i telefonach z Androidem. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## Biometria
W jaki sposób użytkownik zatwierdza transakcję za pośrednictwem portfela Braavos? Czy złośliwa aplikacja może po prostu automatycznie podpisywać transakcję bez zgody użytkownika? Nie!! Wspaniała rzecz o wbudowanym module bezpieczeństwa w urządzeniach mobilnych, takich jak Secure Enclave, polega na tym, że obsługuje nierozerwalnie biometryczne uwierzytelnianie tożsamości użytkownika. Oznacza to, że nawet faktyczna zgoda na podpisanie transakcji jest dokonywana bezpośrednio w porównaniu z bezpieczną Enklawą. Zatwierdzenie nie obejmuje wniosku i użytkownik będzie musiał zatwierdzić transakcję z odciskiem palca lub identyfikacją twarzy.
## Odzyskiwanie
Jeśli nikt nie zna klucza prywatnego, co się stanie, jeśli urządzenie zostanie zgubione lub zablokowane? Jak użytkownik może odzyskać kontrolę nad kontem? W Braavos konto będzie miało 2 klucze publiczne — klucz Signer sprzętu, który będzie używany do podpisywania wszystkich transakcji, oraz klucz wynikowy z frazy ziaren, która może podpisać tylko jedną transakcję — "Prośba o usunięcie podpisującego sprzęt". To żądanie nie zostanie wykonane natychmiast, ale raczej będzie miał 4 dni (konfigurowalne) w celu umożliwienia użytkownikowi korzystania z podpisującego urządzenia do anulowania takiego żądania. Oznacza to, że jeśli urządzenie zostanie skradzione/utracone/zablokowane, użytkownicy nadal będą mogli odzyskać swoje konto w ciągu 4 dni. Jeśli jednak ich Fraza Seed zostanie skradziona i napastnik zgłosi prośbę o usunięcie podpisującego sprzęt, użytkownik automatycznie (i wielokrotnie) otrzyma powiadomienie na swoim urządzeniu mobilnym i będzie w stanie anulować żądanie i zachować bezpieczeństwo wszystkich aktywów.
## Summary
Funkcja Podpisujący Sprzęt oferuje zarówno najnowocześniejszy poziom bezpieczeństwa dla użytkowników kryptowalut, jak i doświadczenie użytkowników są używane od strony internetowej2. W tym sensie podpisanie transakcji jest tak płynne i niepokojące jak zapłacenie przez Apple/Google. Jest to tylko jeden, ale znakomity przykład potęgi StarkNet, inteligentnego portfela opartego na kontraktach (a. .a Abstrakcja konta) i nowe miejsce projektowe, które włącza. Przewidujemy rozwój coraz większej liczby nowych zdolności, które poprowadzą przemysł kryptowalutowy do lepszej przyszłości bardziej sprzyjającej włączeniu społecznemu. zapewnienie nowym i istniejącym użytkownikom bezkompromisowego bezpieczeństwa w połączeniu z bezkompromisowym UX.