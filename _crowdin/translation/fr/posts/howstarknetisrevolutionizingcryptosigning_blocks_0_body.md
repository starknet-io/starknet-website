# Comment StarkNet révolutionne la signature cryptographique
## *Exit les clés complexes, place à l'identification faciale. Une étude de cas sur l'abstraction de compte*
Dès que les gens pourront utiliser des méthodes familières comme l'identification faciale pour signer des transactions cryptographiques, nous assisterons à un boom de l'auto-garde. Tout le monde sait que la gestion de votre propre portefeuille est l'idéal de la cryptographie d'origine, mais c'est intimidant et les gens adoptent plutôt les échanges. Il s'agit d'une étude de cas sur la façon dont une fonctionnalité StarkNet appelée Account Abstraction est utilisée par Braavos pour obtenir une manière beaucoup plus intuitive d'utiliser votre portefeuille.
## Présentation de l'abstraction de compte
Après le scandale FTX, la question est plus que jamais d'actualité. Pourquoi les gens choisissent-ils encore de donner leur crypto à des institutions centralisées, plutôt que de le garder eux-mêmes ? La réponse : pour la plupart des gens, l'auto-garde est compliquée. Les phrases de départ sont le "pire meilleur" mécanisme de récupération, en dissuadant beaucoup (même certains des dégénérés les plus endurcis). La réponse à ce défi : Account Abstraction. L'abstraction de compte permet aux portefeuilles de répondre (et de dépasser) les attentes UX des utilisateurs Web2, telles que la signature d'une transaction à l'aide de Face ID ou l'utilisation d'une authentification à deux facteurs. Il facilite la segmentation des comptes et les limites de dépenses ; et permet finalement une récupération simple du compte et la suppression de la phrase de départ. C'est une révolution pour l'UI et l'UX.
## Starknet
StarkNet, le principal Validity Rollup, possède plusieurs caractéristiques clés qui en font la solution la plus prometteuse pour faire évoluer Ethereum. Basé sur des preuves STARK, il offre des frais de gaz peu élevés sans compromettre la sécurité d'Ethereum. Le bilan des preuves STARK alimentant StarkEx comprend 800 milliards de dollars en volume de transactions cumulé, 300 millions de transactions et 90 millions de NFT. Les capacités des preuves STARK à fournir des frais peu élevés, associées à la puissance de l'abstraction de compte, ont permis à Braavos de développer les capacités de portefeuille innovantes qu'il vise.
## Contexte
La plupart des principales chaînes de blocs, y compris Bitcoin et Ethereum, utilisent les schémas de signature cryptographique à courbe elliptique secp256k1 (voir[ici](http://ethanfast.com/top-crypto.html)pour une liste complète). Cette implémentation de courbe elliptique est considérée comme robuste - de nombreuses blockchains l'utilisent et elle a résisté à l'épreuve du temps. Mais il n'est pas compatible avec le schéma de signature cryptographique disponible dans les modules de sécurité matérielle (HSM) des appareils mobiles, tels que les iPhones et les téléphones Android (Pixel et autres). Ces appareils utilisent une autre courbe - secp256r1 (également appelée NIST-P256). Cela signifie que les utilisateurs de ces blockchains ne peuvent pas profiter des puces de sécurité de leurs appareils et doivent utiliser par défaut des portefeuilles matériels s'ils souhaitent obtenir un niveau de sécurité élevé. Cela limite considérablement toute innovation UX sur la façon dont les utilisateurs peuvent se connecter à un portefeuille et approuver les transactions (d'où l'omniprésence des phrases de départ). StarkNet ne prend pas en charge secp256r1 et possède sa propre courbe propriétaire qui est une courbe compatible avec STARK. Mais contrairement à d'autres blockchains, StarkNet a une abstraction de compte disponible nativement sur sa plate-forme, ce qui ouvre un nouveau monde d'opportunités UX pour les applications de portefeuille. Braavos a exploité cette capacité pour introduire le Hardware Signer.
## Le signataire du matériel
Le Hardware Signer se compose de deux parties principales :
* Le sous-système sécurisé dans l'appareil mobile des utilisateurs * Le contrat intelligent de compte qui peut exécuter une logique arbitraire (alias Account Abstraction)
## Sous-système sécurisé
Le signataire matériel utilise le sous-système sécurisé intégré à l'appareil de l'utilisateur — l'iPhone**Secure Enclave**ou le HSM**Titan**du téléphone Android — pour protéger le compte. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) La puce Secure Enclave / Titan est un sous-système dédié et isolé, totalement séparé du processeur applicatif qui peut générer des clés privées et signer des messages. Il génère les clés à l'aide d'un générateur de nombres aléatoires réels (TRNG) interne et signe les messages sur la courbe elliptique NIST-P256 (secp256r1) via son accélérateur de clé publique (PKA) interne. Les clés privées ne quittent jamais le système sécurisé et sont inconnues/inaccessibles à quiconque, pas même à l'utilisateur, ni à l'application elle-même. Cela signifie que même si le noyau du processeur d'application de l'appareil est compromis, les clés utilisateur restent en sécurité ! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Plongez plus profondément dans l'enclave sécurisée
Pendant le processus de fabrication de la puce, un UID (Unique Identifier) est généré par le TRNG et est stocké dans le PKA. Il ne peut pas être lu et ne quitte jamais la PKA, il est donc inconnu même du processeur Secure Enclave et du système d'exploitation du processeur Secure Enclave (SepOS). Cet UID est un nombre aléatoire unique par appareil et sert à chiffrer toutes les autres clés qui seront générées à l'avenir sur cet appareil.\ Le fonctionnement est le suivant : l'application demandera au SepOS de générer une nouvelle clé -pair, le SepOS demandera au Secure Enclave TRNG de générer une clé et de la chiffrer (à l'aide de l'UID). L'application peut alors demander au SepOS de déchiffrer la clé et de signer un message à l'aide de la clé générée. Pendant tout ce processus, la clé générée ne quitte pas l'enclave et n'est connue de personne. (Pour plus d'informations sur Secure Enclave, veuillez consulter[ici](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)). La façon dont Secure Enclave est construite et fonctionne, ainsi que le fait qu'elle est la cible d'attaques de puissantes entreprises et de gouvernements du monde entier, est la raison pour laquelle sa sécurité surpasse les portefeuilles matériels standard.
## Abstraction de compte
La puissance de Braavos en tant que portefeuille basé sur un contrat intelligent au-dessus de StarkNet, est qu'il est composé de deux piliers :
* Le côté client (par exemple l'application) qui permet à l'utilisateur de vérifier/signer des transactions et de les envoyer à la chaîne. * Le côté en chaîne - a un contrat intelligent de compte qui peut exécuter une logique arbitraire ; et en particulier dans notre cas, exécutez la logique arbitraire de signature**vérification**. L'application signe la transaction à l'aide du module de sécurité de l'appareil mobile, puis l'envoie au contrat de compte en chaîne qui peut la vérifier. Comme mentionné ci-dessus, le module de sécurité des iPhones et des téléphones Android utilise une cryptographie appelée NIST-P256 (secp256r1), qui n'est compatible avec aucun schéma cryptographique majeur de blockchain, y compris StarkNet. C'est pourquoi il est crucial d'avoir un compte de contrat intelligent en chaîne par lequel toutes les transactions passent et qui peuvent exécuter une logique arbitraire pour utiliser ces HSM sur les iPhones et les téléphones Android. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## Biométrie
Comment l'utilisateur approuve-t-il une transaction via le portefeuille Braavos ? Une application malveillante peut-elle simplement signer automatiquement une transaction sans le consentement de l'utilisateur ? Non!! L'avantage du module de sécurité intégré dans les appareils mobiles, tels que Secure Enclave, est qu'il prend en charge l'authentification intrinsèquement biométrique de l'identité de l'utilisateur. Cela signifie que même l'approbation réelle de signer une transaction est effectuée directement par rapport à Secure Enclave. L'approbation ne passe pas par l'application et l'utilisateur devra approuver la transaction avec son empreinte digitale ou son identification faciale.
## Récupération
Si personne ne connaît la clé privée, que se passe-t-il si l'appareil est perdu ou bloqué ? Comment l'utilisateur peut-il reprendre le contrôle du compte ? Dans Braavos, un compte aura en fait 2 clés publiques - la clé Hardware Signer, qui sera utilisée pour signer toutes les transactions, et la clé dérivée de la phrase de départ qui ne peut signer qu'une seule transaction - une "Demande de suppression du Hardware Signer". Cette demande ne sera pas exécutée immédiatement, mais aura un délai de 4 jours (configurable) afin de permettre à l'utilisateur d'utiliser le Hardware Signer pour annuler une telle demande. Cela signifie que si l'appareil est volé/perdu/briqué, les utilisateurs pourront toujours récupérer leur compte dans les 4 jours. Cependant, si leur phrase de départ est volée et qu'un attaquant émet une demande de suppression du signataire du matériel, l'utilisateur recevra automatiquement (et à plusieurs reprises) une notification sur son appareil mobile et pourra annuler la demande et garder tous les actifs en sécurité. .
## Résumé
La fonctionnalité Hardware Signer offre à la fois un niveau de sécurité de pointe pour les utilisateurs de chiffrement et l'expérience à laquelle les utilisateurs sont habitués à partir de web2. En ce sens, signer une transaction est aussi simple et sans souci que de payer avec Apple/Google Pay. Ce n'est qu'un exemple, mais éminent, de la puissance de StarkNet, un portefeuille intelligent basé sur des contrats (alias Account Abstraction) et du nouvel espace de conception qu'il permet. Nous prévoyons le développement de capacités de plus en plus naissantes qui conduiront l'industrie de la cryptographie vers un avenir meilleur et plus inclusif, offrant aux utilisateurs nouveaux et existants une sécurité sans compromis associée à une UX sans compromis.