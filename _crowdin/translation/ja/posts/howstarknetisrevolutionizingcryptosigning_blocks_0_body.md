# StarkNetが暗号署名に革命を起こしている方法
## *複雑なキーで、顔IDを持つ。 アカウント抽象化に関する事例研究*
人々が直面するIDのような身近なメソッドを使って暗号取引に署名することができる瞬間、私たちは自身を保護するブームを見るでしょう。 誰もが自分の財布を実行することが元の暗号化理想であることを知っていますが、それは威圧的であり、代わりに人々が交換を受け入れています。 これはBraavosが、ウォレットをより直感的に利用するためにStarkNetの機能であるAccount Abstractionがどのように使用されているかのケーススタディです。
## アカウント抽象化の紹介
FTXスキャンダルの後、問題はこれまで以上に重要です。 なぜ人々はまだ自分自身を管理するのではなく、自分の暗号を中央集権化された機関に与えることを選択するのですか? 答え:ほとんどの人にとって、自己管理は複雑です。 シードフレーズは、「最悪」の回復メカニズムです。多くを阻止します(最も硬化したデゲンのいくつかです)。 このチャレンジの答え:アカウント抽象化。 アカウント抽象化により、ウォレットはWeb2ユーザーのUX期待を満たし、超えることができます。 例えば、Face ID または 2 要素認証を使用してトランザクションに署名するなど。 アカウントの分割と支出制限を容易にし、最終的には簡単なアカウント復旧とシードフレーズの削除を可能にします。 UIとUXの革命です。
## StarkNet
主要なValidity RollupであるStarkNetには、Ethereumを拡張するための最も有望なソリューションとなるいくつかの重要な特徴があります。 STARK証明に基づいて、Ethereumセキュリティを損なうことなく、低ガス料金を提供します。 StarkExを動力とするSTARKプルーフの実績には、累積取引量、300M取引、および90M NFTに800Bが含まれています。 STARKの機能は、低い手数料を提供し、アカウント抽象化の力と組み合わせて証明します。 ブラヴォスは、それが目指している革新的な財布機能を開発することを許可しました。
## コンテキスト
Bitcoin や Ethereum を含むほとんどの主要なブロックチェーンは、secp256k1 楕円曲線暗号署名スキームを使用しています (包括的なリストについては、ここの[](http://ethanfast.com/top-crypto.html)参照してください)。 この楕円曲線の実装は堅牢であると考えられています — 多くのブロックチェーンがそれを使用し、時間のテストを立てていました。 しかし、モバイルデバイスのハードウェアセキュリティモジュール(HSM)で利用可能な暗号署名方式と互換性がありません。 iPhoneやAndroid(ピクセルやその他の)携帯電話など。 これらのデバイスは、別のカーブである secp256r1 (NIST-P256 とも呼ばれる) を使用しています。 これは、これらのブロックチェーンのユーザーが自分のデバイス上のセキュリティチップを利用することができず、強力なレベルのセキュリティを獲得したい場合はハードウェア財布にデフォルトを設定する必要があることを意味します。 これにより、ユーザーがウォレットにサインインしてトランザクションを承認する方法について、UXのイノベーションが大きく制限されます(したがって、シードフレーズの遍在性)。 StarkNetはsecp256r1をサポートしておらず、STARKに優しい曲線である独自の曲線を持っています。 しかし、他のブロックチェーンとは異なり、StarkNetはプラットフォーム上でネイティブにアカウント抽象化を利用できるため、ウォレットアプリの新しいUX機会が開かれます。 Braavosはハードウェア署名者を導入するためにこの機能を利用しました。
## ハードウェア署名
ハードウェア署名者は以下の2つの主要部分で構成されています:
* ユーザーのモバイルデバイスにおける安全なサブシステム *任意のロジックを実行できるアカウントスマートコントラクト（別名、アカウント概要）
## セキュアなサブシステム
ハードウェア署名者は、ユーザーのデバイスに内蔵されているセキュアなサブシステムを利用します — iPhoneの**Secure Enclave**または Android Phoneの**Titan**HSM — はアカウントを保護します。 ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) Secure Enclave / Titan チップは、専用の絶縁型サブシステムです。 秘密鍵と署名メッセージを生成できるアプリケーションプロセッサから完全に分離されています。 内部の真の乱数ジェネレータ(TRNG)を使用してキーを生成し、その内部の公開鍵アクセラレータ(PKA)を介してNIST-P256(secp256r1)楕円曲線上のメッセージに署名します。 秘密鍵は決して安全なシステムを離れることはなく、誰にもアクセスできない/ユーザーにも、またはアプリケーション自体にもアクセスできません。 つまり、デバイスアプリケーションプロセッサカーネルが危険にさらされたとしても、ユーザーキーは安全に保たれます。 ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## 安全な飛び地に深く潜りましょう
チップ製造工程では、TRNGによってUID(Unique Identifier)が生成され、PKAに保存されます。 それは読むことができず、決してPKAを離れません。 したがって、Secure EnclaveプロセッサおよびSecure Enclaveプロセッサオペレーティングシステム(9月)にさえも不明です。 この UID は、デバイスごとに一意な乱数であり、将来このデバイスで生成される他のすべてのキーを暗号化するために使用されます。 動作方法は次のとおりです。アプリケーションは SepOS に新しいキーペアの生成を要求します。 SepOSは、Secure Enclave TRNGに鍵を生成し、(UIDを使用して)暗号化するよう指示します。 その後、アプリは SepOS から鍵の復号を要求し、生成された鍵を使ってメッセージに署名することができます。 このプロセス全体の間、生成されたキーは飛び地から離れず、誰にも知られていません。 (Secure Enclaveの詳細については、こちら[をご覧ください](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web))。 Secure Enclaveが構築され動作する方法 世界中の強大な企業や政府の攻撃の標的であるという事実に加えて セキュリティが標準のハードウェアウォレットを超えている理由です
## アカウントの抽象化
StarkNetの上にあるウォレットに基づくスマートコントラクトとしてのBraavosの力は、2つの柱で構成されていることです。
* クライアント側(アプリケーションなど)は、ユーザーがトランザクションをレビュー/署名し、チェーンに送信することを可能にします。 * チェーン側には、任意のロジックを実行できるアカウントのスマートコントラクトがあります。 特に私たちの場合は、任意の署名**検証**ロジックを実行します。 アプリケーションは、モバイルデバイスのセキュリティモジュールを使用してトランザクションに署名し、それを検証できるアカウント契約チェーンに送信します。 上記のように、iPhoneとAndroid携帯電話のセキュリティモジュールは、NIST-P256 (secp256r1) と呼ばれる暗号化を使用します。 StarkNetを含む主要なブロックチェーン暗号方式と互換性がありません。 このため、すべてのトランザクションを経由して任意のロジックを実行できるスマートコントラクトアカウントをチェーン内に保持することができます。 iPhoneやAndroidの携帯電話でこれらのHSMを利用するために不可欠です。 ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## 生体認証
Braavosウォレットを介してユーザーが取引を承認するにはどうすればよいですか? 悪意のあるアプリケーションは、ユーザーの同意なしに単にトランザクションに自動的に署名することができますか? いいえ！ Secure Enclaveなどのモバイルデバイスに組み込まれているセキュリティモジュールの素晴らしいところ。 本質的に生体認証をサポートしていることです つまり、トランザクションに署名するための実際の承認でさえ、Secure Enclaveに対して直接行われるということです。 承認は、アプリケーションを通過しません, そして、ユーザーは、彼の指紋または顔の識別で取引を承認する必要があります.
## 回復
誰も秘密鍵を知らない場合、デバイスが紛失したり、壊れたりした場合はどうなりますか? ユーザーはどのようにアカウントのコントロールを得ることができますか? Braavosでは、アカウントには実際には2つの公開鍵があります — すべてのトランザクションに署名するために使用されるハードウェア署名キー。 そして、1つのトランザクションのみに署名できるシードフレーズから派生したキー — 「ハードウェア署名者を削除するリクエスト」。 このリクエストは直ちに実行されません しかし、むしろ、ユーザーがハードウェア署名者を使用してそのようなリクエストをキャンセルできるようにするために、4日の遅延(設定可能)があります。 つまり、デバイスが盗難/紛失/レンガ化された場合でも、ユーザーは4日以内にアカウントを回復することができます。 しかし、シードフレーズが盗まれ、攻撃者がハードウェア署名者を削除する要求を発行した場合。 ユーザーは自動的に(そして繰り返し)自分のモバイルデバイスに通知を受け取り、リクエストをキャンセルし、すべての資産を安全に保つことができます。
## Summary
Hardware Signer機能は、暗号ユーザーのための最先端のセキュリティレベルの両方を提供し、ユーザーはWeb2から使用されています。 この意味で、トランザクションに署名することは、Apple/Googleの支払いと同じくらいスムーズで心配することはありません。 これは、StarkNetの力、スマートコントラクトベースの財布の例です(a. .a Account Abstraction)とそれが可能にする新しいデザインスペース。 私たちは、暗号業界をより良く、より包括的な未来に導くますます新生機能の開発を期待しています。 新しいユーザーと既存ユーザーに妥協のないUXと組み合わせて、妥協のないセキュリティを提供します。