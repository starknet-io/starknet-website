### TL;DR

L2 原生 dApp 现在可以不受传统 L1 Gas 限制的影响而蓬勃发展

### 导 言

由于以太坊（L1）的区块 Gas 限制，dApp 开发人员一直面临着严格的限制。 它不仅限制*这些 dApp 的运行方式*，还限制*这些 dApp 能够执行的操作*。

第 2 层 (L2) 为 dApp 开发人员提供了一个计算绿地，摆脱了这种气体玻璃天花板。 我们相信，绝大多数 dApp 将在几年内成为 L2 原生：它们将在 L2 上从头开始构建，以便从这种计算自由度中受益。

### L1 气体限制了 L1 原生 dApp 的形态

*让我们考虑两个流行 dApp 的例子，它们的设计深受 L1 Gas 约束的影响：AMM 和 DEX 聚合器。*

自动做市商（AMM）本质上是基于订单簿的交易所的低gas近似。 L1 AMM 不允许用户设置和删除限制、止损或各种其他订单类型，而是只允许与中央基础流动性池进行简单的交换，以适应 L1 的大量计算成本。

理想情况下，DEX 聚合器需要访问所有可能的流动性池，甚至是最小的流动性池，以便为用户提供最佳价格。 然而，由于查询许多不同池的成本，根本不值得通过 L1 进行交易。 只有当流动性池具有足够深度的流动性时，才可以合理地进入池子并支付相关的交易费用。 同样，如果清算折扣和交易费用之间的差异小得多，借贷和其他基于抵押品的 dApp 的清算可能会更加准确。

许多 L1 dApp 的功能和设计有限，直接是由于开发人员优化代码以遵守以太坊的 Gas 限制而导致的。 你可能会问，为什么我们说以太坊？ Solidity 代码不能在许多 L1 甚至某些 L2 上运行吗？ 事实上，但其中，以太坊是最昂贵（因此也是最安全）的环境。 Solidity dApp 是为“最昂贵的链接”（即以太坊）而设计的。 因此，它们无法受益于较便宜的运行时环境所提供的计算优势。 为了通过为最昂贵的运行时环境设计 dApp 来解锁放弃的功能，必须调整 dApp 的代码。

### L2 原生 dApp 的兴起

有效性汇总（又名 ZK-Rollups）可实现极其廉价的计算。 与任何其他扩展解决方案不同的是，L2 计算可以呈指数级增长，而对链上验证 Gas 成本的影响很小。 此外，有效性汇总会处理计算的输入（“见证数据”），而不消耗额外的 L1 资源，从而允许使用许多输入进行计算。

在**[Cairo](https://www.cairo-lang.org/)**（一种通过 STARK 证明扩展 dApp 的图灵完备语言）中的 L2 上本地编码 dApp 为开发人员释放了广阔的可能性。 它使他们能够使用以前无法使用的大量数据（包括计算数据和见证数据）。

让我们探索此类 L2 原生 dApp 及其新的、丰富的功能。

#### DeFi

在加入 StarkEx（StarkWare 的有效性汇总）之前，dYdX 在以太坊上作为 L1 dApp 运行。 它为用户提供 10 倍的合成资产杠杆，并仅使用一种合成资产支持头寸。 在开罗将 dYdX 重建为 L2 原生 dApp，提供了一个显着更具可扩展性、更便宜且高效的 DeFi 平台：

* Oracle 价格更新：此类更新通常包括来自不同来源的数十个价格和签名，以计算中位数。 有效性汇总提供了价格预言机逻辑的指数扩展（签名验证和中位价格的计算），而无需向 L1 报告见证数据。 与 dYdX 的 L1 实现相比，每次价格预言机更新花费约 300K Gas，因此其频率和价格报告者集的大小受到限制。
* 杠杆：准确的价格反馈使 dYdX 能够实时估计仓位的风险，并为用户提供更高的杠杆。 由于预言机价格更新的改进，dYdX 将杠杆率从 L1 上的 x10 增加到 L2 上的 x25。
* 全仓保证金：通过 L2 上的 dYdX，做市商可以使用相同的抵押品对多种资产下多头/空头订单。 dYdX L2 上的平均结算涉及超过 10 种不同合成资产的头寸！ 相比之下，在 L1 上拥有这种交叉保证金能力将使链上 Gas 成本增加一倍以上。

#### 游戏和生成艺术

目前的 L1 原生游戏通常将游戏资产存储在 L1 上，同时在可信的链下应用程序中实现整个游戏逻辑。 这种模式是 L1 的 Gas 限制的直接结果。 由于 L2 上的计算成本低廉，L2 原生游戏 dApp 的开发人员现在可以在智能合约中实现游戏逻辑，并以无需信任的方式操纵游戏资产，而不仅仅是存储它们。 将游戏逻辑带入无需信任的计算领域是迈向更加丰富的基于区块链的游戏世界的重要一步。 L2 原生游戏已经在 StarkNet（StarkWare 的无许可网络）上开发（例如[Dope Wars](https://github.com/dopedao/RYO)和[Influence](https://medium.com/influenceth/influence-to-launch-on-starknet-afd3c26ea25a)）。

但是，基于区块链的游戏到底有多复杂？ 例如，直接在链上处理图形似乎是不可能的[还是](https://twitter.com/guiltygyoza/status/1449637155001798657)？ 在智能合约中求解微分方程和模拟平面运动代表着朝着未来区块链物理引擎迈出的重要一步。 其影响是巨大的。 想象一下像《反恐精英》这样的多人竞技游戏。 如果可以在链上模拟游戏逻辑，许多可怕的黑客行为将成为过去——玩家可以享受一场可证明公平的游戏。

生成艺术使用计算、随机性和其他数据来创建基于区块链的艺术。 艺术家可以不信任地使用越复杂的逻辑和计算，产生独特的奇异艺术作品的选择就越多。 [WhaleStreet DAO](https://blog.whalestreet.xyz/whalestreet-dao-to-launch-gen-art-ecosystem-on-ethereum-with-starknet/)正在 StarkNet 上启动首批 Gen Art 项目之一，利用 StarkNet 的无限计算资源。

### 下一步是什么？

Validity Rollups（尤其是由 Cairo 支持的 StarkEx 和 StarkNet）提供了一种环境，可以在其中开发和操作消耗大量计算或见证数据的 dApp。 凭借分布式账本技术的所有优势，我们预测 L2 原生 dApp 的未来将非常令人兴奋。

通过可组合性、去信任性和去中心化支持的通用计算，*you*可以创建什么？