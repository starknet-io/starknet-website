### TL;DR

* StarkWare 提供一系列数据可用性 (DA) 模式供客户根据其优先级进行选择
* STARK 证明的数据可用性有三种方法，所有这些方法都已在生产中使用：\
  —**Rollup**：账本直接发布在区块链上\
  —**Validium**：数据可用性委员会保护账本，仅将哈希值存储在链上\
  —**Volition**：应用程序可以让用户为每笔交易选择其 DA 模式 — Rollup 或 Validium
* 无论使用哪种DA——所有交易的有效性均由STARKs保证

### 导 言

截至 2022 年 11 月，[StarkEx](https://starkware.co/starkex/)已结算超过 7500 亿美元的交易量，以及超过 2.7 亿笔以太坊交易。 在 NFT 领域，StarkEx 为 ImmutableX 和 Sorare 等应用程序提供支持，已铸造了超过 8500 万个 NFT，其价格比直接在以太坊上便宜 1000 倍。 基于 STARK 的技术正在扩展以太坊。 例如，在一周内，StarkEx 运行的交易数量是以太坊的 1.6 倍（StarkEx 上的交易数量为 1200 万，以太坊上的交易数量为 750 万），同时占用的以太坊区块空间不到 0.1%。 它在完成所有这一切的同时，为用户提供了与直接在以太坊上结算相同级别的安全性。

### StarkWare 是如何实现这一目标的？

用户在第 2 层（StarkEx 或 StarkNet）上发送交易，这些交易将被批量发送到 STARK 证明者。 这个 STARK 证明者知道处理这些交易之前和之后账本的状态。 证明者生成 STARK 证明，证明这些交易执行后账本新状态的有效性。 新状态和 STARK 证明被发送到链上 STARK 验证者。 该证明的验证通过以太坊上的不可变智能合约自动进行。

这种架构提供了两全其美的优点：我们可以降低交易成本，同时仍然让以太坊作为中立仲裁者处于中间。 以太坊作为仲裁者不仅是一个可有可无的东西，而且是一个可有可无的东西。它为最终用户提供了关键的安全性。 交易的用户现在可以确信他们的资金受到以太坊的保护，并且一旦在以太坊上验证交易就不可更改。 用户还对其资金拥有完全的自我托管权。 自我托管很重要，因为它确保用户可以随时使用自己的资金，而无需依赖任何第三方。

### 数据可用性在这一切中发挥着怎样的作用？

重要的是要强调这个证明正在做什么以及它是*而不是*在做什么。 证明证明了新状态的有效性，但它并没有告诉您新状态是什么。 为此，您需要数据可用性。 如果我们只有证明，那么区块链知道提交的内容是有效的，但它不知道新状态（例如账本余额）是什么！ 该数据的消费者包括在这些证明中进行交易的用户。 如果他们想在以太坊上提取资金而不需要信任第 2 层运营商，则应该向他们提供数据。 这使用户可以完全自行保管其资金。

一个类比是你的高中老师要求你证明 x 等于 x。 证明这一点是微不足道的。 更难回答的是：x 实际上等于什么？ 为此，您需要一条单独的信息。 x 可能等于 5 或其他值。 同样，在区块链上，可以将 STARK 证明提交给 STARK 验证者智能合约进行验证。 验证者可以证明该证明是有效的（x=x）。 但您需要一个单独的输入来告诉您 x（新的账本余额）是多少。

可通过三种方法提供此数据：

#### 汇总模式

Rollup 模式确保账本的状态与证明一起存储在以太坊上。 Rollup 模式目前被[dYdX](https://dydx.exchange/)在生产中使用，也被[Public StarkNet](http://starknet.io/)L2 网络使用。 这里的好处很明显：只需与以太坊区块链交互即可重新创建分类账的状态。 这意味着，作为最终用户，您可以与以太坊上的相关智能合约进行可信的对话，即使 Layer 2 系统关闭也可以提取您的资金。

#### 瓦利迪姆

在 Rollup 模式下，以太坊的大部分 Gas 成本都用于数据可用性，而不是证明验证。 这是因为在区块链上存储数据非常消耗燃料。 在 Validium 模式下，账本信息不会发送到以太坊。 相反，它通过数据可用性委员会存储在链下。 以太坊存储此分类帐信息的哈希值。 该数据可用性委员会由法定人数的独立成员组成，负责监督正确的状态更新并保留已处理数据的副本。 每个 StarkEx 实例都可以创建自己的仲裁。 StarkEx 上运行的现有应用程序的法定成员包括[Consensys](https://consensys.net/)、[Nethermind](https://nethermind.io/)、[Iqlusion](https://iqlusion.io/)和[Cephalopod](https://cephalopod.equipment/)等实体。

这里的好处是显而易见的。 无需支付以太坊汽油费即可将账本信息存储在链上。 相反，以太坊上存储的唯一内容是账本信息的单个哈希值。 如果您想通过与以太坊对话来以可信的方式从第 2 层提取资金，您只需要数据可用性委员会成员之一的数字签名即可。 DAC 成员将使用密码学来证明您拥有这些资金的所有权。

Validium 数据可用性的另一个隐藏好处是阅读区块链的人的机密性。 在 Rollup 模式下，每个证明提交时每个账户的余额都是公开的。 使用 Validium，这些数据对区块链是隐藏的——只有数据可用性委员会知道这一点，因为它保持在链外。 这种级别的机密性支持各种使用场景，其中混淆交易数据非常重要。

#### 自愿

Volition 是一种数据可用性架构，可在事务级别提供 Validium 和 Rollup 模式之间的选择。 它通过将一个分类账保留在链上，并将另一个分类账与数据可用性委员会保持在一起来实现这一点。 用户可以为每笔交易选择 Validium 和 Rollup 模式。

想象一下，您在 StarkEx 上运行的应用程序上购买了非常昂贵的 NFT，例如 Bored Ape 或 Cryptopunk。 您可能希望使用汇总模式来保护该 NFT 的数据，因为您希望将特定交易的记录存储在以太坊上。 然而，您随后可能会购买非常便宜的 NFT（例如区块链游戏中角色的斗篷），在这种情况下，您会很乐意通过使用 Validium 来省钱。

如果您对 STARK 证明所达到的规模感兴趣，那么请来我们的基础上继续发展。



您可以随时发送电子邮件[info@starkware.co](mailto:info@starkware.co)，会有专人回复您的电子邮件。