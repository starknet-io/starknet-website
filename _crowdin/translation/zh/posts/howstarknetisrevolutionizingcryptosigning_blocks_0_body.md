# StarkNet如何革新加密签名技术
## *抛弃复杂的钥匙，使用面部识别技术。 账户抽象化案例研究*
一旦人们可以使用熟悉的方法，如面部识别来签署加密交易，我们将看到自我托管的繁荣。 每个人都知道拥有自己的钱包是最初的加密货币理想，但这让人感到害怕，因此人们选择使用交易所。 这是一个案例研究，介绍了StarkNet功能之一的账户抽象如何被Braavos使用，以获得更直观的钱包使用方式。
## 介绍账户抽象化
在FTX丑闻之后，这个问题比以往任何时候都更加相关。 为什么人们仍然选择将他们的加密货币交给中央机构，而不是自己保管？ 答案：对于大多数人来说，自我托管是复杂的。 种子短语是最差但又是最好的恢复机制，阻止了许多人（甚至一些最顽固的变体）。 这个挑战的答案是：抽象化的账户。 账户抽象允许钱包满足（并超越）Web2用户的UX期望，例如使用Face ID签署交易或使用双因素身份验证。 它可以促进账户分割和支出限制；最终使简单的账户恢复和完全删除种子短语成为可能。 这是一场UI和UX的革命。
## 星网
StarkNet是领先的有效性Rollup，具有几个关键特征，使其成为扩展以太坊最有前途的解决方案。 基于STARK证明，它提供了低的燃气费用，而不会影响以太坊的安全性。 STARK证明在StarkEx上的记录包括8000亿美元的累计交易量，3亿次交易和9000万个NFT。 STARK证明提供低费用的能力，再加上账户抽象的强大功能，使得Braavos能够开发出其所追求的创新钱包功能。
## A. 背景
大多数主要的区块链，包括比特币和以太坊，使用secp256k1椭圆曲线加密签名方案（请参见[此处](http://ethanfast.com/top-crypto.html)获取全面列表）。 这个椭圆曲线实现被认为是健壮的 - 许多区块链使用它并经受住了时间的考验。 但它与移动设备硬件安全模块（HSM）中可用的加密签名方案不兼容，例如iPhone和Android（Pixel和其他）手机。 这些设备使用另一条曲线——secp256r1（也称为NIST-P256）。 这意味着使用这些区块链的用户无法利用其设备上的安全芯片，如果他们想获得强大的安全级别，则必须默认使用硬件钱包。 这严重限制了用户在钱包登录和批准交易方面的任何UX创新（因此，种子短语变得普遍） StarkNet不支持secp256r1，而是采用了一种专有的曲线，这是一种STARK友好型曲线。 但与其他区块链不同的是，StarkNet 在其平台上本地提供了账户抽象功能，为钱包应用程序开启了新的用户体验机遇。 Braavos利用这种能力推出了硬件签名器。
## 硬件签名者
硬件签名器由两个主要部分组成：
* 用户移动设备中的安全子系统 * 账户智能合同可以运行任意逻辑(a.k.a 账户摘要)
## 安全子系统
硬件签名器利用用户设备中内置的安全子系统——iPhone 的**安全区域**或 Android 手机的**Titan** HSM 来保护账户。 ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) 安全飞地/土豆芯片是一个专用和孤立的子系统。 完全与可以生成私钥和签名消息的应用程序处理器分离。 它使用内部的True Random Number 生成器（TRNG）生成密钥，并通过其内部公钥加速器（PKA）在NIST-P256（secp256r1）上标出一些信息。 私钥永远不会离开安全系统，任何人都不知道/无法进入，甚至用户也不知道或无法进入应用程序本身。 这意味着，即使设备应用程序处理器内核已经失密，用户密钥仍然安全！ ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## 深渊到安全飞地中
在芯片制造过程中，TRNG生成了一个UID(唯一标识)，储存在PKA中。 它是无法阅读的，永远不会离开维持和平行动部的。 因此，甚至安全飞地处理器和安全飞地处理器也不知道这一点。 此 UID 是一个随机的数字，是每个设备唯一的，用于加密将来在此设备上生成的所有其他密钥。 它的工作方式如下：应用程序将请求SepOS生成一个新的密钥对， SepOS 将指示安全飞地TRNG 生成一个密钥并加密它(使用UID)。 然后应用可以请求SepOS解密密密钥并使用生成的密钥签名一条消息。 在整个过程中，生成的密钥不会离开飞地，任何人都不知道。 (关于安全飞地的更多信息，请查看[这里](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web))。 安全飞地的建造和运作方式， 还注意到恐怖主义是世界各地强大的公司和政府攻击的目标， 其安全性超过标准硬件钱包的原因就在于此。
## 抽象化账户
Braavos作为一个基于StarkNet顶部的智能钱包合同的力量是它由两个支柱组成：
* 客户端(如应用程序)，允许用户查看/签署交易并发送到交易链。 * 链上——有一个帐户智能合约，可以运行任意逻辑； 尤其是在我们的情况下，运行任意签名**验证**逻辑。 应用程序使用移动设备安全模块来标示交易，然后将其发送到能够验证它的在链上的账户合同。 如上所述，iPhone和安卓手机上的安全模块使用了一个叫做NIST-P256的加密技术(secp256r1)， 它不兼容任何主要区块链加密方案，包括StarkNet。 这就是为什么所有交易都在链上拥有一个智能合同帐户，可以运行任意逻辑， 在使用 iPhone 和 Android 手机上的 HSMs 非常重要。 ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## 生物计
用户如何通过 Braavos 钱包批准交易？ 恶意应用程序是否可以在未经用户同意的情况下自动签名交易？ 不！！ 安全飞地等移动设备内置的安全模块很酷， 就是说，它支持对用户身份进行固有的生物鉴别认证。 这意味着即使实际批准交易也是直接相对于安全飞地的。 批准不会通过申请，用户将需要批准带有指纹或面部识别的交易。
## 恢复
如果没有人知道私人钥匙，如果设备丢失或变砖怎么办？ 用户如何获得对帐户的返回控制？ 在Braavos中，帐户实际上将有两个公钥——硬件签名密钥，用于签署所有交易。 和源自种子短语的密钥，它只能签名一个交易——“请求移除硬件Signer”。 此请求将不会立即执行。 但为了让用户能够使用硬件信号器来取消这种请求，将需要4天的时间间隔(可配置)。 这意味着，如果设备被盗/丢失/砖块，用户仍然能够在4天内收回他们的帐户。 但是，如果他们的种子短语被盗，攻击者发出清除硬件Signer的请求 用户将自动(多次)收到通知到他们的移动设备，并且能够取消请求并保证所有资产的安全。
## Summary
硬件签名功能为加密用户提供了最新的安全等级，体验用户可从web2获取。 从这个意义上说，签署交易与支付苹果/谷歌的付款一样顺利和无忧。 这只是StarkNet的一个突出的例子，即基于智能合同的钱包(a)。 .a 帐户摘要）及其新的设计空间。 我们预计将发展越来越多的新能力，使加密工业走向更美好和更具包容性的未来。 为新用户和现有用户提供安全不受损害的安全和不受损害的UX。