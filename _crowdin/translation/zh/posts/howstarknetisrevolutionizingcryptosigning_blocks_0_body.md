# StarkNet如何革新加密签名技术
## *抛弃复杂的钥匙，使用面部识别技术。 账户抽象化案例研究*
一旦人们可以使用熟悉的方法，如面部识别来签署加密交易，我们将看到自我托管的繁荣。 每个人都知道拥有自己的钱包是最初的加密货币理想，但这让人感到害怕，因此人们选择使用交易所。 这是一个案例研究，介绍了StarkNet功能之一的账户抽象如何被Braavos使用，以获得更直观的钱包使用方式。
## 介绍账户抽象化
在FTX丑闻之后，这个问题比以往任何时候都更加相关。 为什么人们仍然选择将他们的加密货币交给中央机构，而不是自己保管？ 答案：对于大多数人来说，自我托管是复杂的。 种子短语是最差但又是最好的恢复机制，阻止了许多人（甚至一些最顽固的变体）。 这个挑战的答案是：抽象化的账户。 账户抽象允许钱包满足（并超越）Web2用户的UX期望，例如使用Face ID签署交易或使用双因素身份验证。 它可以促进账户分割和支出限制；最终使简单的账户恢复和完全删除种子短语成为可能。 这是一场UI和UX的革命。
## 星网
StarkNet是领先的有效性Rollup，具有几个关键特征，使其成为扩展以太坊最有前途的解决方案。 基于STARK证明，它提供了低的燃气费用，而不会影响以太坊的安全性。 STARK证明在StarkEx上的记录包括8000亿美元的累计交易量，3亿次交易和9000万个NFT。 STARK证明提供低费用的能力，再加上账户抽象的强大功能，使得Braavos能够开发出其所追求的创新钱包功能。
## A. 背景
大多数主要的区块链，包括比特币和以太坊，使用secp256k1椭圆曲线加密签名方案（请参见[此处](http://ethanfast.com/top-crypto.html)获取全面列表）。 这个椭圆曲线实现被认为是健壮的 - 许多区块链使用它并经受住了时间的考验。 但它与移动设备硬件安全模块（HSM）中可用的加密签名方案不兼容，例如iPhone和Android（Pixel和其他）手机。 这些设备使用另一条曲线——secp256r1（也称为NIST-P256）。 这意味着使用这些区块链的用户无法利用其设备上的安全芯片，如果他们想获得强大的安全级别，则必须默认使用硬件钱包。 这严重限制了用户在钱包登录和批准交易方面的任何UX创新（因此，种子短语变得普遍） StarkNet不支持secp256r1，而是采用了一种专有的曲线，这是一种STARK友好型曲线。 但与其他区块链不同的是，StarkNet 在其平台上本地提供了账户抽象功能，为钱包应用程序开启了新的用户体验机遇。 Braavos利用这种能力推出了硬件签名器。
## 硬件签名者
硬件签名器由两个主要部分组成：
* 用户移动设备中的安全子系统 * 可以运行任意逻辑的账户智能合约（又名账户抽象）
## 安全子系统
硬件签名器利用用户设备中内置的安全子系统——iPhone 的**安全区域**或 Android 手机的**Titan** HSM 来保护账户。 ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) Secure Enclave / Titan 芯片是一个专用且隔离的子系统，与可以生成私钥和签名消息的应用处理器完全分离。 它使用内部真随机数生成器 (TRNG) 生成密钥，并通过其内部公钥加速器 (PKA) 在 NIST-P256 (secp256r1) 椭圆曲线上签署消息。 私钥永远不会离开安全系统，任何人都不知道/无法访问，甚至用户或应用程序本身也不知道。 这意味着即使设备应用程序处理器内核受到损害，用户密钥也保持安全！ ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## 深入研究安全飞地
在芯片制造过程中，TRNG 生成 UID（唯一标识符）并将其存储在 PKA 中。 它无法读取并且永远不会离开 PKA，因此即使对于 Secure Enclave 处理器和 Secure Enclave 处理器操作系统 (SepOS) 来说也是未知的。 该 UID 是一个随机数，每个设备都是唯一的，用于加密将来在此设备上生成的所有其他密钥。\ 其工作方式如下：应用程序将请求 SepOS 生成新密钥-pair，SepOS 将指示 Secure Enclave TRNG 生成密钥并对其进行加密（使用 UID）。 然后，应用程序可以请求 SepOS 解密密钥并使用生成的密钥签署消息。 在整个过程中，生成的密钥不会离开飞地，并且任何人都不知道。 （有关 Secure Enclave 的更多信息，请参阅此处[](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)）。 Secure Enclave 的构建和运行方式，以及它是世界各地强大公司和政府攻击目标的事实，是其安全性超越标准硬件钱包的原因。
## 抽象化账户
Braavos 作为 StarkNet 之上基于智能合约的钱包的强大之处在于它由两个支柱组成：
* 客户端（例如应用程序）允许用户查看/签署交易并将其发送到链。 * 链上端——拥有可以运行任意逻辑的账户智能合约；特别是在我们的例子中，运行任意签名**验证**逻辑。 应用程序使用移动设备安全模块对交易进行签名，然后将其发送到可以对其进行验证的链上账户合约。 如上所述，iPhone 和 Android 手机上的安全模块使用名为 NIST-P256 (secp256r1) 的加密技术，该加密技术与任何主要的区块链加密方案（包括 StarkNet）都不兼容。 这就是为什么拥有一个所有交易都经过并可以运行任意逻辑的链上智能合约账户对于在 iPhone 和 Android 手机上使用这些 HSM 至关重要。 ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## 生物识别技术
用户如何通过 Braavos 钱包批准交易？ 恶意应用程序是否可以在未经用户同意的情况下简单地自动签署交易？ 不！！ 移动设备中的内置安全模块（例如 Secure Enclave）的一个很酷的事情是它支持用户身份的本质生物识别身份验证。 这意味着即使是签署交易的实际批准也是直接在 Secure Enclave 上完成的。 审批不通过申请，用户需要通过指纹或人脸识别来批准交易。
## 恢复
如果没有人知道私钥，如果设备丢失或变砖怎么办？ 用户如何才能重新获得帐户的控制权？ 在 Braavos 中，一个账户实际上有 2 个公钥——硬件签名者密钥，将用于签署所有交易，以及从只能签署一项交易的种子短语派生的密钥——“请求删除硬件签名者”。 此请求不会立即执行，而是会有 4 天的延迟（可配置），以便允许用户使用硬件签名者取消此类请求。 这意味着，如果设备被盗/丢失/变砖，用户仍然可以在 4 天内恢复其帐户。 但是，如果他们的种子短语被盗并且攻击者发出删除硬件签名者的请求，用户将自动（并重复）收到移动设备的通知，并且能够取消请求并保证所有资产的安全。
## 概括
硬件签名者功能为加密用户提供了最先进的安全级别，并为用户提供了 web2 所习惯的体验。 从这个意义上来说，签署交易就像使用Apple/Google Pay支付一样顺利、省心。 这只是 StarkNet、基于智能合约的钱包（又名账户抽象）及其所支持的新设计空间的强大功能的一个突出例子。 我们预见越来越多的新兴功能的发展将推动加密货币行业走向更好、更具包容性的未来，为新用户和现有用户提供不妥协的安全性和不妥协的用户体验。