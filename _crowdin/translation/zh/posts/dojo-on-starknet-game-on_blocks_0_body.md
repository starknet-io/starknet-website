### Starknet 的第一个经过验证的游戏引擎

#   

## TL;DR

* Dojo 是一个经过验证的链上游戏引擎，使游戏具有所有权、互操作性和可扩展性。
* 它在 Starknet 上运行，为游戏创作者提供软件框架，帮助他们创建高质量、无缝、快速的游戏。
* Dojo 通过实现快速且廉价的交易来增强游戏开发，这是生产级加密游戏所必需的。
* ECS、Sozu、Torii 和 Katana 等组件有助于游戏开发和部署。
* 未来的 Dojo 增强功能包括 Layer-3 游戏研究、乐观更新、客户端证明和跨链传输。
* Starknet 上由 Dojo 驱动的游戏，如《Dope Wars》、《Influence》、《Realms》和《CafeCosmos》正在增加，标志着链上游戏的上升趋势。

#  

*区块链游戏未能兑现其承诺。 规模和成本的限制使得大多数链上游戏仅限于游戏内资产的代币化。 但随着 Starknet 和新的 Dojo 加密游戏引擎实现的廉价且快速的交易，不仅拥有游戏内资产，而且在链上证明游戏逻辑的承诺正在成为现实。*  

截至 2023 年，全球游戏市场 [价值达 2,450 亿美元](https://www.mordorintelligence.com/industry-reports/global-gaming-market) ，是全球娱乐行业最大的细分市场之一。 *区块链* 游戏承诺允许无限的互操作性，为游戏世界提供了一个比当前场景更令人兴奋的机会。 与多人游戏为游戏生态系统增加全新可能性的方式类似，链上游戏可以变得更加有趣和相关。

但这一承诺与区块链的现实相悖——交易昂贵且缓慢。 这是游戏根本不可能存在的两个问题。 正因为如此，创造成功的链上游戏几乎是不可能的。

但随着有效性汇总技术的成熟，链上游戏的承诺终于得以兑现。 

在本文中，我们将了解 **Starknet** 实现的高 TPS 如何实现链上游戏的承诺。 我们将了解 **Dojo**（第一个社区构建的可验证游戏引擎）如何使用 Starknet 为创作者提供支持。 最后，我们将探讨 Dojo 的未来以及它为区块链游戏带来的好处。

## 加密游戏

当我们谈论区块链游戏时，区块链支持的两种最流行的意识形态是游戏内资产的 **所有权** 和 **互操作性**。 

**游戏内资产的所有权** 表示游戏资产属于 *用户*所拥有的钱包。 换句话说，它们不属于游戏开发者或存储在游戏开发人员可以远程删除的集中式服务器上的简单电子邮件帐户。 在区块链游戏中，您创造或赚取的资产真正属于您。

一旦这些资产属于 *你*—游戏就可以实现 **互操作性**。 通过互操作性，一款游戏中的角色和资产可以转移到不同的游戏或世界。 如果您在一款游戏上投入了数百个小时但决定不再玩，您可以将这些来之不易的资产带到您选择的新游戏中。 

为了实现这两个概念，游戏必须在链上构建 ****。 这意味着所有游戏内资产、玩家采取的所有操作以及任何其他状态更改 *都必须作为区块链* 上的交易进行（每个操作单独进行，或者定期推送的聚合交易）。 在相当去中心化的区块链上，单笔交易的成本可能为几美分 *到几百美元* （在拥塞期间），并且需要几分钟或更长时间。 显然，这使得在此类平台上运营大型游戏基础设施变得极其昂贵、缓慢且不切实际。

## Starknet 和廉价计算 

但随着 Starknet 等有效性汇总的出现，这一切都在改变。 

**Starknet** 是由 [StarkWare](https://starkware.co/starknet/) 开发的第 2 层有效性汇总（通常称为零知识汇总），它使用称为 STARK 的加密系统来大幅降低计算和存储成本。 （要了解有关 Starknet 上的加密证明的更多信息， [请参阅此处的介绍性文章](https://starkware.medium.com/cambrian-explosion-of-cryptographic-proofs-5740a41cdbd2#:~:text=The%20Cambrian%20explosion%20of%20cryptographic,currently%20being%20used%20in%20web3)。） 

Starknet（以及 Starknet 的智能合约语言 Cairo）允许 dApp 以最低的成本处理高 TPS，同时仍然利用以太坊的安全性。 这些廉价而快速的交易正是释放区块链游戏前景所需要的。 游戏现在可以完全上链、快速且经济实惠。   

但即使具备链上能力，区块链游戏要蓬勃发展，还需要第二个关键构建模块：可证明的游戏引擎。

## 什么是游戏引擎

**游戏引擎** 是一个软件框架，可在您喜爱的游戏中实现精美的设置、快速的玩家动作和逼真的角色行为。 游戏引擎通常包括为开发人员提供框架的库和支持程序，这样他们就不必为每个游戏从头开始重新创建基本系统（例如物理、图形和游戏机制）。 游戏引擎还可以包括音频和视频处理、渲染 3D 效果和 AI 功能。 

游戏引擎是构建游戏的舞台。 

我们喜欢玩的大多数游戏的存在都归功于世界上最受欢迎的两个游戏引擎：Unity 和 Unreal Engine。 由 Epic Games 开发的虚幻引擎已用于《堡垒之夜》、《街头霸王 V》和《战争机器》系列等热门游戏中。 Unity 是游戏引擎行业的另一个主要参与者，它为《炉石传说》、《奥日与黑暗森林》和《Pokémon Go》等游戏带来了生命力。

由于 Starknet 开启了加密游戏的前景，一大批项目已经开始在 Starknet 上构建游戏。 但仍然缺少的是 *加密* 游戏引擎，该引擎允许开发人员构建游戏，而无需为基本物理、逻辑和游戏机制编写自定义代码，并且同时保持在链上。 

## Dojo - 第一个可证明的游戏引擎

**[Dojo](https://dojoengine.org/)** 是加密游戏引擎。 它是一个社区构建的、可证明的游戏引擎和工具链，用于构建链上游戏和自治世界。 它将加密游戏的承诺变为现实。

Starknet 上使用 Dojo 的游戏数量正在快速增长。 一些最受欢迎的包括：

* [影响力](https://www.influenceth.io/) - 一款大战略 MMO，背景设定在遥远的小行星带，拥有玩家拥有的开放经济。 用户可以购买 NFT 来探索和开发小行星。 所有小行星都生活在同一个世界，玩家可以互相互动。 
* [Realms](https://linktr.ee/BibliothecaDAO) - 一款策略游戏，包含 8,000 张具有特定名称、形式、大小和地理特征的土地地图，为用户（这些土地的所有者）提供链上效用，例如资源生成和可进行经济游戏的可替代住房原语。
* [CafeCosmos](https://www.cafecosmos.io/) - 一款陆基链上游戏，用户必须高效管理资源。 这包括收集资源、耕种和饲养动物、制作器具和家具、交易资产等等。 

## Dojo 组件

Dojo 生态系统具有以下组件： 

* ECS（实体组件系统）用 [Cairo](https://github.com/starkware-libs/cairo)编写
* Sozu 迁移规划器
* Torii 网络 & 索引堆栈
* Katana RPC 开发网络

让我们详细介绍一下其中每一个。 

**ECS 系统** 是游戏开发中使用的一种设计模式，旨在促进代码更易于维护。 ECS系统允许游戏开发者为游戏的对象（实体）赋予独特的功能（组件），从而使整个场景作为一个集成系统工作。 

Dojo 的 ECS 框架专为基于区块链的游戏开发而设计，可促进模块化、效率和灵活性，这对于管理区块链环境的独特挑战至关重要。 这使得能够在区块链上创建复杂、动态的游戏，支持多样化的游戏机制和交互，同时利用区块链技术透明、去中心化的优势。 

而且，由于 Dojo 是在开罗编写的，因此它最大限度地提高了需要证明的代码的效率。 （要详细了解开罗的复杂性以及可证明的含义， [我们推荐这篇文章](https://starkware.medium.com/moving-from-solidity-to-cairo-7d44f9723c68)。） 

**Sozo** 是专门用于构建和迁移规划的工具链。 换句话说，Sozo可以用来在Starknet上部署开发的游戏。 通过简单的“sozo migrate”命令，就可以在链上部署游戏“世界”的实例。 Sozo 仅作为命令行界面 (CLI) 工具提供。 然而，GUI 界面目前正在开发中。

**Torii** 是 Dojo 世界的综合索引和网络层。 由于 Torii 系统建立在 Dojo 之上，因此它旨在索引链上部署的游戏世界中发生的任何事件。 它系统地组织了Dojo世界的状态，使客户查询数据变得方便高效。 考虑到游戏中的许多状态变化（想象每次点击都是一次状态变化），高效的查询系统是 Dojo 堆栈之上的一个有用功能。 Torii 上的查询是在 [GraphQL](https://www.apollographql.com/blog/graphql/basics/what-is-graphql-introduction/)中进行的。

**Katana** 是一个速度极快的本地 Starknet 节点，旨在支持 Dojo 的本地开发。 Katana 允许开发人员在这个“devnet”上测试他们的应用程序，以实现快速本地开发。 开发人员可以使用 Katana 网络来测试游戏期间发送的交易。 Katana 提供了方便的 RPC 方法，可用于根据需要更改网络的配置（例如，更改出块时间或允许零费用交易等）。 最重要的是，Katana 支持 Starknet JSON-RPC 规范的版本 [v0.3.0](https://github.com/starkware-libs/starknet-specs/tree/v0.3.0) （截至 2023 年 6 月的最新版本）。 本机 Starknet JSON 调用（例如 starknet_getTransactionReceipt、starknet_getStorageAt）可在 Katana 上使用。 

## Dojo 和加密货币游戏的未来 

Dojo 社区不断研究和构建，以推动加密游戏向前发展。 除了改进当前组件之外，主要开发人员还致力于：

* 游戏 L3
* 乐观的更新
* 客户端证明 
* 跨链资产转移

让我们来看看每一项以及它对游戏的意义。

**游戏的 L3** - Dojo 正在研究在 Starknet 上开发 L3 游戏的可行性。 这意味着在 Starknet 之上部署了一条单独的链，该链定期证明其交易的执行情况并在 Starknet（L2）上提交证明。 Starknet 将此证明与网络上的其他交易汇总，并将证明提交给以太坊 L1，并在其中进行验证。 [该解决方案可以将游戏](https://medium.com/starkware/fractal-scaling-from-l2-to-l3-7fe238ecfb4f) 的可扩展性提高数倍。 （作为额外的一步，请考虑是否每次玩家尝试游戏中的一个关卡时，都会在游戏层之上构建一个供一次性使用的新层。）

**乐观更新** - 我们有多少次默默地等待钱包中的“交易进行中…”文本变成绿色并显示交易“已验证”？ 很多。 如果玩家在游戏中采取的每一步都作为单独的交易发送，则玩家将浪费 *很多* 的时间来等待交易被接受。 

乐观更新（Dojo 正在努力将其作为额外功能添加到其堆栈中）通过在客户端（在浏览器本身中）乐观地运行事务并允许玩家继续游戏来摆脱这个问题。 如果由于某种原因，事务的结果与浏览器中运行的结果不同，游戏将协调这些更改。

**客户端证明**- 随着客户端上运行的乐观更新，Dojo 正在探索客户端证明链上发送的部分交易的可能性。 这将允许构建在 Dojo 之上的游戏有效地隐藏用户传递的一些输入，因为可以创建在客户端接收这些输入的 ZK 证明。 反过来，这个 ZK 证明可以在链上发送到排序器，排序器执行交易的其余部分。 

**利用存储证明** - 存储证明是一种存储区块链信息的加密方式，以便可以跨链共享。 与预言机类似，它们提供信息真实性的证明。 但与预言机不同的是，它们不需要对第三方的信任来提供此证明——通过存储证明，信任内置于存储中。 存储证明还可以证明建立在以太坊之上的另一个链或层的状态有效性。 

Dojo 正在与 [Herodotus](https://www.herodotus.dev/) 团队合作，在 Dojo 中实现存储证明，这样跨链资产 *转移* 就不再需要了。 来自不同链的资产的所有权可以通过存储证明来证明，并且用户将能够在不同链或层上的不同游戏中使用他们的资产。 （请参阅上面讨论的关于在 Starknet 之上将游戏构建为单独的 L3 的部分。）

## 结论

Dojo 是世界上第一个经过验证的游戏引擎，它的诞生得益于 Starknet 和 Cairo 的可用性。 借助 Dojo 等经过验证的游戏引擎，真正的链上加密游戏开始崭露头角。 “互操作性和所有权”的承诺正在一步步实现。

如果您想帮助 Dojo 社区建设未来，请访问 [https://dojoengine.org](https://dojoengine.org/) 或访问他们的 Discord。