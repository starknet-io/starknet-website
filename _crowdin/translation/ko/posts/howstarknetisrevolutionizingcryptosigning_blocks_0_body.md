# StarkNet이 암호화 서명을 혁신하는 방법
## *복잡한 키를 사용하고 얼굴 ID를 사용합니다. 계정 추상화에 대한 사례 연구*
사람들이 얼굴 ID와 같은 친숙한 방법을 사용하여 암호화 트랜잭션에 서명할 수 있는 순간 셀프 커스터디가 붐을 일으킬 것입니다. 누구나 자신의 지갑을 운영하는 것이 원래의 암호화폐 이상이라는 것을 알고 있지만, 이는 위협적이며 사람들이 대신 교환을 수용하게 합니다. 이것은 계정 추상화라는 StarkNet 기능이 Braavos에서 지갑을 사용하는 훨씬 더 직관적인 방법을 얻는 방법에 대한 사례 연구입니다.
## 계정 추상화 소개
FTX 스캔들 이후 질문은 그 어느 때보다 중요합니다. 왜 사람들은 여전히 자신의 암호화폐를 스스로 관리하는 대신 중앙 집중식 기관에 제공하기로 선택합니까? 답: 대부분의 사람들에게 자기 양육권은 복잡합니다. 시드 문구는 '최악의' 복구 메커니즘으로, 많은 것을 억제합니다(심지어 가장 강화된 degen의 일부도 포함). 이 문제에 대한 해답은 계정 추상화입니다. 계정 추상화를 통해 지갑은 Face ID를 사용하여 트랜잭션에 서명하거나 이중 인증을 사용하는 것과 같이 Web2 사용자의 UX 기대치를 충족(또는 초과)할 수 있습니다. 계정 세분화 및 지출 한도를 용이하게 합니다. 결국 간단한 계정 복구를 가능하게 하고 시드 문구를 모두 함께 제거합니다. UI와 UX의 혁명입니다.
## 스타크넷
최고의 Validity Rollup인 StarkNet은 이더리움 확장을 위한 가장 유망한 솔루션이 되는 몇 가지 주요 특성을 가지고 있습니다. STARK 증명을 기반으로 Ethereum 보안을 손상시키지 않으면서 낮은 가스 수수료를 제공합니다. StarkEx를 지원하는 STARK 증명의 실적에는 누적 거래량 8000억 달러, 거래 3억 건, NFT 9천만 건이 포함됩니다. 낮은 수수료를 제공하는 STARK 증명의 기능과 계정 추상화의 힘이 결합되어 Braavos가 목표로 하는 혁신적인 지갑 기능을 개발할 수 있었습니다.
## 문맥
Bitcoin 및 Ethereum을 포함한 대부분의 주요 블록체인은 secp256k1 타원 곡선 암호화 서명 체계를 사용합니다(포괄적인 목록은[여기](http://ethanfast.com/top-crypto.html)참조). 이 타원 곡선 구현은 강력한 것으로 간주됩니다. 많은 블록체인이 이를 사용하고 시간의 시험을 견뎌냈습니다. 그러나 iPhone 및 Android(Pixel 및 기타) 휴대폰과 같은 모바일 장치의 하드웨어 보안 모듈(HSM)에서 사용할 수 있는 암호화 서명 체계와 호환되지 않습니다. 이러한 장치는 또 다른 곡선인 secp256r1(NIST-P256이라고도 함)을 사용합니다. 즉, 이러한 블록체인 사용자는 장치의 보안 칩을 활용할 수 없으며 강력한 보안 수준을 얻으려면 기본적으로 하드웨어 지갑을 사용해야 합니다. 이것은 사용자가 지갑에 로그인하고 트랜잭션을 승인하는 방법에 대한 UX 혁신을 심각하게 제한합니다(따라서 시드 문구의 편재성). StarkNet은 secp256r1을 지원하지 않으며 STARK 친화적인 자체 곡선을 가지고 있습니다. 그러나 다른 블록체인과 달리 StarkNet은 플랫폼에서 기본적으로 사용할 수 있는 계정 추상화를 가지고 있어 지갑 앱에 새로운 UX 기회를 제공합니다. Braavos는 이 기능을 활용하여 하드웨어 서명자를 도입했습니다.
## 하드웨어 서명자
하드웨어 서명자는 두 가지 주요 부분으로 구성됩니다.
* 사용자 모바일 장치의 보안 하위 시스템 * 임의의 논리를 실행할 수 있는 계정 스마트 계약(일명 계정 추상화)
## 보안 하위 시스템
하드웨어 서명자는 사용자 장치에 내장된 보안 하위 시스템(iPhone의**Secure Enclave**또는 Android Phone의**Titan**HSM)을 활용하여 계정을 보호합니다. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) Secure Enclave/Titan 칩은 개인 키를 생성하고 메시지에 서명할 수 있는 애플리케이션 프로세서와 완전히 분리된 격리된 전용 하위 시스템입니다. 내부 TRNG(True Random Number Generator)를 사용하여 키를 생성하고 내부 PKA(Public Key Accelerator)를 통해 NIST-P256(secp256r1) 타원 곡선을 통해 메시지에 서명합니다. 개인 키는 보안 시스템을 벗어나지 않으며 사용자나 응용 프로그램 자체를 포함하여 누구도 알 수 없거나 액세스할 수 없습니다. 즉, 디바이스 애플리케이션 프로세서 커널이 손상되더라도 사용자 키는 안전하게 유지됩니다! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Secure Enclave에 대한 심층 분석
칩 제조 공정 중에 UID(Unique Identifier)가 TRNG에 의해 생성되어 PKA에 저장됩니다. 읽을 수 없고 PKA를 벗어나지 않으므로 Secure Enclave 프로세서와 SepOS(Secure Enclave Processor Operating System)에서도 알 수 없습니다. 이 UID는 장치별로 고유한 난수이며 향후 이 장치에서 생성될 다른 모든 키를 암호화하는 데 사용됩니다. 작동 방식은 다음과 같습니다. 응용 프로그램은 SepOS에 새 키 생성을 요청합니다. -pair, SepOS는 Secure Enclave TRNG에 키를 생성하고 암호화하도록 지시합니다(UID 사용). 그런 다음 앱은 SepOS에서 요청하여 키를 해독하고 생성된 키를 사용하여 메시지에 서명할 수 있습니다. 이 전체 프로세스 동안 생성된 키는 엔클레이브를 떠나지 않으며 누구에게도 알려지지 않습니다. (Secure Enclave에 대한 자세한 내용은[여기](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)참조). Secure Enclave가 구축되고 작동하는 방식은 전 세계의 강력한 기업 및 정부의 공격 대상이라는 사실과 함께 보안이 표준 하드웨어 지갑을 능가하는 이유입니다.
## 계정 추상화
StarkNet 위에 있는 스마트 계약 기반 지갑으로서 Braavos의 힘은 두 개의 기둥으로 구성되어 있다는 것입니다.
* 사용자가 트랜잭션을 검토/서명하고 체인으로 보낼 수 있도록 하는 클라이언트 측(예: 애플리케이션). * 온체인 측 — 임의의 논리를 실행할 수 있는 계정 스마트 계약이 있습니다. 특히 우리의 경우 임의 서명**확인**논리를 실행합니다. 애플리케이션은 모바일 장치 보안 모듈을 사용하여 거래에 서명한 다음 이를 확인할 수 있는 온체인 계정 계약으로 보냅니다. 위에서 언급했듯이 iPhone 및 Android 휴대폰의 보안 모듈은 NIST-P256(secp256r1)이라는 암호화를 사용하며 StarkNet을 포함한 주요 블록체인 암호화 체계와 호환되지 않습니다. 이것이 바로 모든 거래가 진행되고 임의의 논리를 실행할 수 있는 온체인 스마트 계약 계정을 보유하는 것이 iPhone 및 Android 휴대폰에서 이러한 HSM을 활용하는 데 중요한 이유입니다. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)
## 생체 인식
사용자는 Braavos 지갑을 통해 거래를 어떻게 승인합니까? 악성 애플리케이션이 사용자의 동의 없이 단순히 거래에 자동 서명할 수 있습니까? 아니요!! Secure Enclave와 같은 모바일 장치에 내장된 보안 모듈의 멋진 점은 본질적으로 사용자 ID의 생체 인식 인증을 지원한다는 것입니다. 이는 트랜잭션 서명에 대한 실제 승인도 Secure Enclave와 비교하여 직접 수행됨을 의미합니다. 승인은 애플리케이션을 거치지 않으며 사용자는 지문 또는 얼굴 인식으로 거래를 승인해야 합니다.
## 회복
개인 키를 아는 사람이 아무도 없는 경우 장치가 분실되거나 벽돌이 되면 어떻게 됩니까? 사용자가 계정을 다시 제어할 수 있는 방법은 무엇입니까? Braavos에서 계정에는 실제로 2개의 공개 키, 즉 모든 트랜잭션에 서명하는 데 사용되는 하드웨어 서명자 키와 하나의 트랜잭션에만 서명할 수 있는 시드 구문에서 파생된 키인 "하드웨어 서명자 제거 요청"이 있습니다. 이 요청은 즉시 실행되지 않고 사용자가 하드웨어 서명자를 사용하여 그러한 요청을 취소할 수 있도록 4일(구성 가능)의 시간 지연이 있습니다. 즉, 기기가 도난/분실/벽화되어도 사용자는 4일 이내에 계정을 복구할 수 있습니다. 그러나 시드 문구가 도난당하고 공격자가 하드웨어 서명자를 제거하라는 요청을 발행하면 사용자는 자동으로(반복적으로) 모바일 장치에 알림을 받고 요청을 취소하고 모든 자산을 안전하게 유지할 수 있습니다. .
## 요약
하드웨어 서명자 기능은 암호화 사용자를 위한 최신 보안 수준과 사용자가 web2에서 익숙한 경험을 모두 제공합니다. 이런 의미에서 거래에 서명하는 것은 Apple/Google Pay로 지불하는 것만큼 매끄럽고 걱정할 필요가 없습니다. 이것은 StarkNet, 스마트 계약 기반 지갑(일명 계정 추상화) 및 이것이 가능하게 하는 새로운 디자인 공간의 힘을 보여주는 하나의 중요한 예일 뿐입니다. 우리는 새로운 사용자와 기존 사용자 모두에게 타협 없는 UX와 결합된 타협 없는 보안을 제공하면서 암호화 산업을 더 좋고 더 포괄적인 미래로 이끌 초기 기능의 개발이 점점 더 많아질 것으로 예상합니다.