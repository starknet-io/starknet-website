# Com StarkNet està revolucionant la signatura criptogràfica
## *Fora amb les claus complexes, amb Face ID. Un cas pràctic sobre l'abstracció de comptes*
En el moment en què la gent pugui utilitzar mètodes coneguts com la identificació facial per signar transaccions criptogràfiques, veurem un auge de l'autocustodia. Tothom sap que l'execució de la seva pròpia cartera és l'ideal de criptografia original, però és intimidant i fa que la gent adopti els intercanvis. Aquest és un estudi de cas de com Braavos utilitza una funcionalitat de StarkNet anomenada Account Abstraction per obtenir una manera molt més intuïtiva d'utilitzar la cartera.
## Presentació de l'abstracció de comptes
Després de l'escàndol FTX, la pregunta és més rellevant que mai. Per què la gent segueix optant per donar la seva criptografia a institucions centralitzades, en lloc de custodiar-la elles mateixes? La resposta: per a la majoria de la gent, l'autocustodia és complicat. Les frases de llavors són el mecanisme de recuperació "el pitjor-millor", que dissuaix a molts (fins i tot alguns dels degens més endurits). La resposta a aquest repte: Abstracció de comptes. L'abstracció del compte permet que les carteres compleixin (i superin) les expectatives d'UX dels usuaris de Web2, com ara signar una transacció amb Face ID o mitjançant l'autenticació de dos factors. Facilita la segmentació del compte i els límits de despesa; i, finalment, permet la recuperació senzilla del compte i l'eliminació de la frase inicial. És una revolució per a UI i UX.
## StarkNet
StarkNet, el principal Validity Rollup, té diverses característiques clau que la converteixen en la solució més prometedora per escalar Ethereum. Basat en proves STARK, ofereix tarifes de gas baixes sense comprometre la seguretat d'Ethereum. El historial de proves STARK que impulsen StarkEx inclou 800 milions de dòlars en volum de negociació acumulat, 300 milions de transaccions i 90 milions de NFT. Les capacitats de les proves STARK per oferir tarifes baixes, juntament amb el poder de l'abstracció de comptes, van permetre a Braavos desenvolupar les innovadores capacitats de cartera a les quals pretén.
## Context
La majoria de les cadenes de blocs principals, inclosos Bitcoin i Ethereum, utilitzen els esquemes de signatura criptogràfica de corba el·líptica secp256k1 (vegeu[aquí](http://ethanfast.com/top-crypto.html)per obtenir una llista completa). Es considera que aquesta implementació de corba el·líptica és robusta: moltes cadenes de blocs l'utilitzen i va superar la prova del temps. Però no és compatible amb l'esquema de signatura criptogràfica disponible als mòduls de seguretat de maquinari (HSM) dels dispositius mòbils, com ara els iPhones i els telèfons Android (Pixel i altres). Aquests dispositius utilitzen una altra corba: secp256r1 (també anomenada NIST-P256). Això significa que els usuaris d'aquestes cadenes de blocs no poden aprofitar els xips de seguretat dels seus dispositius i han d'utilitzar carteres de maquinari per defecte si volen obtenir un fort nivell de seguretat. Això restringeix severament qualsevol innovació UX sobre com els usuaris poden iniciar sessió en una cartera i aprovar transaccions (per tant, la ubiqüitat de les frases llavor). StarkNet no és compatible amb secp256r1 i té la seva pròpia corba propietària que és una corba amigable amb STARK. Però a diferència d'altres blockchains, StarkNet té l'abstracció de comptes disponible de manera nativa a la seva plataforma, la qual cosa obre un nou món d'oportunitats d'UX per a aplicacions de cartera. Braavos va aprofitar aquesta capacitat per introduir el Signer de maquinari.
## El signant de maquinari
El signant de maquinari consta de dues parts principals:
* El subsistema segur al dispositiu mòbil dels usuaris * El contracte intel·ligent del compte que pot executar una lògica arbitrària (també conegut com Abstracció del compte)
## Subsistema segur
El signant de maquinari utilitza el subsistema segur integrat al dispositiu dels usuaris (l'iPhone**Secure Enclave**o el telèfon Android**Titan**HSM) per protegir el compte. ![](https://miro.medium.com/max/1400/0*EPm8q10ykvFGnvcv) El xip Secure Enclave / Titan és un subsistema dedicat i aïllat, totalment separat del processador de l'aplicació que pot generar claus privades i signar missatges. Genera les claus mitjançant un generador de números aleatoris veritables (TRNG) intern i signa missatges sobre la corba el·líptica NIST-P256 (secp256r1) mitjançant el seu accelerador de claus públiques (PKA) intern. Les claus privades no surten mai del sistema segur i són desconegudes/inaccessibles per a ningú, ni tan sols per a l'usuari, ni per a la pròpia aplicació. Això vol dir que fins i tot si el nucli del processador de l'aplicació del dispositiu es veu compromès, les claus d'usuari es mantenen segures! ![](https://miro.medium.com/max/1400/0*yHJ--fK8keNdTci8)
## Immersió més profunda a l'enclavament segur
Durant el procés de fabricació del xip, el TRNG genera un UID (identificador únic) i s'emmagatzema al PKA. No es pot llegir i no surt mai del PKA, per la qual cosa és desconegut fins i tot per al processador Secure Enclave i el sistema operatiu del processador Secure Enclave (SepOS). Aquest UID és un número aleatori que és únic per dispositiu i s'utilitza per xifrar totes les altres claus que es generaran en el futur en aquest dispositiu.\ La manera de funcionar és la següent: l'aplicació demanarà al SepOS que generi una nova clau. -pair, el SepOS indicarà a Secure Enclave TRNG per generar una clau i xifrar-la (utilitzant l'UID). Aleshores, l'aplicació pot sol·licitar al SepOS per desxifrar la clau i signar un missatge amb la clau generada. Durant tot aquest procés la clau generada no surt de l'enclavament i és desconeguda per ningú. (Per obtenir més informació sobre l'Enclavament Segur, consulteu[aquí](https://support.apple.com/en-il/guide/security/sec59b0b31ff/web)). La forma en què es construeix i funciona Secure Enclave, juntament amb el fet que és un objectiu d'atacs per part de poderoses corporacions i governs de tot el món, és la raó per la qual la seva seguretat supera les carteres de maquinari estàndard.
## Abstracció de comptes
El poder de Braavos com a cartera basada en contracte intel·ligent a la part superior de StarkNet és que es compon de dos pilars:
* La part del client (per exemple, l'aplicació) que permet a l'usuari revisar/signar transaccions i enviar-les a la cadena. * El costat de la cadena: té un contracte intel·ligent de compte que pot executar una lògica arbitrària; i, en particular, en el nostre cas, executeu</strong>lògica de verificació**de signatura arbitrària. L'aplicació signa la transacció mitjançant el mòdul de seguretat del dispositiu mòbil i després l'envia al contracte de compte en cadena que pot verificar-ho. Com s'ha esmentat anteriorment, el mòdul de seguretat d'iPhone i telèfons Android utilitza una criptografia que s'anomena NIST-P256 (secp256r1), que no és compatible amb cap esquema criptogràfic important de blockchain, inclòs StarkNet. És per això que tenir un compte de contracte intel·ligent a la cadena pel qual passen totes les transaccions i que pugui executar una lògica arbitrària, és crucial per utilitzar aquests HSM en iPhones i telèfons Android. ![](https://miro.medium.com/max/1400/0*1gItqYMJgmpu_fXc)</li> </ul>
## Biometria
Com aprova l'usuari una transacció mitjançant la cartera Braavos? Pot una aplicació maliciosa signar automàticament una transacció sense el consentiment de l'usuari? No!! El millor del mòdul de seguretat integrat en dispositius mòbils, com ara Secure Enclave, és que admet l'autenticació intrínsecament biomètrica de la identitat de l'usuari. Això significa que fins i tot l'aprovació real per signar una transacció es fa directament en comparació amb l'Enclavament Segur. L'aprovació no passa per l'aplicació, i l'usuari haurà d'aprovar la transacció amb la seva empremta digital o identificació facial.
## Recuperació
Si ningú sap la clau privada, què passa si el dispositiu es perd o es bloqueja? Com pot l'usuari recuperar el control del compte? A Braavos, un compte tindrà 2 claus públiques: la clau del signant de maquinari, que s'utilitzarà per signar totes les transaccions, i la clau derivada de la frase inicial que només pot signar una transacció: una "Sol·licitud per eliminar el signant de maquinari". Aquesta sol·licitud no s'executarà immediatament, sinó que tindrà un retard de 4 dies (configurable) per permetre a l'usuari utilitzar el signant de maquinari per cancel·lar aquesta sol·licitud. Això vol dir que si el dispositiu es roba/perd/tapia, els usuaris encara podran recuperar el seu compte en un termini de 4 dies. Tanmateix, si li roben la frase inicial i un atacant emet una sol·licitud per eliminar el signant de maquinari, l'usuari rebrà automàticament (i repetidament) una notificació al seu dispositiu mòbil i podrà cancel·lar la sol·licitud i mantenir tots els actius segurs. .
## Resum
La funció de signant de maquinari ofereix un nivell de seguretat d'última generació per als usuaris de criptografia i l'experiència a la qual els usuaris estan acostumats des de web2. En aquest sentit, signar una transacció és tan senzill i sense preocupacions com pagar amb Apple/Google Pay. Aquest és només un exemple, però destacat, del poder de StarkNet, la cartera intel·ligent basada en contractes (també conegut com Account Abstraction) i el nou espai de disseny que permet. Preveiem el desenvolupament de capacitats cada cop més naixents que impulsaran la indústria criptogràfica cap a un futur millor i més inclusiu, proporcionant als usuaris nous i existents una seguretat sense compromisos juntament amb una UX sense compromisos.